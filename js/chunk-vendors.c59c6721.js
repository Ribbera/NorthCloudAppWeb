(self["webpackChunkNorthCloud"]=self["webpackChunkNorthCloud"]||[]).push([[998],{224:function(t,e,n){"use strict";var r=n(62),i=n(202),o=n(695),a=n(783),s=n(594);function u(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=(c={},c["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new a.ErrorFactory("appCheck","AppCheck",h),p=new Map,d={activated:!1,tokenObservers:[]},v={enabled:!1};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(t){return p.get(t)||d}function y(t,e){p.set(t,e)}function m(){return v}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b="https://content-firebaseappcheck.googleapis.com/v1beta",_="exchangeRecaptchaToken",w="exchangeDebugToken",I={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},T=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new a.Deferred,[4,E(this.getNextRun(t))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new a.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function E(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(){return self.grecaptcha}function C(t){if(!g(t).activated)throw f.create("use-before-activation",{appName:t.name})}function k(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}))}function A(t){return a.base64.encodeString(JSON.stringify(t),!1)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,(function(){var t,i,a,s,u,c,l,h,p,d;return o.__generator(this,(function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},i=e.getImmediate({optional:!0}),i&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return s=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,s.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(h=c.ttl.match(/^([\d.]+)(s)$/),!h||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return p=1e3*Number(h[1]),d=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:d+p,issuedAtTimeMillis:d}]}}))}))}function P(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":"+_+"?key="+o,body:{recaptcha_token:e}}}function R(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":"+w+"?key="+o,body:{debug_token:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x="firebase-app-check-database",O=1,D="firebase-app-check-store",L="debug-token",M=null;function F(){return M||(M=new Promise((function(t,e){try{var n=indexedDB.open(x,O);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(f.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(D,{keyPath:"compositeKey"})}}}catch(r){e(f.create("storage-open",{originalErrorMessage:r.message}))}})),M)}function j(t){return K(W(t))}function U(t,e){return B(W(t),e)}function q(t){return B(L,t)}function V(){return K(L)}function B(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,F()];case 1:return n=o.sent(),r=n.transaction(D,"readwrite"),i=r.objectStore(D),a=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){a.onsuccess=function(e){t()},r.onerror=function(t){var n;e(f.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function K(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,F()];case 1:return e=o.sent(),n=e.transaction(D,"readonly"),r=n.objectStore(D),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(f.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function W(t){return t.options.appId+"-"+t.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H=new s.Logger("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!a.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,j(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),H.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}function z(t,e){return a.isIndexedDBAvailable()?U(t,e).catch((function(t){H.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function Q(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,V()];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e=k(),q(e).catch((function(t){return H.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(){var t=m();return t.enabled}function Y(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){if(t=m(),t.enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}function X(){var t=a.getGlobal();if("string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=m();e.enabled=!0;var n=new a.Deferred;e.token=n,"string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Q())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J={error:"UNKNOWN_ERROR"};function Z(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,c,l,h,f,p;return o.__generator(this,(function(d){switch(d.label){case 0:return C(t),r=g(t),i=r.token,a=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:s=d.sent(),s&&it(s)&&(i=s,y(t,o.__assign(o.__assign({},r),{token:i})),rt(t,{token:i.token})),d.label=2;case 2:return!n&&i&&it(i)?[2,{token:i.token}]:$()?(c=N,l=R,h=[t],[4,Y()]):[3,6];case 3:return[4,c.apply(void 0,[l.apply(void 0,h.concat([d.sent()])),e])];case 4:return u=d.sent(),[4,z(t,u)];case 5:return d.sent(),y(t,o.__assign(o.__assign({},r),{token:u})),[2,{token:u.token}];case 6:return d.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=d.sent(),[3,9];case 8:return f=d.sent(),H.error(f),a=f,[3,9];case 9:return i?[3,10]:(p=ot(a),[3,12]);case 10:return p={token:i.token},y(t,o.__assign(o.__assign({},r),{token:i})),[4,z(t,i)];case 11:d.sent(),d.label=12;case 12:return rt(t,p),[2,p]}}))}))}function tt(t,e,n,r,i){var a=g(t),s={next:r,error:i,type:n},u=o.__assign(o.__assign({},a),{tokenObservers:o.__spreadArray(o.__spreadArray([],a.tokenObservers),[s])});if(!u.tokenRefresher){var c=nt(t,e);u.tokenRefresher=c}if(!u.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),a.token&&it(a.token)){var l=a.token;Promise.resolve().then((function(){return r({token:l.token})})).catch((function(){}))}else null==a.token&&a.cachedTokenPromise.then((function(t){t&&it(t)&&r({token:t.token})})).catch((function(){}));y(t,u)}function et(t,e){var n=g(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),y(t,o.__assign(o.__assign({},n),{tokenObservers:r}))}function nt(t,e){var n=this;return new T((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return n=g(t),n.token?[3,2]:[4,Z(t,e)];case 1:return r=i.sent(),[3,4];case 2:return[4,Z(t,e,!0)];case 3:r=i.sent(),i.label=4;case 4:if(r.error)throw r.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=g(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),I.RETRIAL_MIN_WAIT,I.RETRIAL_MAX_WAIT)}function rt(t,e){for(var n=g(t).tokenObservers,r=0,i=n;r<i.length;r++){var o=i[r];try{"EXTERNAL"===o.type&&null!=e.error?o.error(e.error):o.next(e)}catch(a){}}}function it(t){return t.expireTimeMillis-Date.now()>0}function ot(t){return{token:A(J),error:t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at="https://www.google.com/recaptcha/api.js";function st(t,e){var n=g(t),r=new a.Deferred;y(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u=S();return u?u.ready((function(){ct(t,e,u,i),r.resolve(u)})):lt((function(){var n=S();if(!n)throw new Error("no recaptcha");n.ready((function(){ct(t,e,n,i),r.resolve(n)}))})),r.promise}function ut(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return C(t),e=g(t).reCAPTCHAState,[4,e.initialized.promise];case 1:return n=r.sent(),[2,new Promise((function(e,r){var i=g(t).reCAPTCHAState;n.ready((function(){e(n.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function ct(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),a=g(t);y(t,o.__assign(o.__assign({},a),{reCAPTCHAState:o.__assign(o.__assign({},a.reCAPTCHAState),{widgetId:i})}))}function lt(t){var e=document.createElement("script");e.src=""+at,e.onload=t,document.head.appendChild(e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht=function(){function t(t){this._siteKey=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:if(!this._app||!this._platformLoggerProvider)throw f.create("use-before-activation",{appName:""});e.label=1;case 1:return e.trys.push([1,3,,4]),[4,ut(this._app)];case 2:return t=e.sent(),[3,4];case 3:throw e.sent(),f.create("recaptcha-error");case 4:return[2,N(P(this._app,t),this._platformLoggerProvider)]}}))}))},t.prototype.initialize=function(t,e){this._app=t,this._platformLoggerProvider=e,st(t,this._siteKey).catch((function(){}))},t}(),ft=function(){function t(t){this._customProviderOptions=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!this._app)throw f.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=r.sent(),e=a.issuedAtTime(t.token),n=null!==e&&e<Date.now()&&e>0?1e3*e:Date.now(),[2,o.__assign(o.__assign({},t),{issuedAtTimeMillis:n})]}}))}))},t.prototype.initialize=function(t){this._app=t},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pt(t,e,n,r){var i=g(t);if(i.activated)throw f.create("already-activated",{appName:t.name});var a=o.__assign(o.__assign({},i),{activated:!0});a.cachedTokenPromise=G(t).then((function(e){return e&&it(e)&&y(t,o.__assign(o.__assign({},g(t)),{token:e})),e})),a.provider="string"===typeof e?new ht(e):e instanceof ht||e instanceof ft?e:new ft({getToken:e.getToken}),a.isTokenAutoRefreshEnabled=void 0===r?t.automaticDataCollectionEnabled:r,y(t,a),a.provider.initialize(t,n)}function dt(t,e){var n=g(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),y(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}function vt(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,Z(t,e,n)];case 1:if(r=i.sent(),r.error)throw r.error;return[2,{token:r.token}]}}))}))}function gt(t,e,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),tt(t,e,"EXTERNAL",o,a),function(){return et(t,o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){return{app:t,activate:function(n,r){return pt(t,n,e,r)},setTokenAutoRefreshEnabled:function(e){return dt(t,e)},getToken:function(n){return vt(t,e,n)},onTokenChanged:function(n,r,i){return gt(t,e,n,r)},INTERNAL:{delete:function(){for(var e=g(t).tokenObservers,n=0,r=e;n<r.length;n++){var i=r[n];et(t,i.next)}return Promise.resolve()}}}}function mt(t,e){return{getToken:function(n){return Z(t,e,n)},addTokenListener:function(n){return tt(t,e,"INTERNAL",n)},removeTokenListener:function(e){return et(t,e)}}}var bt="@firebase/app-check",_t="0.3.2",wt="appCheck",It="app-check-internal";function Tt(t){t.INTERNAL.registerComponent(new i.Component(wt,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger");return yt(e,n)}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:ht,CustomProvider:ft}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){var r=t.getProvider(It);r.initialize()}))),t.INTERNAL.registerComponent(new i.Component(It,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger");return mt(e,n)}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion(bt,_t)}Tt(l["default"]),X()},695:function(t,e,n){"use strict";n.r(e),n.d(e,{__assign:function(){return o},__asyncDelegator:function(){return S},__asyncGenerator:function(){return E},__asyncValues:function(){return C},__await:function(){return T},__awaiter:function(){return d},__classPrivateFieldGet:function(){return R},__classPrivateFieldIn:function(){return O},__classPrivateFieldSet:function(){return x},__createBinding:function(){return g},__decorate:function(){return s},__esDecorate:function(){return c},__exportStar:function(){return y},__extends:function(){return i},__generator:function(){return v},__importDefault:function(){return P},__importStar:function(){return N},__makeTemplateObject:function(){return k},__metadata:function(){return p},__param:function(){return u},__propKey:function(){return h},__read:function(){return b},__rest:function(){return a},__runInitializers:function(){return l},__setFunctionName:function(){return f},__spread:function(){return _},__spreadArray:function(){return I},__spreadArrays:function(){return w},__values:function(){return m}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e,n,r,i,o){function a(t){if(void 0!==t&&"function"!==typeof t)throw new TypeError("Function expected");return t}for(var s,u=r.kind,c="getter"===u?"get":"setter"===u?"set":"value",l=!e&&t?r["static"]?t:t.prototype:null,h=e||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),f=!1,p=n.length-1;p>=0;p--){var d={};for(var v in r)d[v]="access"===v?{}:r[v];for(var v in r.access)d.access[v]=r.access[v];d.addInitializer=function(t){if(f)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(t||null))};var g=(0,n[p])("accessor"===u?{get:h.get,set:h.set}:h[c],d);if("accessor"===u){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(s=a(g.get))&&(h.get=s),(s=a(g.set))&&(h.set=s),(s=a(g.init))&&i.unshift(s)}else(s=a(g))&&("field"===u?i.unshift(s):h[c]=s)}l&&Object.defineProperty(l,r.name,h),f=!0}function l(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function h(t){return"symbol"===typeof t?t:"".concat(t)}function f(t,e,n){return"symbol"===typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function p(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function d(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function v(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}var g=Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function y(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||g(e,t,n)}function m(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function _(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function w(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function I(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function E(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{u(i[t](e))}catch(n){h(o[0][3],n)}}function u(t){t.value instanceof T?Promise.resolve(t.value.v).then(c,l):h(o[0][2],t)}function c(t){s("next",t)}function l(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function S(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:T(t[r](e)),done:!1}:i?i(e):e}:i}}function C(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"===typeof m?m(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){e=t[n](e),i(r,o,e.done,e.value)}))}}function i(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var A=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e};function N(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&g(e,t,n);return A(e,t),e}function P(t){return t&&t.__esModule?t:{default:t}}function R(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function x(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}function O(t,e){if(null===e||"object"!==typeof e&&"function"!==typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof t?e===t:t.has(e)}e["default"]={__extends:i,__assign:o,__rest:a,__decorate:s,__param:u,__metadata:p,__awaiter:d,__generator:v,__createBinding:g,__exportStar:y,__values:m,__read:b,__spread:_,__spreadArrays:w,__spreadArray:I,__await:T,__asyncGenerator:E,__asyncDelegator:S,__asyncValues:C,__makeTemplateObject:k,__importStar:N,__importDefault:P,__classPrivateFieldGet:R,__classPrivateFieldSet:x,__classPrivateFieldIn:O}},62:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return U},firebase:function(){return j}});var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.create;Object.create;var i,o,a=n(783),s=n(202),u=n(594),c=(i={},i["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f="0.6.30",p="@firebase/analytics",d="@firebase/app-check",v="@firebase/auth",g="@firebase/database",y="@firebase/functions",m="@firebase/installations",b="@firebase/messaging",_="@firebase/performance",w="@firebase/remote-config",I="@firebase/storage",T="@firebase/firestore",E="firebase-wrapper",S="[DEFAULT]",C=(o={},o[h]="fire-core",o[p]="fire-analytics",o[d]="fire-app-check",o[v]="fire-auth",o[g]="fire-rtdb",o[y]="fire-fn",o[m]="fire-iid",o[b]="fire-fcm",o[_]="fire-perf",o[w]="fire-rc",o[I]="fire-gcs",o[T]="fire-fst",o["fire-js"]="fire-js",o[E]="fire-js-all",o),k=new u.Logger("@firebase/app"),A=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.deepCopy)(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=S),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=S),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){k.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();A.prototype.name&&A.prototype.options||A.prototype.delete||console.log("dc");var N="8.10.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(t){var e={},n=new Map,r={__esModule:!0,initializeApp:c,app:o,registerVersion:p,setLogLevel:u.setLogLevel,onLog:d,apps:null,SDK_VERSION:N,INTERNAL:{registerComponent:f,removeApp:i,components:n,useAsService:v}};function i(t){delete e[t]}function o(t){if(t=t||S,!(0,a.contains)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var s=i;void 0===s.name&&(s.name=S);var u=s.name;if("string"!==typeof u||!u)throw l.create("bad-app-name",{appName:String(u)});if((0,a.contains)(e,u))throw l.create("duplicate-app",{appName:u});var c=new t(n,s,r);return e[u]=c,c}function h(){return Object.keys(e).map((function(t){return e[t]}))}function f(i){var s=i.name;if(n.has(s))return k.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===i.type?r[s]:null;if(n.set(s,i),"PUBLIC"===i.type){var u=function(t){if(void 0===t&&(t=o()),"function"!==typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==i.serviceProps&&(0,a.deepExtend)(u,i.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,i.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var f=h[c];e[f]._addComponent(i)}return"PUBLIC"===i.type?r[s]:null}function p(t,e,n){var r,i=null!==(r=C[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void k.warn(u.join(" "))}f(new s.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))}function d(t,e){if(null!==t&&"function"!==typeof t)throw l.create("invalid-log-argument");(0,u.setUserLogHandler)(t,e)}function v(t,e){if("serverAuth"===e)return null;var n=e;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:h}),o["App"]=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(){var t=P(A);function e(e){(0,a.deepExtend)(t,e)}return t.INTERNAL=r(r({},t.INTERNAL),{createFirebaseNamespace:R,extendNamespace:e,createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}var x=R(),O=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map((function(t){if(D(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",(function(t){return new O(t)}),"PRIVATE")),t.registerVersion(h,f,e),t.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,a.isBrowser)()&&void 0!==self.firebase){k.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var M=self.firebase.SDK_VERSION;M&&M.indexOf("LITE")>=0&&k.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var F=x.initializeApp;x.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.isNode)()&&k.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),F.apply(void 0,t)};var j=x;L(j);var U=j},202:function(t,e,n){"use strict";n.r(e),n.d(e,{Component:function(){return c},ComponentContainer:function(){return d},Provider:function(){return h}});function r(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function i(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;function o(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function s(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var u=n(783),c=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),l="[DEFAULT]",h=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new u.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(p(t))try{this.getOrInitializeService({instanceIdentifier:l})}catch(d){}try{for(var r=o(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var s=a(i.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:h});c.resolve(f)}catch(d){}}}catch(v){e={error:v}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=l),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(s(s([],a(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),a(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=l),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=l),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:i});try{for(var c=o(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var h=a(l.value,2),f=h[0],p=h[1],d=this.normalizeInstanceIdentifier(f);s===d&&p.resolve(u)}}catch(v){e={error:v}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return u},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var a=o(i),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:f(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(o){}return i||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=l),this.component?this.component.multipleInstances?t:l:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();function f(t){return t===l?void 0:t}function p(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new h(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},921:function(t,e,n){"use strict";var r=n(62),i=n(202),o=n(783),a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},a(t,e)};function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},u.apply(this,arguments)};function c(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;function h(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(O){i={error:O}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function p(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var d=n(594);t=n.hmd(t);var v="@firebase/database",g="0.11.0",y="";function m(t){y=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),_=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),w=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new b(e)}}catch(n){}return new _},I=w("localStorage"),T=w("sessionStorage"),E=new d.Logger("@firebase/database"),S=function(){var t=1;return function(){return t++}}(),C=function(t){var e=(0,o.stringToByteArray)(t),n=new o.Sha1;n.update(e);var r=n.digest();return o.base64.encodeByteArray(r)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"===typeof i&&"number"===typeof i.length?n+=k.apply(null,i):n+="object"===typeof i?(0,o.stringify)(i):i,n+=" "}return n},A=null,N=!0,P=function(t,e){(0,o.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(E.logLevel=d.LogLevel.VERBOSE,A=E.log.bind(E),e&&T.set("logging_enabled",!0)):"function"===typeof t?A=t:(A=null,T.remove("logging_enabled"))},R=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===N&&(N=!1,null===A&&!0===T.get("logging_enabled")&&P(!0)),A){var n=k.apply(null,t);A(n)}},x=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];R.apply(void 0,p([t],f(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+k.apply(void 0,p([],f(t)));E.error(n)},D=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+k.apply(void 0,p([],f(t)));throw E.error(n),new Error(n)},L=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+k.apply(void 0,p([],f(t)));E.warn(n)},M=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&L("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},F=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},j=function(t){if((0,o.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},U="[MIN_NAME]",q="[MAX_NAME]",V=function(t,e){if(t===e)return 0;if(t===U||e===q)return-1;if(e===U||t===q)return 1;var n=tt(t),r=tt(e);return null!==n?null!==r?n-r===0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},B=function(t,e){return t===e?0:t<e?-1:1},K=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.stringify)(e))},W=function(t){if("object"!==typeof t||null===t)return(0,o.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.stringify)(e[i]),r+=":",r+=W(t[e[i]]);return r+="}",r},H=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var z=function(t){(0,o.assert)(!F(t),"Invalid JSON number");var e,n,r,i,a,s=11,u=52,c=(1<<s-1)-1;0===t?(n=0,r=0,e=1/t===-1/0?1:0):(e=t<0,t=Math.abs(t),t>=Math.pow(2,1-c)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),c),n=i+c,r=Math.round(t*Math.pow(2,u-i)-Math.pow(2,u))):(n=0,r=Math.round(t/Math.pow(2,1-c-u))));var l=[];for(a=u;a;a-=1)l.push(r%2?1:0),r=Math.floor(r/2);for(a=s;a;a-=1)l.push(n%2?1:0),n=Math.floor(n/2);l.push(e?1:0),l.reverse();var h=l.join(""),f="";for(a=0;a<64;a+=8){var p=parseInt(h.substr(a,8),2).toString(16);1===p.length&&(p="0"+p),f+=p}return f.toLowerCase()},Q=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},$=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI};function Y(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var X=new RegExp("^-?(0*)\\d{1,10}$"),J=-2147483648,Z=2147483647,tt=function(t){if(X.test(t)){var e=Number(t);if(e>=J&&e<=Z)return e}return null},et=function(t){try{t()}catch(e){setTimeout((function(){var t=e.stack||"";throw L("Exception was thrown by user callback.",t),e}),Math.floor(0))}},nt=function(){var t="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},rt=function(t,e){var n=setTimeout(t,e);return"object"===typeof n&&n["unref"]&&n["unref"](),n},it=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null===e||void 0===e?void 0:e.getImmediate({optional:!0}),this.appCheck||null===e||void 0===e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){L('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),ot=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(R("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',L(t)},t}(),at=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),st="5",ut="v",ct="s",lt="r",ht="f",ft=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pt="ls",dt="p",vt="ac",gt="websocket",yt="long_polling",mt=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=I.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&I.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function bt(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function _t(t,e,n){var r;if((0,o.assert)("string"===typeof e,"typeof type must == string"),(0,o.assert)("object"===typeof n,"typeof params must == object"),e===gt)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==yt)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}bt(t)&&(n["ns"]=t.namespace);var i=[];return G(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.deepCopy)(this.counters_)},t}(),It={},Tt={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){var e=t.toString();return It[e]||(It[e]=new wt),It[e]}function St(t,e){var n=t.toString();return Tt[n]||(Tt[n]=e()),Tt[n]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&et((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;while(this.pendingResponses[this.currentResponseNum]){var o=r();if("break"===o)break}},t}(),kt="start",At="close",Nt="pLPCommand",Pt="pRTLPCB",Rt="id",xt="pw",Ot="ser",Dt="cb",Lt="seg",Mt="ts",Ft="d",jt="dframe",Ut=1870,qt=30,Vt=Ut-qt,Bt=25e3,Kt=3e4,Wt=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=x(t),this.stats_=Et(e),this.urlFn=function(t){return s.appCheckToken&&(t[vt]=s.appCheckToken),_t(e,yt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ct(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(Kt)),j((function(){if(!n.isClosed_){n.scriptTagHolder=new Ht((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=f(t,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===kt)n.id=o,n.password=a;else{if(i!==At)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=f(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={};t[kt]="t",t[Ot]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t[Dt]=n.scriptTagHolder.uniqueCallbackIdentifier),t[ut]=st,n.transportSessionId&&(t[ct]=n.transportSessionId),n.lastSessionId&&(t[pt]=n.lastSessionId),n.applicationId&&(t[dt]=n.applicationId),n.appCheckToken&&(t[vt]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&ft.test(location.hostname)&&(t[lt]=ht);var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(0,o.isNodeSdk)()&&(!!t.forceAllow_||!t.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!Q()&&!$())},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.base64Encode)(e),r=H(n,Vt),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={};n[jt]="t",n[Rt]=t,n[xt]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ht=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=S(),window[Nt+this.uniqueCallbackIdentifier]=e,window[Pt+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){var s=document.domain;a='<script>document.domain="'+s+'";<\/script>'}var u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(c){R("frame writing exception"),c.stack&&R(c.stack),R(c)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{var e=t.contentWindow.document;e||R("No IE domain setting required")}catch(r){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){this.myID=t,this.myPW=e,this.alive=!0;while(this.newRequest_());},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[Rt]=this.myID,t[xt]=this.myPW,t[Ot]=this.currentSerial;var e=this.urlFn(t),n="",r=0;while(this.pendingSegs.length>0){var i=this.pendingSegs[0];if(!(i.d.length+qt+n.length<=Ut))break;var o=this.pendingSegs.shift();n=n+"&"+Lt+r+"="+o.seg+"&"+Mt+r+"="+o.ts+"&"+Ft+r+"="+o.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(Bt)),o=function(){clearTimeout(i),r()};this.addTag(t,o)},t.prototype.addTag=function(t,e){var n=this;(0,o.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){R("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Gt=16384,zt=45e3,Qt=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!==typeof MozWebSocket?Qt=MozWebSocket:"undefined"!==typeof WebSocket&&(Qt=WebSocket);var $t=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=x(this.connId),this.stats_=Et(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={};return i[ut]=st,!(0,o.isNodeSdk)()&&"undefined"!==typeof location&&location.hostname&&ft.test(location.hostname)&&(i[lt]=ht),e&&(i[ct]=e),n&&(i[pt]=n),r&&(i[vt]=r),_t(t,gt,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,I.set("previous_websocket_failure",!0);try{if((0,o.isNodeSdk)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/"+st+"/"+y+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers["Authorization"]="Bearer "+this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",BASE_URL:"/"},s=0===this.connURL.indexOf("wss://")?a["HTTPS_PROXY"]||a["https_proxy"]:a["HTTP_PROXY"]||a["http_proxy"];s&&(i["proxy"]={origin:s}),this.mySock=new Qt(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Qt(this.connURL,[],i)}}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Qt&&!t.forceDisallow_},t.previouslyFailed=function(){return I.isInMemoryStorage||!0===I.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){I.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.jsonEval)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t["data"];if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=H(e,Gt);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(zt))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Yt=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Wt,$t]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=$t&&$t["isAvailable"](),o=i&&!$t.previouslyFailed();if(e.webSocketOnly&&(i||L("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[$t];else{var a=this.transports_=[];try{for(var s=h(t.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c["isAvailable"]()&&a.push(c)}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Xt=6e4,Jt=5e3,Zt=10240,te=102400,ee="t",ne="d",re="s",ie="r",oe="e",ae="o",se="a",ue="n",ce="p",le="h",he=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=x("c:"+this.id+":"),this.transportManager_=new Yt(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e["healthyTimeout"]||0;i>0&&(this.healthyTimeout_=rt((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>te?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>Zt?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if(ee in t){var e=t[ee];e===se?this.upgradeIfSecondaryHealthy_():e===ie?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===ae&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=K("t",t),n=K("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ce,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:se,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ue,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=K("t",t),n=K("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=K(ee,t);if(ne in t){var n=t[ne];if(e===le)this.onHandshake_(n);else if(e===ue){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===re?this.onConnectionShutdown_(n):e===ie?this.onReset_(n):e===oe?O("Server Error: "+n):e===ae?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),st!==n&&L("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),rt((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(Xt))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rt((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(Jt))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ce,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(I.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),fe=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),pe=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=p([],f(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.assert)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),de=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,o.isMobileCordova)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return s(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(pe),ve=32,ge=768,ye=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(){return new ye("")}function be(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function _e(t){return t.pieces_.length-t.pieceNum_}function we(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ye(t.pieces_,e)}function Ie(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Te(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ee(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Se(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ye(e,0)}function Ce(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ye)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ye(n,0)}function ke(t){return t.pieceNum_>=t.pieces_.length}function Ae(t,e){var n=be(t),r=be(e);if(null===n)return e;if(n===r)return Ae(we(t),we(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ne(t,e){for(var n=Ee(t,0),r=Ee(e,0),i=0;i<n.length&&i<r.length;i++){var o=V(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Pe(t,e){if(_e(t)!==_e(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Re(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(_e(t)>_e(e))return!1;while(n<t.pieces_.length){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var xe=function(){function t(t,e){this.errorPrefix_=e,this.parts_=Ee(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.stringLength)(this.parts_[n]);Le(this)}return t}();function Oe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.stringLength)(e),Le(t)}function De(t){var e=t.parts_.pop();t.byteLength_-=(0,o.stringLength)(e),t.parts_.length>0&&(t.byteLength_-=1)}function Le(t){if(t.byteLength_>ge)throw new Error(t.errorPrefix_+"has a key path longer than "+ge+" bytes ("+t.byteLength_+").");if(t.parts_.length>ve)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ve+") or object contains a cycle "+Me(t))}function Me(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,je,Ue=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(n="visibilitychange",e="hidden"):"undefined"!==typeof document["mozHidden"]?(n="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document["msHidden"]?(n="msvisibilitychange",e="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return s(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(pe),qe=1e3,Ve=3e5,Be=3e3,Ke=3e4,We=1.3,He=3e4,Ge="server_kill",ze=3,Qe=function(t){function e(n,r,i,a,s,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=x("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=qe,h.maxReconnectDelay_=Ve,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ue.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&de.getInstance().on("online",h.onOnline_,h),h}return s(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,o.stringify)(i)),(0,o.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.Deferred,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t["d"];"ok"===t["s"]?(e.onDataUpdate_(r["p"],i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[a];void 0!==t&&i===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),Be),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.assert)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i},s="q";t.tag&&(a["q"]=r._queryObject,a["t"]=t.tag),a["h"]=t.hashFn(),this.sendRequest(s,a,(function(a){var s=a["d"],u=a["s"];e.warnOnListenWarnings_(s,r);var c=n.listens.get(i)&&n.listens.get(i).get(o);c===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===typeof t&&(0,o.contains)(t,"w")){var n=(0,o.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();L("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e=t&&40===t.length;(e||(0,o.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ke)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r["noauth"]=!0:"object"===typeof this.authOverride_&&(r["authvar"]=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n["s"],i=n["d"]||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e["s"],r=e["d"]||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t},o="n";r&&(i["q"]=n,i["t"]=r),this.sendRequest(o,i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t["s"],t["d"])}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o["h"]=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r["s"],r["d"])}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){var n=t["s"];if("ok"!==n){var r=t["d"];e.log_("reportStats","Error sending stats: "+r)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.stringify)(t));var e=t["r"],n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t["b"]))}else{if("error"in t)throw"A server-side error has occurred: "+t["error"];"a"in t&&this.onDataPush_(t["a"],t["b"])}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e["p"],e["d"],!1,e["t"]):"m"===t?this.onDataUpdate_(e["p"],e["d"],!0,e["t"]):"c"===t?this.onListenRevoked_(e["p"],e["q"]):"ac"===t?this.onAuthRevoked_(e["s"],e["d"]):"apc"===t?this.onAppCheckRevoked_(e["s"],e["d"]):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+(0,o.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qe,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=qe,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>He&&(this.reconnectDelay_=qe),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*We)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return c(this,void 0,void 0,(function(){var t,n,r,i,a,s,u,c,h,p,d,v,g,y,m=this;return l(this,(function(l){switch(l.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())},h=function(t){(0,o.assert)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)},this.realtime_={close:c,sendRequest:h},p=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)])];case 2:return d=f.apply(void 0,[l.sent(),2]),v=d[0],g=d[1],s?R("getToken() completed but was canceled"):(R("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=g&&g.token,u=new he(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){L(t+" ("+m.repoInfo_.toString()+")"),m.interrupt(Ge)}),a)),[3,4];case 3:return y=l.sent(),this.log_("Failed to get token: "+y),s||(this.repoInfo_.nodeAdmin&&L(y),c()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){R("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){R("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=qe,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return W(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ye(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){R("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ze&&(this.reconnectDelay_=Ke,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){R("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ze&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t["msg"].replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=h(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,h(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(p){n={error:p}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);while(this.onDisconnectRequestQueue_.length){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+y.replace(/\./g,"-")]=1,(0,o.isMobileCordova)()?t["framework.cordova"]=1:(0,o.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=de.getInstance().currentlyOnline();return(0,o.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(fe),$e=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ye=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new $e(U,t),r=new $e(U,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return $e.MIN},t}(),Xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Fe},set:function(t){Fe=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return V(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return $e.MIN},e.prototype.maxPost=function(){return new $e(q,Fe)},e.prototype.makePost=function(t,e){return(0,o.assert)("string"===typeof t,"KeyIndex indexValue must always be a string."),new $e(t,Fe)},e.prototype.toString=function(){return".key"},e}(Ye),Je=new Xe,Ze=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];var o=1;while(!t.isEmpty())if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_){e=e.left;while(!e.isEmpty())this.nodeStack_.push(e),e=e.right}else{e=e.right;while(!e.isEmpty())this.nodeStack_.push(e),e=e.left}return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),tn=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:nn.EMPTY_NODE,this.right=null!=o?o:nn.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return nn.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},t.prototype.remove=function(t,e){var n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return nn.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),en=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new tn(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),nn=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,tn.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tn.BLACK,null,null))},t.prototype.get=function(t){var e,n=this.root_;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){var e,n=this.root_,r=null;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ze(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ze(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ze(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ze(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new en,t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function rn(t,e){return V(t.name,e.name)}function on(t,e){return V(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){je=t}var sn,un,cn,ln=function(t){return"number"===typeof t?"number:"+z(t):"string:"+t},hn=function(t){if(t.isLeafNode()){var e=t.val();(0,o.assert)("string"===typeof e||"number"===typeof e||"object"===typeof e&&(0,o.contains)(e,".sv"),"Priority must be a string or number.")}else(0,o.assert)(t===je||t.isEmpty(),"priority of unexpected type.");(0,o.assert)(t===je||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},fn=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),hn(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return sn},set:function(t){sn=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return ke(e)?this:".priority"===be(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=be(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.assert)(".priority"!==r||1===_e(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(we(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+ln(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?z(this.value_):this.value_,this.lazyHash_=C(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.assert)(i>=0,"Unknown leaf type: "+n),(0,o.assert)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();function pn(t){un=t}function dn(t){cn=t}var vn,gn,yn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?V(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return $e.MIN},e.prototype.maxPost=function(){return new $e(q,new fn("[PRIORITY-POST]",cn))},e.prototype.makePost=function(t,e){var n=un(t);return new $e(e,new fn("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ye),mn=new yn,bn=Math.log(2),_n=function(){function t(t){var e=function(t){return parseInt(Math.log(t)/bn,10)},n=function(t){return parseInt(Array(t+1).join("1"),2)};this.count=e(t+1),this.current_=this.count-1;var r=n(this.count);this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),wn=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new tn(a,o.node,tn.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new tn(a,o.node,tn.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new tn(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,tn.BLACK):(s(h,tn.BLACK),s(h,tn.RED))}return o},a=new _n(t.length),s=o(a);return new nn(r||e,s)},In={},Tn=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.assert)(In&&mn,"ChildrenNode.ts has not been loaded"),vn=vn||new t({".priority":In},{".priority":mn}),vn},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof nn?e:null},t.prototype.hasIndex=function(t){return(0,o.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.assert)(e!==Je,"KeyIndex always exists and isn't meant to be added to the IndexMap.");var r,i=[],a=!1,s=n.getIterator($e.Wrap),c=s.getNext();while(c)a=a||e.isDefinedOn(c.node),i.push(c),c=s.getNext();r=a?wn(i,e.getCompare()):In;var l=e.toString(),h=u({},this.indexSet_);h[l]=e;var f=u({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this,i=(0,o.map)(this.indexes_,(function(t,i){var a=(0,o.safeGet)(r.indexSet_,i);if((0,o.assert)(a,"Missing index implementation for "+i),t===In){if(a.isDefinedOn(e.node)){var s=[],u=n.getIterator($e.Wrap),c=u.getNext();while(c)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),wn(s,a.getCompare())}return In}var l=n.get(e.name),h=t;return l&&(h=h.remove(new $e(e.name,l))),h.insert(e,e.node)}));return new t(i,this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){var r=(0,o.map)(this.indexes_,(function(t){if(t===In)return t;var r=n.get(e.name);return r?t.remove(new $e(e.name,r)):t}));return new t(r,this.indexSet_)},t}(),En=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&hn(this.priorityNode_),this.children_.isEmpty()&&(0,o.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return gn||(gn=new t(new nn(on),null,Tn.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||gn},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?gn:e},t.prototype.getChild=function(t){var e=be(t);return null===e?this:this.getImmediateChild(e).getChild(we(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new $e(e,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?gn:this.priorityNode_;return new t(i,s,a)},t.prototype.updateChild=function(t,e){var n=be(t);if(null===n)return e;(0,o.assert)(".priority"!==be(t)||1===_e(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(we(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(mn,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+ln(this.getPriority().val())+":"),this.forEachChild(mn,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":C(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new $e(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new $e(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new $e(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));var r=this.children_.getIteratorFrom(t.name,$e.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)<0)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));var r=this.children_.getReverseIteratorFrom(t.name,$e.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)>0)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Cn?-1:0},t.prototype.withIndex=function(e){if(e===Je||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Je||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){var n=this.getIterator(mn),r=e.getIterator(mn),i=n.getNext(),o=r.getNext();while(i&&o){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Je?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Sn=function(t){function e(){return t.call(this,new nn(on),En.EMPTY_NODE,Tn.Default)||this}return s(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return En.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(En),Cn=new Sn;Object.defineProperties($e,{MIN:{value:new $e(U,En.EMPTY_NODE)},MAX:{value:new $e(q,Cn)}}),Xe.__EMPTY_NODE=En.EMPTY_NODE,fn.__childrenNodeConstructor=En,an(Cn),dn(Cn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kn=!0;function An(t,e){if(void 0===e&&(e=null),null===t)return En.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.assert)(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t){var n=t;return new fn(n,An(e))}if(t instanceof Array||!kn){var r=En.EMPTY_NODE;return G(t,(function(e,n){if((0,o.contains)(t,e)&&"."!==e.substring(0,1)){var i=An(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(e,i))}})),r.updatePriority(An(e))}var i=[],a=!1,s=t;if(G(s,(function(t,e){if("."!==t.substring(0,1)){var n=An(e);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new $e(t,n)))}})),0===i.length)return En.EMPTY_NODE;var u=wn(i,rn,(function(t){return t.name}),on);if(a){var c=wn(i,mn.getCompare());return new En(u,An(e),new Tn({".priority":c},{".priority":mn}))}return new En(u,An(e),Tn.Default)}pn(An);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Nn=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.assert)(!ke(e)&&".priority"!==be(e),"Can't create PathIndex with empty path or .priority key"),n}return s(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?V(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=An(t),r=En.EMPTY_NODE.updateChild(this.indexPath_,n);return new $e(e,r)},e.prototype.maxPost=function(){var t=En.EMPTY_NODE.updateChild(this.indexPath_,Cn);return new $e(q,t)},e.prototype.toString=function(){return Ee(this.indexPath_,0).join("/")},e}(Ye),Pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?V(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return $e.MIN},e.prototype.maxPost=function(){return $e.MAX},e.prototype.makePost=function(t,e){var n=An(t);return new $e(e,n)},e.prototype.toString=function(){return".value"},e}(Ye),Rn=new Pn,xn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",On="-",Dn="z",Ln=786,Mn=function(){var t=0,e=[];return function(n){var r,i=n===t;t=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=xn.charAt(n%64),n=Math.floor(n/64);(0,o.assert)(0===n,"Cannot push at time == 0");var s=a.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=xn.charAt(e[r]);return(0,o.assert)(20===s.length,"nextPushId: Length should be 20."),s}}(),Fn=function(t){if(t===""+Z)return On;var e=tt(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<Ln)return n.push(On),n.join("");var i=n.length-1;while(i>=0&&n[i]===Dn)i--;if(-1===i)return q;var o=n[i],a=xn.charAt(xn.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},jn=function(t){if(t===""+J)return U;var e=tt(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return n[n.length-1]===On?1===n.length?""+Z:(delete n[n.length-1],n.join("")):(n[n.length-1]=xn.charAt(xn.indexOf(n[n.length-1])-1),n.join("")+Dn.repeat(Ln-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Un(t){return{type:"value",snapshotNode:t}}function qn(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Vn(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Bn(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Kn(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,a){(0,o.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(Vn(e,s)):(0,o.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(qn(e,n)):a.trackChildChange(Bn(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(mn,(function(t,r){e.hasChild(t)||n.trackChildChange(Vn(t,r))})),e.isLeafNode()||e.forEachChild(mn,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Bn(e,r,i))}else n.trackChildChange(qn(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?En.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Hn=function(){function t(e){this.indexedFilter_=new Wn(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new $e(e,n))||(n=En.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=En.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(En.EMPTY_NODE);var i=this;return e.forEachChild(mn,(function(t,e){i.matches(new $e(t,e))||(r=r.updateImmediateChild(t,En.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Gn=function(){function t(t){this.rangedFilter_=new Hn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new $e(e,n))||(n=En.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=En.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=En.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);var o=0;while(i.hasNext()&&o<this.limit_){var a=i.getNext(),s=void 0;if(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!s)break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=e.withIndex(this.index_),r=r.updatePriority(En.EMPTY_NODE);var u=void 0,c=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;var f=!1;while(i.hasNext()){a=i.getNext();!f&&l(u,a)<=0&&(f=!0);s=f&&o<this.limit_&&l(a,c)<=0;s?o++:r=r.updateImmediateChild(a.name,En.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;(0,o.assert)(u.numChildren()===this.limit_,"");var c=new $e(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);while(null!=p&&(p.name===e||u.hasChild(p.name)))p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:a(p,c),v=h&&!n.isEmpty()&&d>=0;if(v)return null!=i&&i.trackChildChange(Bn(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Vn(e,f));var g=u.updateImmediateChild(e,En.EMPTY_NODE),y=null!=p&&this.rangedFilter_.matches(p);return y?(null!=i&&i.trackChildChange(qn(p.name,p.node)),g.updateImmediateChild(p.name,p.node)):g}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(Vn(l.name,l.node)),i.trackChildChange(qn(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,En.EMPTY_NODE)):t},t}(),zn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mn}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:U},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:q},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===mn},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t){return t.loadsAllData()?new Wn(t.getIndex()):t.hasLimit()?new Gn(t):new Hn(t)}function $n(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Yn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Xn(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Jn(t,e,n){var r;if(t.index_===Je)"string"===typeof e&&(e=Fn(e)),r=Xn(t,e,n);else{var i=void 0;i=null==n?q:Fn(n),r=Xn(t,e,i)}return r.startAfterSet_=!0,r}function Zn(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function tr(t,e,n){var r,i;return t.index_===Je?("string"===typeof e&&(e=jn(e)),i=Zn(t,e,n)):(r=null==n?U:jn(n),i=Zn(t,e,r)),i.endBeforeSet_=!0,i}function er(t,e){var n=t.copy();return n.index_=e,n}function nr(t){var e,n={};return t.isDefault()||(t.index_===mn?e="$priority":t.index_===Rn?e="$value":t.index_===Je?e="$key":((0,o.assert)(t.index_ instanceof Nn,"Unrecognized index type!"),e=t.index_.toString()),n["orderBy"]=(0,o.stringify)(e),t.startSet_&&(n["startAt"]=(0,o.stringify)(t.indexStartValue_),t.startNameSet_&&(n["startAt"]+=","+(0,o.stringify)(t.indexStartName_))),t.endSet_&&(n["endAt"]=(0,o.stringify)(t.indexEndValue_),t.endNameSet_&&(n["endAt"]+=","+(0,o.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n["limitToFirst"]=t.limit_:n["limitToLast"]=t.limit_)),n}function rr(t){var e={};if(t.startSet_&&(e["sp"]=t.indexStartValue_,t.startNameSet_&&(e["sn"]=t.indexStartName_)),t.endSet_&&(e["ep"]=t.indexEndValue_,t.endNameSet_&&(e["en"]=t.indexEndName_)),t.limitSet_){e["l"]=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e["vf"]=n}return t.index_!==mn&&(e["i"]=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=x("p:rest:"),o.listens_={},o}return s(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var a=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=nr(t._queryParams);this.restRequest_(s+".json",l,(function(t,e){var n,l=e;(404===t&&(l=null,t=null),null===t&&a.onDataUpdate_(s,l,!1,r),(0,o.safeGet)(a.listens_,u)===c)&&(n=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(n,null))}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=nr(t._queryParams),r=t._path.toString(),i=new o.Deferred;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e["format"]="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=f(i,2),s=a[0],u=a[1];s&&s.accessToken&&(e["auth"]=s.accessToken),u&&u.token&&(e["ac"]=u.token);var c=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.querystring)(e);r.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var t=null;if(l.status>=200&&l.status<300){try{t=(0,o.jsonEval)(l.responseText)}catch(e){L("Failed to parse JSON response for "+c+": "+l.responseText)}n(null,t)}else 401!==l.status&&404!==l.status&&L("Got unsuccessful REST response for "+c+" Status: "+l.status),n(l.status);n=null}},l.open("GET",c,!0),l.send()}))},e}(fe),or=function(){function t(){this.rootNode_=En.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ar(){return{value:null,children:new Map}}function sr(t,e,n){if(ke(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=be(e);t.children.has(r)||t.children.set(r,ar());var i=t.children.get(r);e=we(e),sr(i,e,n)}}function ur(t,e){if(ke(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(mn,(function(e,n){sr(t,new ye(e),n)})),ur(t,e)}if(t.children.size>0){var r=be(e);if(e=we(e),t.children.has(r)){var i=ur(t.children.get(r),e);i&&t.children.delete(r)}return 0===t.children.size}return!0}function cr(t,e,n){null!==t.value?n(e,t.value):lr(t,(function(t,r){var i=new ye(e.toString()+"/"+t);cr(r,i,n)}))}function lr(t,e){t.children.forEach((function(t,n){e(n,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr,fr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=u({},t);return this.last_&&G(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),pr=1e4,dr=3e4,vr=3e5,gr=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new fr(t);var n=pr+(dr-pr)*Math.random();rt(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;G(e,(function(e,i){i>0&&(0,o.contains)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),rt(this.reportStats_.bind(this),Math.floor(2*Math.random()*vr))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,e){t.statsToReport_[e]=!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function br(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _r(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["OVERWRITE"]=0]="OVERWRITE",t[t["MERGE"]=1]="MERGE",t[t["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",t[t["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(hr||(hr={}));var wr,Ir=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=hr.ACK_USER_WRITE,this.source=mr()}return t.prototype.operationForChild=function(e){if(ke(this.path)){if(null!=this.affectedTree.value)return(0,o.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ye(e));return new t(me(),n,this.revert)}return(0,o.assert)(be(this.path)===e,"operationForChild called for unrelated child."),new t(we(this.path),this.affectedTree,this.revert)},t}(),Tr=function(){function t(t,e){this.source=t,this.path=e,this.type=hr.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return ke(this.path)?new t(this.source,me()):new t(this.source,we(this.path))},t}(),Er=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=hr.OVERWRITE}return t.prototype.operationForChild=function(e){return ke(this.path)?new t(this.source,me(),this.snap.getImmediateChild(e)):new t(this.source,we(this.path),this.snap)},t}(),Sr=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=hr.MERGE}return t.prototype.operationForChild=function(e){if(ke(this.path)){var n=this.children.subtree(new ye(e));return n.isEmpty()?null:n.value?new Er(this.source,me(),n.value):new t(this.source,me(),n)}return(0,o.assert)(be(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,we(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Cr=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(ke(t))return this.isFullyInitialized()&&!this.filtered_;var e=be(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),kr=function(){function t(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(Kn(e.childName,e.snapshotNode))})),Nr(t,i,"child_removed",e,r,n),Nr(t,i,"child_added",e,r,n),Nr(t,i,"child_moved",o,r,n),Nr(t,i,"child_changed",e,r,n),Nr(t,i,"value",e,r,n),i}function Nr(t,e,n,r,i,o){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return Rr(t,e,n)})),a.forEach((function(n){var r=Pr(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Pr(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Rr(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.assertionError)("Should only compare child_ events.");var r=new $e(e.childName,e.snapshotNode),i=new $e(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,e){return{eventCache:t,serverCache:e}}function Or(t,e,n,r){return xr(new Cr(e,n,r),t.serverCache)}function Dr(t,e,n,r){return xr(t.eventCache,new Cr(e,n,r))}function Lr(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Mr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr=function(){return wr||(wr=new nn(B)),wr},jr=function(){function t(t,e){void 0===e&&(e=Fr()),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return G(e,(function(t,e){n=n.set(new ye(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:me(),value:this.value};if(ke(t))return null;var n=be(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(we(t),e);if(null!=i){var o=Ce(new ye(n),i.path);return{path:o,value:i.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(ke(e))return this;var n=be(e),r=this.children.get(n);return null!==r?r.subtree(we(e)):new t(null)},t.prototype.set=function(e,n){if(ke(e))return new t(n,this.children);var r=be(e),i=this.children.get(r)||new t(null),o=i.set(we(e),n),a=this.children.insert(r,o);return new t(this.value,a)},t.prototype.remove=function(e){if(ke(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=be(e),r=this.children.get(n);if(r){var i=r.remove(we(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(ke(t))return this.value;var e=be(t),n=this.children.get(e);return n?n.get(we(t)):null},t.prototype.setTree=function(e,n){if(ke(e))return n;var r=be(e),i=this.children.get(r)||new t(null),o=i.setTree(we(e),n),a=void 0;return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,a)},t.prototype.fold=function(t){return this.fold_(me(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Ce(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,me(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(ke(t))return null;var i=be(t),o=this.children.get(i);return o?o.findOnPath_(we(t),Ce(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,me(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(ke(e))return this;this.value&&r(n,this.value);var i=be(e),o=this.children.get(i);return o?o.foreachOnPath_(we(e),Ce(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(me(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(Ce(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Ur=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new jr(null))},t}();function qr(t,e,n){if(ke(e))return new Ur(new jr(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=Ae(i,e);return o=o.updateChild(a,n),new Ur(t.writeTree_.set(i,o))}var s=new jr(n),u=t.writeTree_.setTree(e,s);return new Ur(u)}function Vr(t,e,n){var r=t;return G(n,(function(t,n){r=qr(r,Ce(e,t),n)})),r}function Br(t,e){if(ke(e))return Ur.empty();var n=t.writeTree_.setTree(e,new jr(null));return new Ur(n)}function Kr(t,e){return null!=Wr(t,e)}function Wr(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Ae(n.path,e)):null}function Hr(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(mn,(function(t,n){e.push(new $e(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new $e(t,n.value))})),e}function Gr(t,e){if(ke(e))return t;var n=Wr(t,e);return new Ur(null!=n?new jr(n):t.writeTree_.subtree(e))}function zr(t){return t.writeTree_.isEmpty()}function Qr(t,e){return $r(me(),t.writeTree_,e)}function $r(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?((0,o.assert)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=$r(Ce(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(Ce(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,e){return bi(e,t)}function Xr(t,e,n,r,i){(0,o.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=qr(t.visibleWrites,e,n)),t.lastWriteId=r}function Jr(t,e,n,r){(0,o.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Vr(t.visibleWrites,e,n),t.lastWriteId=r}function Zr(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}function ti(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));(0,o.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);var i=r.visible,a=!1,s=t.allWrites.length-1;while(i&&s>=0){var u=t.allWrites[s];u.visible&&(s>=n&&ei(u,r.path)?i=!1:Re(r.path,u.path)&&(a=!0)),s--}if(i){if(a)return ni(t),!0;if(r.snap)t.visibleWrites=Br(t.visibleWrites,r.path);else{var c=r.children;G(c,(function(e){t.visibleWrites=Br(t.visibleWrites,Ce(r.path,e))}))}return!0}return!1}function ei(t,e){if(t.snap)return Re(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Re(Ce(t.path,n),e))return!0;return!1}function ni(t){t.visibleWrites=ii(t.allWrites,ri,me()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ri(t){return t.visible}function ii(t,e,n){for(var r=Ur.empty(),i=0;i<t.length;++i){var a=t[i];if(e(a)){var s=a.path,u=void 0;if(a.snap)Re(n,s)?(u=Ae(n,s),r=qr(r,u,a.snap)):Re(s,n)&&(u=Ae(s,n),r=qr(r,me(),a.snap.getChild(u)));else{if(!a.children)throw(0,o.assertionError)("WriteRecord should have .snap or .children");if(Re(n,s))u=Ae(n,s),r=Vr(r,u,a.children);else if(Re(s,n))if(u=Ae(s,n),ke(u))r=Vr(r,me(),a.children);else{var c=(0,o.safeGet)(a.children,be(u));if(c){var l=c.getChild(we(u));r=qr(r,me(),l)}}}}}return r}function oi(t,e,n,r,i){if(r||i){var o=Gr(t.visibleWrites,e);if(!i&&zr(o))return n;if(i||null!=n||Kr(o,me())){var a=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Re(t.path,e)||Re(e,t.path))},s=ii(t.allWrites,a,e);l=n||En.EMPTY_NODE;return Qr(s,l)}return null}var u=Wr(t.visibleWrites,e);if(null!=u)return u;var c=Gr(t.visibleWrites,e);if(zr(c))return n;if(null!=n||Kr(c,me())){var l=n||En.EMPTY_NODE;return Qr(c,l)}return null}function ai(t,e,n){var r=En.EMPTY_NODE,i=Wr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(mn,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Gr(t.visibleWrites,e);return n.forEachChild(mn,(function(t,e){var n=Qr(Gr(o,new ye(t)),e);r=r.updateImmediateChild(t,n)})),Hr(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}var a=Gr(t.visibleWrites,e);return Hr(a).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}function si(t,e,n,r,i){(0,o.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Ce(e,n);if(Kr(t.visibleWrites,a))return null;var s=Gr(t.visibleWrites,a);return zr(s)?i.getChild(n):Qr(s,i.getChild(n))}function ui(t,e,n,r){var i=Ce(e,n),o=Wr(t.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n)){var a=Gr(t.visibleWrites,i);return Qr(a,r.getNode().getImmediateChild(n))}return null}function ci(t,e){return Wr(t.visibleWrites,e)}function li(t,e,n,r,i,o,a){var s,u=Gr(t.visibleWrites,e),c=Wr(u,me());if(null!=c)s=c;else{if(null==n)return[];s=Qr(u,n)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),p=f.getNext();while(p&&l.length<i)0!==h(p,r)&&l.push(p),p=f.getNext();return l}function hi(){return{visibleWrites:Ur.empty(),allWrites:[],lastWriteId:-1}}function fi(t,e,n,r){return oi(t.writeTree,t.treePath,e,n,r)}function pi(t,e){return ai(t.writeTree,t.treePath,e)}function di(t,e,n,r){return si(t.writeTree,t.treePath,e,n,r)}function vi(t,e){return ci(t.writeTree,Ce(t.treePath,e))}function gi(t,e,n,r,i,o){return li(t.writeTree,t.treePath,e,n,r,i,o)}function yi(t,e,n){return ui(t.writeTree,t.treePath,e,n)}function mi(t,e){return bi(Ce(t.treePath,e),t.writeTree)}function bi(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _i=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Bn(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Vn(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,qn(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Bn(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),wi=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}(),Ii=new wi,Ti=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Cr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yi(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Mr(this.viewCache_),i=gi(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ei(t){return{filter:t}}function Si(t,e){(0,o.assert)(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),(0,o.assert)(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Ci(t,e,n,r,i){var a,s,u=new _i;if(n.type===hr.OVERWRITE){var c=n;c.source.fromUser?a=Pi(t,e,c.path,c.snap,r,i,u):((0,o.assert)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered()&&!ke(c.path),a=Ni(t,e,c.path,c.snap,r,i,s,u))}else if(n.type===hr.MERGE){var l=n;l.source.fromUser?a=xi(t,e,l.path,l.children,r,i,u):((0,o.assert)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),a=Di(t,e,l.path,l.children,r,i,s,u))}else if(n.type===hr.ACK_USER_WRITE){var h=n;a=h.revert?Fi(t,e,h.path,r,i,u):Li(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==hr.LISTEN_COMPLETE)throw(0,o.assertionError)("Unknown operation type: "+n.type);a=Mi(t,e,n.path,r,u)}var f=u.getChanges();return ki(e,a,f),{viewCache:a,changes:f}}function ki(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Lr(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Un(Lr(e)))}}function Ai(t,e,n,r,i,a){var s=e.eventCache;if(null!=vi(r,n))return e;var u=void 0,c=void 0;if(ke(n))if((0,o.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Mr(e),h=l instanceof En?l:En.EMPTY_NODE,f=pi(r,h);u=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{var p=fi(r,Mr(e));u=t.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{var d=be(n);if(".priority"===d){(0,o.assert)(1===_e(n),"Can't have a priority with additional path components");var v=s.getNode();c=e.serverCache.getNode();var g=di(r,n,v,c);u=null!=g?t.filter.updatePriority(v,g):s.getNode()}else{var y=we(n),m=void 0;if(s.isCompleteForChild(d)){c=e.serverCache.getNode();var b=di(r,n,s.getNode(),c);m=null!=b?s.getNode().getImmediateChild(d).updateChild(y,b):s.getNode().getImmediateChild(d)}else m=yi(r,d,e.serverCache);u=null!=m?t.filter.updateChild(s.getNode(),d,m,y,i,a):s.getNode()}}return Or(e,u,s.isFullyInitialized()||ke(n),t.filter.filtersNodes())}function Ni(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(ke(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=be(n);if(!c.isCompleteForPath(n)&&_e(n)>1)return e;var p=we(n),d=c.getNode().getImmediateChild(f),v=d.updateChild(p,r);u=".priority"===f?l.updatePriority(c.getNode(),v):l.updateChild(c.getNode(),f,v,p,Ii,null)}var g=Dr(e,u,c.isFullyInitialized()||ke(n),l.filtersNodes()),y=new Ti(i,g,o);return Ai(t,g,n,i,y,s)}function Pi(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new Ti(i,e,o);if(ke(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=Or(e,u,!0,t.filter.filtersNodes());else{var h=be(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=Or(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=we(n),p=c.getNode().getImmediateChild(h),d=void 0;if(ke(f))d=r;else{var v=l.getCompleteChild(h);d=null!=v?".priority"===Ie(f)&&v.getChild(Se(f)).isEmpty()?v:v.updateChild(f,r):En.EMPTY_NODE}if(p.equals(d))s=e;else{var g=t.filter.updateChild(c.getNode(),h,d,f,l,a);s=Or(e,g,c.isFullyInitialized(),t.filter.filtersNodes())}}}return s}function Ri(t,e){return t.eventCache.isCompleteForChild(e)}function xi(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=Ce(n,r);Ri(e,be(c))&&(s=Pi(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=Ce(n,r);Ri(e,be(c))||(s=Pi(t,s,c,u,i,o,a))})),s}function Oi(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Di(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=ke(n)?r:new jr(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=e.serverCache.getNode().getImmediateChild(n),h=Oi(t,u,r);c=Ni(t,c,new ye(n),h,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=e.serverCache.getNode().getImmediateChild(n),f=Oi(t,h,r);c=Ni(t,c,new ye(n),f,i,o,a,s)}})),c}function Li(t,e,n,r,i,o,a){if(null!=vi(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(ke(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ni(t,e,n,u.getNode().getChild(n),i,o,s,a);if(ke(n)){var c=new jr(null);return u.getNode().forEachChild(Je,(function(t,e){c=c.set(new ye(t),e)})),Di(t,e,n,c,i,o,s,a)}return e}var l=new jr(null);return r.foreach((function(t,e){var r=Ce(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),Di(t,e,n,l,i,o,s,a)}function Mi(t,e,n,r,i){var o=e.serverCache,a=Dr(e,o.getNode(),o.isFullyInitialized()||ke(n),o.isFiltered());return Ai(t,a,n,r,Ii,i)}function Fi(t,e,n,r,i,a){var s;if(null!=vi(r,n))return e;var u=new Ti(r,e,i),c=e.eventCache.getNode(),l=void 0;if(ke(n)||".priority"===be(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=fi(r,Mr(e));else{var f=e.serverCache.getNode();(0,o.assert)(f instanceof En,"serverChildren would be complete if leaf node"),h=pi(r,f)}l=t.filter.updateFullNode(c,h,a)}else{var p=be(n),d=yi(r,p,e.serverCache);null==d&&e.serverCache.isCompleteForChild(p)&&(d=c.getImmediateChild(p)),l=null!=d?t.filter.updateChild(c,p,d,we(n),u,a):e.eventCache.getNode().hasChild(p)?t.filter.updateChild(c,p,En.EMPTY_NODE,we(n),u,a):c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=fi(r,Mr(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,a)))}return s=e.serverCache.isFullyInitialized()||null!=vi(r,me()),Or(e,l,s,t.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ji,Ui=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new Wn(n.getIndex()),i=Qn(n);this.processor_=Ei(i);var o=e.serverCache,a=e.eventCache,s=r.updateFullNode(En.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(En.EMPTY_NODE,a.getNode(),null),c=new Cr(s,o.isFullyInitialized(),r.filtersNodes()),l=new Cr(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=xr(l,c),this.eventGenerator_=new kr(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function qi(t){return t.viewCache_.serverCache.getNode()}function Vi(t){return Lr(t.viewCache_)}function Bi(t,e){var n=Mr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ke(e)&&!n.getImmediateChild(be(e)).isEmpty())?n.getChild(e):null}function Ki(t){return 0===t.eventRegistrations_.length}function Wi(t,e){t.eventRegistrations_.push(e)}function Hi(t,e,n){var r=[];if(n){(0,o.assert)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var a=[],s=0;s<t.eventRegistrations_.length;++s){var u=t.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(s+1));break}}else a.push(u)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function Gi(t,e,n,r){e.type===hr.MERGE&&null!==e.source.queryId&&((0,o.assert)(Mr(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.assert)(Lr(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_,a=Ci(t.processor_,i,e,n,r);return Si(t.processor_,a.viewCache),(0,o.assert)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,Qi(t,a.changes,a.viewCache.eventCache.getNode(),null)}function zi(t,e){var n=t.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(mn,(function(t,e){r.push(qn(t,e))}))}return n.isFullyInitialized()&&r.push(Un(n.getNode())),Qi(t,r,n.getNode(),e)}function Qi(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return Ar(t.eventGenerator_,e,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $i,Yi=function(){function t(){this.views=new Map}return t}();function Xi(t){(0,o.assert)(!ji,"__referenceConstructor has already been defined"),ji=t}function Ji(){return(0,o.assert)(ji,"Reference.ts has not been loaded"),ji}function Zi(t){return 0===t.views.size}function to(t,e,n,r){var i,a,s=e.source.queryId;if(null!==s){var u=t.views.get(s);return(0,o.assert)(null!=u,"SyncTree gave us an op for an invalid query."),Gi(u,e,n,r)}var c=[];try{for(var l=h(t.views.values()),f=l.next();!f.done;f=l.next()){u=f.value;c=c.concat(Gi(u,e,n,r))}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return c}function eo(t,e,n,r,i){var o=e._queryIdentifier,a=t.views.get(o);if(!a){var s=fi(n,i?r:null),u=!1;s?u=!0:r instanceof En?(s=pi(n,r),u=!1):(s=En.EMPTY_NODE,u=!1);var c=xr(new Cr(s,u,!1),new Cr(r,i,!1));return new Ui(e,c)}return a}function no(t,e,n,r,i,o){var a=eo(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),Wi(a,n),zi(a,n)}function ro(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],c=uo(t);if("default"===a)try{for(var l=h(t.views.entries()),p=l.next();!p.done;p=l.next()){var d=f(p.value,2),v=d[0],g=d[1];u=u.concat(Hi(g,n,r)),Ki(g)&&(t.views.delete(v),g.query._queryParams.loadsAllData()||s.push(g.query))}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else{g=t.views.get(a);g&&(u=u.concat(Hi(g,n,r)),Ki(g)&&(t.views.delete(a),g.query._queryParams.loadsAllData()||s.push(g.query)))}return c&&!uo(t)&&s.push(new(Ji())(e._repo,e._path)),{removed:s,events:u}}function io(t){var e,n,r=[];try{for(var i=h(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function oo(t,e){var n,r,i=null;try{for(var o=h(t.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||Bi(s,e)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function ao(t,e){var n=e._queryParams;if(n.loadsAllData())return co(t);var r=e._queryIdentifier;return t.views.get(r)}function so(t,e){return null!=ao(t,e)}function uo(t){return null!=co(t)}function co(t){var e,n;try{for(var r=h(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){(0,o.assert)(!$i,"__referenceConstructor has already been defined"),$i=t}function ho(){return(0,o.assert)($i,"Reference.ts has not been loaded"),$i}var fo=1,po=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new jr(null),this.pendingWriteTree_=hi(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t}();function vo(t,e,n,r,i){return Xr(t.pendingWriteTree_,e,n,r,i),i?Ao(t,new Er(mr(),e,n)):[]}function go(t,e,n,r){Jr(t.pendingWriteTree_,e,n,r);var i=jr.fromObject(n);return Ao(t,new Sr(mr(),e,i))}function yo(t,e,n){void 0===n&&(n=!1);var r=Zr(t.pendingWriteTree_,e),i=ti(t.pendingWriteTree_,e);if(i){var o=new jr(null);return null!=r.snap?o=o.set(me(),!0):G(r.children,(function(t){o=o.set(new ye(t),!0)})),Ao(t,new Ir(r.path,o,n))}return[]}function mo(t,e,n){return Ao(t,new Er(br(),e,n))}function bo(t,e,n){var r=jr.fromObject(n);return Ao(t,new Sr(br(),e,r))}function _o(t,e){return Ao(t,new Tr(br(),e))}function wo(t,e,n){var r=Do(t,n);if(r){var i=Lo(r),o=i.path,a=i.queryId,s=Ae(o,e),u=new Tr(_r(a),s);return Mo(t,o,u)}return[]}function Io(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||so(o,e))){var s=ro(o,e,n,r);Zi(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),l=t.syncPointTree_.findOnPath(i,(function(t,e){return uo(e)}));if(c&&!l){var h=t.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=Fo(h),p=0;p<f.length;++p){var d=f[p],v=d.query,g=Ro(t,d);t.listenProvider_.startListening(jo(v),xo(t,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){var y=null;t.listenProvider_.stopListening(jo(e),y)}else u.forEach((function(e){var n=t.queryToTagMap.get(Oo(e));t.listenProvider_.stopListening(jo(e),n)}));Uo(t,u)}return a}function To(t,e,n,r){var i=Do(t,r);if(null!=i){var o=Lo(i),a=o.path,s=o.queryId,u=Ae(a,e),c=new Er(_r(s),u,n);return Mo(t,a,c)}return[]}function Eo(t,e,n,r){var i=Do(t,r);if(i){var o=Lo(i),a=o.path,s=o.queryId,u=Ae(a,e),c=jr.fromObject(n),l=new Sr(_r(s),u,c);return Mo(t,a,l)}return[]}function So(t,e,n){var r=e._path,i=null,a=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Ae(t,r);i=i||oo(e,n),a=a||uo(e)}));var s,u=t.syncPointTree_.get(r);if(u?(a=a||uo(u),i=i||oo(u,me())):(u=new Yi,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i)s=!0;else{s=!1,i=En.EMPTY_NODE;var c=t.syncPointTree_.subtree(r);c.foreachChild((function(t,e){var n=oo(e,me());n&&(i=i.updateImmediateChild(t,n))}))}var l=so(u,e);if(!l&&!e._queryParams.loadsAllData()){var h=Oo(e);(0,o.assert)(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=qo();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}var p=Yr(t.pendingWriteTree_,r),d=no(u,e,n,p,i,s);if(!l&&!a){var v=ao(u,e);d=d.concat(Vo(t,e,v))}return d}function Co(t,e,n){var r=!0,i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(function(t,n){var r=Ae(t,e),i=oo(n,r);if(i)return i}));return oi(i,e,o,n,r)}function ko(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=Ae(t,n);r=r||oo(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||oo(i,me()):(i=new Yi,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Cr(r,!0,!1):null,s=Yr(t.pendingWriteTree_,e._path),u=eo(i,e,s,o?a.getNode():En.EMPTY_NODE,o);return Vi(u)}function Ao(t,e){return No(e,t.syncPointTree_,null,Yr(t.pendingWriteTree_,me()))}function No(t,e,n,r){if(ke(t.path))return Po(t,e,n,r);var i=e.get(me());null==n&&null!=i&&(n=oo(i,me()));var o=[],a=be(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=mi(r,a);o=o.concat(No(s,u,c,l))}return i&&(o=o.concat(to(i,t,r,n))),o}function Po(t,e,n,r){var i=e.get(me());null==n&&null!=i&&(n=oo(i,me()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=mi(r,e),u=t.operationForChild(e);u&&(o=o.concat(Po(u,i,a,s)))})),i&&(o=o.concat(to(i,t,r,n))),o}function Ro(t,e){var n=e.query,r=xo(t,n);return{hashFn:function(){var t=qi(e)||En.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return r?wo(t,n._path,r):_o(t,n._path);var i=Y(e,n);return Io(t,n,null,i)}}}function xo(t,e){var n=Oo(e);return t.queryToTagMap.get(n)}function Oo(t){return t._path.toString()+"$"+t._queryIdentifier}function Do(t,e){return t.tagToQueryMap.get(e)}function Lo(t){var e=t.indexOf("$");return(0,o.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ye(t.substr(0,e))}}function Mo(t,e,n){var r=t.syncPointTree_.get(e);(0,o.assert)(r,"Missing sync point for query tag that we're tracking");var i=Yr(t.pendingWriteTree_,e);return to(r,n,i,null)}function Fo(t){return t.fold((function(t,e,n){if(e&&uo(e)){var r=co(e);return[r]}var i=[];return e&&(i=io(e)),G(n,(function(t,e){i=i.concat(e)})),i}))}function jo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ho())(t._repo,t._path):t}function Uo(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=Oo(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function qo(){return fo++}function Vo(t,e,n){var r=e._path,i=xo(t,e),a=Ro(t,n),s=t.listenProvider_.startListening(jo(e),i,a.hashFn,a.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.assert)(!uo(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!ke(t)&&e&&uo(e))return[co(e).query];var r=[];return e&&(r=r.concat(io(e).map((function(t){return t.query})))),G(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(jo(h),xo(t,h))}return s}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bo=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){var n=this.node_.getImmediateChild(e);return new t(n)},t.prototype.node=function(){return this.node_},t}(),Ko=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=Ce(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Co(this.syncTree_,this.path_)},t}(),Wo=function(t){return t=t||{},t["timestamp"]=t["timestamp"]||(new Date).getTime(),t},Ho=function(t,e,n){return t&&"object"===typeof t?((0,o.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?Go(t[".sv"],e,n):"object"===typeof t[".sv"]?zo(t[".sv"],e):void(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Go=function(t,e,n){switch(t){case"timestamp":return n["timestamp"];default:(0,o.assert)(!1,"Unexpected server value: "+t)}},zo=function(t,e,n){t.hasOwnProperty("increment")||(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t["increment"];"number"!==typeof r&&(0,o.assert)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.assert)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i,s=a.getValue();return"number"!==typeof s?r:s+r},Qo=function(t,e,n,r){return Yo(e,new Ko(n,t),r)},$o=function(t,e,n){return Yo(t,new Bo(e),n)};function Yo(t,e,n){var r,i=t.getPriority().val(),o=Ho(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=Ho(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new fn(s,An(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new fn(o))),u.forEachChild(mn,(function(t,i){var o=Yo(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xo=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}return t}();function Jo(t,e){var n=e instanceof ye?e:new ye(e),r=t,i=be(n);while(null!==i){var a=(0,o.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new Xo(i,r,a),n=we(n),i=be(n)}return r}function Zo(t){return t.node.value}function ta(t,e){t.node.value=e,sa(t)}function ea(t){return t.node.childCount>0}function na(t){return void 0===Zo(t)&&!ea(t)}function ra(t,e){G(t.node.children,(function(n,r){e(new Xo(n,t,r))}))}function ia(t,e,n,r){n&&!r&&e(t),ra(t,(function(t){ia(t,e,!0,r)})),n&&r&&e(t)}function oa(t,e,n){var r=n?t:t.parent;while(null!==r){if(e(r))return!0;r=r.parent}return!1}function aa(t){return new ye(null===t.parent?t.name:aa(t.parent)+"/"+t.name)}function sa(t){null!==t.parent&&ua(t.parent,t.name,t)}function ua(t,e,n){var r=na(n),i=(0,o.contains)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,sa(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,sa(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ca=/[\[\].#$\/\u0000-\u001F\u007F]/,la=/[\[\].#$\u0000-\u001F\u007F]/,ha=10485760,fa=function(t){return"string"===typeof t&&0!==t.length&&!ca.test(t)},pa=function(t){return"string"===typeof t&&0!==t.length&&!la.test(t)},da=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),pa(t)},va=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!F(t)||t&&"object"===typeof t&&(0,o.contains)(t,".sv")},ga=function(t,e,n,r){r&&void 0===e||ya((0,o.errorPrefix)(t,"value"),e,n)},ya=function(t,e,n){var r=n instanceof ye?new xe(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Me(r));if("function"===typeof e)throw new Error(t+"contains a function "+Me(r)+" with contents = "+e.toString());if(F(e))throw new Error(t+"contains "+e.toString()+" "+Me(r));if("string"===typeof e&&e.length>ha/3&&(0,o.stringLength)(e)>ha)throw new Error(t+"contains a string greater than "+ha+" utf8 bytes "+Me(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"===typeof e){var i=!1,a=!1;if(G(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(a=!0,!fa(e)))throw new Error(t+" contains an invalid key ("+e+") "+Me(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');Oe(r,e),ya(t,n,r),De(r)})),i&&a)throw new Error(t+' contains ".value" child '+Me(r)+" in addition to actual children.")}},ma=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=Ee(r),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!fa(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Ne);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&Re(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},ba=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.errorPrefix)(t,"values");if(!e||"object"!==typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var a=[];G(e,(function(t,e){var r=new ye(t);if(ya(i,e,Ce(n,r)),".priority"===Ie(r)&&!va(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),ma(i,a)}},_a=function(t,e,n){if(!n||void 0!==e){if(F(e))throw new Error((0,o.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!va(e))throw new Error((0,o.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},wa=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ia=function(t,e,n,r){if((!r||void 0!==n)&&!fa(n))throw new Error((0,o.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ta=function(t,e,n,r){if((!r||void 0!==n)&&!pa(n))throw new Error((0,o.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ea=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ta(t,e,n,r)},Sa=function(t,e){if(".info"===be(e))throw new Error(t+" failed = Can't modify data under /.info/")},Ca=function(t,e){var n=e.path.toString();if("string"!==typeof e.repoInfo.host||0===e.repoInfo.host.length||!fa(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!da(n))throw new Error((0,o.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ka=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error((0,o.errorPrefix)(t,e)+"must be a boolean.")},Aa=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t}();function Na(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Pe(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Pa(t,e,n){Na(t,n),xa(t,(function(t){return Pe(t,e)}))}function Ra(t,e,n){Na(t,n),xa(t,(function(t){return Re(t,e)||Re(e,t)}))}function xa(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i){var o=i.path;e(o)?(Oa(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Oa(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();A&&R("event: "+n.toString()),et(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Da="repo_interrupt",La=25,Ma=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Aa,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ar(),this.transactionQueueTree_=new Xo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Fa(t,e,n){if(t.stats_=Et(t.repoInfo_),t.forceRestClient_||nt())t.server_=new ir(t.repoInfo_,(function(e,n,r,i){qa(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return Ba(t,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.stringify)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Qe(t.repoInfo_,e,(function(e,n,r,i){qa(t,e,n,r,i)}),(function(e){Ba(t,e)}),(function(e){Ka(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=St(t.repoInfo_,(function(){return new gr(t.stats_,t.server_)})),t.infoData_=new or,t.infoSyncTree_=new po({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=mo(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Wa(t,"connected",!1),t.serverSyncTree_=new po({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Ra(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function ja(t){var e=t.infoData_.getNode(new ye(".info/serverTimeOffset")),n=e.val()||0;return(new Date).getTime()+n}function Ua(t){return Wo({timestamp:ja(t)})}function qa(t,e,n,r,i){t.dataUpdateCount++;var a=new ye(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(i)if(r){var u=(0,o.map)(n,(function(t){return An(t)}));s=Eo(t.serverSyncTree_,a,u,i)}else{var c=An(n);s=To(t.serverSyncTree_,a,c,i)}else if(r){var l=(0,o.map)(n,(function(t){return An(t)}));s=bo(t.serverSyncTree_,a,l)}else{var h=An(n);s=mo(t.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=fs(t,a)),Ra(t.eventQueue_,f,s)}function Va(t,e){t.interceptServerDataCallback_=e}function Ba(t,e){Wa(t,"connected",e),!1===e&&$a(t)}function Ka(t,e){G(e,(function(e,n){Wa(t,e,n)}))}function Wa(t,e,n){var r=new ye("/.info/"+e),i=An(n);t.infoData_.updateSnapshot(r,i);var o=mo(t.infoSyncTree_,r,i);Ra(t.eventQueue_,r,o)}function Ha(t){return t.nextWriteId_++}function Ga(t,e){var n=ko(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=An(n).withIndex(e._queryParams.getIndex()),i=mo(t.serverSyncTree_,e._path,r);return Pa(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return as(t,"get for query "+(0,o.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))}))}function za(t,e,n,r,i){as(t,"set",{path:e.toString(),value:n,priority:r});var o=Ua(t),a=An(n,r),s=Co(t.serverSyncTree_,e),u=$o(a,s,o),c=Ha(t),l=vo(t.serverSyncTree_,e,u,c,!0);Na(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||L("set at "+e+" failed: "+n);var a=yo(t.serverSyncTree_,c,!o);Ra(t.eventQueue_,e,a),ss(t,i,n,r)}));var h=ms(t,e);fs(t,h),Ra(t.eventQueue_,h,[])}function Qa(t,e,n,r){as(t,"update",{path:e.toString(),value:n});var i=!0,o=Ua(t),a={};if(G(n,(function(n,r){i=!1,a[n]=Qo(Ce(e,n),An(r),t.serverSyncTree_,o)})),i)R("update() called with empty data.  Don't do anything."),ss(t,r,"ok",void 0);else{var s=Ha(t),u=go(t.serverSyncTree_,e,a,s);Na(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||L("update at "+e+" failed: "+n);var a=yo(t.serverSyncTree_,s,!o),u=a.length>0?fs(t,e):e;Ra(t.eventQueue_,u,a),ss(t,r,n,i)})),G(n,(function(n){var r=ms(t,Ce(e,n));fs(t,r)})),Ra(t.eventQueue_,e,[])}}function $a(t){as(t,"onDisconnectEvents");var e=Ua(t),n=ar();cr(t.onDisconnect_,me(),(function(r,i){var o=Qo(r,i,t.serverSyncTree_,e);sr(n,r,o)}));var r=[];cr(n,me(),(function(e,n){r=r.concat(mo(t.serverSyncTree_,e,n));var i=ms(t,e);fs(t,i)})),t.onDisconnect_=ar(),Ra(t.eventQueue_,me(),r)}function Ya(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&ur(t.onDisconnect_,e),ss(t,n,r,i)}))}function Xa(t,e,n,r){var i=An(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&sr(t.onDisconnect_,e,i),ss(t,r,n,o)}))}function Ja(t,e,n,r,i){var o=An(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&sr(t.onDisconnect_,e,o),ss(t,i,n,r)}))}function Za(t,e,n,r){if((0,o.isEmpty)(n))return R("onDisconnect().update() called with empty data.  Don't do anything."),void ss(t,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&G(n,(function(n,r){var i=An(r);sr(t.onDisconnect_,Ce(e,n),i)})),ss(t,r,i,o)}))}function ts(t,e,n){var r;r=".info"===be(e._path)?So(t.infoSyncTree_,e,n):So(t.serverSyncTree_,e,n),Pa(t.eventQueue_,e._path,r)}function es(t,e,n){var r;r=".info"===be(e._path)?Io(t.infoSyncTree_,e,n):Io(t.serverSyncTree_,e,n),Pa(t.eventQueue_,e._path,r)}function ns(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Da)}function rs(t){t.persistentConnection_&&t.persistentConnection_.resume(Da)}function is(t,e){if(void 0===e&&(e=!1),"undefined"!==typeof console){var n;e?(t.statsListener_||(t.statsListener_=new fr(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);G(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}function os(t,e){t.stats_.incrementCounter(e),yr(t.statsReporter_,e)}function as(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),R.apply(void 0,p([r],f(e)))}function ss(t,e,n,r){e&&et((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function us(t,e,n,r,i,a){as(t,"transaction on "+e);var s={path:e,update:n,onComplete:r,status:null,order:S(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=cs(t,e,void 0);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{ya("transaction failed: Data returned ",c,s.path),s.status=0;var l=Jo(t.transactionQueueTree_,e),h=Zo(l)||[];h.push(s),ta(l,h);var f=void 0;if("object"===typeof c&&null!==c&&(0,o.contains)(c,".priority"))f=(0,o.safeGet)(c,".priority"),(0,o.assert)(va(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var p=Co(t.serverSyncTree_,e)||En.EMPTY_NODE;f=p.getPriority().val()}var d=Ua(t),v=An(c,f),g=$o(v,u,d);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=g,s.currentWriteId=Ha(t);var y=vo(t.serverSyncTree_,e,g,s.currentWriteId,s.applyLocally);Ra(t.eventQueue_,e,y),ls(t,t.transactionQueueTree_)}}function cs(t,e,n){return Co(t.serverSyncTree_,e,n)||En.EMPTY_NODE}function ls(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||ys(t,e),Zo(e)){var n=vs(t,e);(0,o.assert)(n.length>0,"Sending zero length transaction queue");var r=n.every((function(t){return 0===t.status}));r&&hs(t,aa(e),n)}else ea(e)&&ra(e,(function(e){ls(t,e)}))}function hs(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=cs(t,e,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Ae(e,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=e;t.server_.put(f.toString(),h,(function(r){as(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(yo(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);ys(t,Jo(t.transactionQueueTree_,e)),ls(t,t.transactionQueueTree_),Ra(t.eventQueue_,e,i);for(s=0;s<o.length;s++)et(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{L("transaction at "+f.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}fs(t,e)}}),s)}function fs(t,e){var n=ds(t,e),r=aa(n),i=vs(t,n);return ps(t,i,r),r}function ps(t,e,n){if(0!==e.length){for(var r=[],i=[],a=e.filter((function(t){return 0===t.status})),s=a.map((function(t){return t.currentWriteId})),u=function(a){var u,c=e[a],l=Ae(n,c.path),h=!1;if((0,o.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(yo(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=La)h=!0,u="maxretry",i=i.concat(yo(t.serverSyncTree_,c.currentWriteId,!0));else{var f=cs(t,c.path,s);c.currentInputSnapshot=f;var p=e[a].update(f.val());if(void 0!==p){ya("transaction failed: Data returned ",p,c.path);var d=An(p),v="object"===typeof p&&null!=p&&(0,o.contains)(p,".priority");v||(d=d.updatePriority(f.getPriority()));var g=c.currentWriteId,y=Ua(t),m=$o(d,f,y);c.currentOutputSnapshotRaw=d,c.currentOutputSnapshotResolved=m,c.currentWriteId=Ha(t),s.splice(s.indexOf(g),1),i=i.concat(vo(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally)),i=i.concat(yo(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(yo(t.serverSyncTree_,c.currentWriteId,!0))}Ra(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(t){setTimeout(t,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&("nodata"===u?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(u),!1,null)}))))},c=0;c<e.length;c++)u(c);ys(t,t.transactionQueueTree_);for(c=0;c<r.length;c++)et(r[c]);ls(t,t.transactionQueueTree_)}}function ds(t,e){var n,r=t.transactionQueueTree_;n=be(e);while(null!==n&&void 0===Zo(r))r=Jo(r,n),e=we(e),n=be(e);return r}function vs(t,e){var n=[];return gs(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function gs(t,e,n){var r=Zo(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);ra(e,(function(e){gs(t,e,n)}))}function ys(t,e){var n=Zo(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ta(e,n.length>0?n:void 0)}ra(e,(function(e){ys(t,e)}))}function ms(t,e){var n=aa(ds(t,e)),r=Jo(t.transactionQueueTree_,e);return oa(r,(function(e){bs(t,e)})),bs(t,r),ia(r,(function(e){bs(t,e)})),n}function bs(t,e){var n=Zo(e);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?((0,o.assert)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):((0,o.assert)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(yo(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===a?ta(e,void 0):n.length=a+1,Ra(t.eventQueue_,aa(e),i);for(s=0;s<r.length;s++)et(r[s])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}function ws(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=h(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):L("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}var Is=function(t,e){var n=Ts(t),r=n.namespace;"firebase.com"===n.domain&&D(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||D("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||M();var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new mt(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new ye(n.pathString)}},Ts=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"===typeof t){var c=t.indexOf("//");c>=0&&(s=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=_s(t.substring(l,h)));var f=ws(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f["ns"])}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},Es=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.stringify)(this.snapshot.exportVal())},t}(),Ss=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Cs=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),ks=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.Deferred;return Ya(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){Sa("OnDisconnect.remove",this._path);var t=new o.Deferred;return Xa(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){Sa("OnDisconnect.set",this._path),ga("OnDisconnect.set",t,this._path,!1);var e=new o.Deferred;return Xa(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){Sa("OnDisconnect.setWithPriority",this._path),ga("OnDisconnect.setWithPriority",t,this._path,!1),_a("OnDisconnect.setWithPriority",e,!1);var n=new o.Deferred;return Ja(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){Sa("OnDisconnect.update",this._path),ba("OnDisconnect.update",t,this._path,!1);var e=new o.Deferred;return Za(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),As=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return ke(this._path)?null:Ie(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new xs(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=rr(this._queryParams),e=W(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return rr(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(e=(0,o.getModularInstance)(e),!(e instanceof t))return!1;var n=this._repo===e._repo,r=Pe(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+Te(this._path)},t}();function Ns(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ps(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Je){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){var a=t.getIndexStartName();if(a!==U)throw new Error(r);if("string"!==typeof e)throw new Error(i)}if(t.hasEnd()){var s=t.getIndexEndName();if(s!==q)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(t.getIndex()===mn){if(null!=e&&!va(e)||null!=n&&!va(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.assert)(t.getIndex()instanceof Nn||t.getIndex()===Rn,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Rs(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var xs=function(t){function e(e,n){return t.call(this,e,n,new zn,!1)||this}return s(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=Se(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var t=this;while(null!==t.parent)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(As),Os=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ye(e),r=Ms(this.ref,e);return new t(this._node.getChild(n),r,mn)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,(function(r,i){return e(new t(i,Ms(n.ref,r),mn))}))},t.prototype.hasChild=function(t){var e=new ye(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ds(t,e){return t=(0,o.getModularInstance)(t),t._checkNotDeleted("ref"),void 0!==e?Ms(t._root,e):t._root}function Ls(t,e){t=(0,o.getModularInstance)(t),t._checkNotDeleted("refFromURL");var n=Is(e,t._repo.repoInfo_.nodeAdmin);Ca("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||D("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ds(t,n.path.toString())}function Ms(t,e){return t=(0,o.getModularInstance)(t),null===be(t._path)?Ea("child","path",e,!1):Ta("child","path",e,!1),new xs(t._repo,Ce(t._path,e))}function Fs(t,e){t=(0,o.getModularInstance)(t),Sa("push",t._path),ga("push",e,t._path,!0);var n,r=ja(t._repo),i=Mn(r),a=Ms(t,i),s=Ms(t,i);return n=null!=e?Us(s,e).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function js(t){return Sa("remove",t._path),Us(t,null)}function Us(t,e){t=(0,o.getModularInstance)(t),Sa("set",t._path),ga("set",e,t._path,!1);var n=new o.Deferred;return za(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function qs(t,e){t=(0,o.getModularInstance)(t),Sa("setPriority",t._path),_a("setPriority",e,!1);var n=new o.Deferred;return za(t._repo,Ce(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function Vs(t,e,n){if(Sa("setWithPriority",t._path),ga("setWithPriority",e,t._path,!1),_a("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.Deferred;return za(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Bs(t,e){ba("update",e,t._path,!1);var n=new o.Deferred;return Qa(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Ks(t){return t=(0,o.getModularInstance)(t),Ga(t._repo,t).then((function(e){return new Os(e,new xs(t._repo,t._path),t._queryParams.getIndex())}))}var Ws=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Es("value",this,new Os(t.snapshotNode,new xs(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ss(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Hs=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ss(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.assert)(null!=t.childName,"Child events should have a childName.");var n=Ms(new xs(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Es(t.type,this,new Os(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Gs(t,e,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){es(t._repo,t,c),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Cs(n,o||void 0),c="value"===e?new Ws(u):new Hs(e,u);return ts(t._repo,t,c),function(){return es(t._repo,t,c)}}function zs(t,e,n,r){return Gs(t,"value",e,n,r)}function Qs(t,e,n,r){return Gs(t,"child_added",e,n,r)}function $s(t,e,n,r){return Gs(t,"child_changed",e,n,r)}function Ys(t,e,n,r){return Gs(t,"child_moved",e,n,r)}function Xs(t,e,n,r){return Gs(t,"child_removed",e,n,r)}function Js(t,e,n){var r=null,i=n?new Cs(n):null;"value"===e?r=new Ws(i):e&&(r=new Hs(e,i)),es(t._repo,t,r)}var Zs=function(){function t(){}return t}(),tu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return s(e,t),e.prototype._apply=function(t){ga("endAt",this._value,t._path,!0);var e=Zn(t._queryParams,this._value,this._key);if(Rs(e),Ps(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new As(t._repo,t._path,e,t._orderByCalled)},e}(Zs);function eu(t,e){return Ia("endAt","key",e,!0),new tu(t,e)}var nu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return s(e,t),e.prototype._apply=function(t){ga("endBefore",this._value,t._path,!1);var e=tr(t._queryParams,this._value,this._key);if(Rs(e),Ps(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new As(t._repo,t._path,e,t._orderByCalled)},e}(Zs);function ru(t,e){return Ia("endBefore","key",e,!0),new nu(t,e)}var iu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return s(e,t),e.prototype._apply=function(t){ga("startAt",this._value,t._path,!0);var e=Xn(t._queryParams,this._value,this._key);if(Rs(e),Ps(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new As(t._repo,t._path,e,t._orderByCalled)},e}(Zs);function ou(t,e){return void 0===t&&(t=null),Ia("startAt","key",e,!0),new iu(t,e)}var au=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return s(e,t),e.prototype._apply=function(t){ga("startAfter",this._value,t._path,!1);var e=Jn(t._queryParams,this._value,this._key);if(Rs(e),Ps(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new As(t._repo,t._path,e,t._orderByCalled)},e}(Zs);function su(t,e){return Ia("startAfter","key",e,!0),new au(t,e)}var uu=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return s(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new As(t._repo,t._path,$n(t._queryParams,this._limit),t._orderByCalled)},e}(Zs);function cu(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new uu(t)}var lu=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return s(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new As(t._repo,t._path,Yn(t._queryParams,this._limit),t._orderByCalled)},e}(Zs);function hu(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new lu(t)}var fu=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return s(e,t),e.prototype._apply=function(t){Ns(t,"orderByChild");var e=new ye(this._path);if(ke(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Nn(e),r=er(t._queryParams,n);return Ps(r),new As(t._repo,t._path,r,!0)},e}(Zs);function pu(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ta("orderByChild","path",t,!1),new fu(t)}var du=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype._apply=function(t){Ns(t,"orderByKey");var e=er(t._queryParams,Je);return Ps(e),new As(t._repo,t._path,e,!0)},e}(Zs);function vu(){return new du}var gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype._apply=function(t){Ns(t,"orderByPriority");var e=er(t._queryParams,mn);return Ps(e),new As(t._repo,t._path,e,!0)},e}(Zs);function yu(){return new gu}var mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype._apply=function(t){Ns(t,"orderByValue");var e=er(t._queryParams,Rn);return Ps(e),new As(t._repo,t._path,e,!0)},e}(Zs);function bu(){return new mu}var _u=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return s(e,t),e.prototype._apply=function(t){if(ga("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new tu(this._value,this._key)._apply(new iu(this._value,this._key)._apply(t))},e}(Zs);function wu(t,e){return Ia("equalTo","key",e,!0),new _u(t,e)}function Iu(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(0,o.getModularInstance)(t);try{for(var s=h(r),u=s.next();!u.done;u=s.next()){var c=u.value;a=c._apply(a)}}catch(l){e={error:l}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return a}Xi(xs),lo(xs);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Tu="FIREBASE_DATABASE_EMULATOR_HOST",Eu={},Su=!1;function Cu(t,e,n,r){t.repoInfo_=new mt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}function ku(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||D("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),R("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=Is(o,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",BASE_URL:"/"}[Tu]),c?(a=!0,o="http://"+c+"?ns="+u.namespace,s=Is(o,i),u=s.repoInfo):a=!s.repoInfo.secure;var l=i&&a?new at(at.OWNER):new ot(t.name,t.options,e);Ca("Invalid Firebase Database URL",s),ke(s.path)||D("Database URL must point to the root of a Firebase Database (not including a child path).");var h=Nu(u,t,l,new it(t.name,n));return new Ru(h,t)}function Au(t,e){var n=Eu[e];n&&n[t.key]===t||D("Database "+e+"("+t.repoInfo_+") has already been deleted."),ns(t),delete n[t.key]}function Nu(t,e,n,r){var i=Eu[e.name];i||(i={},Eu[e.name]=i);var o=i[t.toURLString()];return o&&D("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ma(t,Su,n,r),i[t.toURLString()]=o,o}function Pu(t){Su=t}var Ru=function(){function t(t,e){this._repoInternal=t,this.app=e,this["type"]="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(Fa(this._repoInternal,this.app.options.appId,this.app.options["databaseAuthVariableOverride"]),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new xs(this._repo,me())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){return null!==this._rootInternal&&(Au(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&D("Cannot call "+t+" on a deleted database.")},t}();function xu(t,e,n,r){void 0===r&&(r={}),t=(0,o.getModularInstance)(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&D("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&D('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new at(at.OWNER);else if(r.mockUserToken){var s="string"===typeof r.mockUserToken?r.mockUserToken:(0,o.createMockUserToken)(r.mockUserToken,t.app.options.projectId);a=new at(s)}Cu(i,e,n,a)}function Ou(t){t=(0,o.getModularInstance)(t),t._checkNotDeleted("goOffline"),ns(t._repo)}function Du(t){t=(0,o.getModularInstance)(t),t._checkNotDeleted("goOnline"),rs(t._repo)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lu={".sv":"timestamp"};function Mu(){return Lu}function Fu(t){return{".sv":{increment:t}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ju=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Uu(t,e,n){var r;if(t=(0,o.getModularInstance)(t),Sa("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new o.Deferred,s=function(e,n,r){var i=null;e?a.reject(e):(i=new Os(r,new xs(t._repo,t._path),mn),a.resolve(new ju(n,i)))},u=zs(t,(function(){}));return us(t._repo,t._path,e,s,u,i),a.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qu=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){(0,o.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){(0,o.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,o.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){(0,o.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if((0,o.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,L("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.validateCallback)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Vu=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Bu=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),Ta("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),Ta("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,o.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return(0,o.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Wu(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ku=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var a,s=this;(0,o.validateArgCount)("Query.on",2,4,arguments.length),(0,o.validateCallback)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new Bu(s.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return zs(this._delegate,c,l),n;case"child_added":return Qs(this._delegate,c,l),n;case"child_removed":return Xs(this._delegate,c,l),n;case"child_changed":return $s(this._delegate,c,l),n;case"child_moved":return Ys(this._delegate,c,l),n;default:throw new Error((0,o.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.validateArgCount)("Query.off",0,3,arguments.length),wa("Query.off",t,!0),(0,o.validateCallback)("Query.off","callback",e,!0),(0,o.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Js(this._delegate,t,r)}else Js(this._delegate,t)},t.prototype.get=function(){var t=this;return Ks(this._delegate).then((function(e){return new Bu(t.database,e)}))},t.prototype.once=function(e,n,r,i){var a=this;(0,o.validateArgCount)("Query.once",1,4,arguments.length),(0,o.validateCallback)("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.Deferred,c=function(t,e){var r=new Bu(a.database,t);n&&n.call(s.context,r,e),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(t){s.cancel&&s.cancel.call(s.context,t),u.reject(t)};switch(e){case"value":zs(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Qs(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Xs(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":$s(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ys(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,Iu(this._delegate,cu(e)))},t.prototype.limitToLast=function(e){return(0,o.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,Iu(this._delegate,hu(e)))},t.prototype.orderByChild=function(e){return(0,o.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,Iu(this._delegate,pu(e)))},t.prototype.orderByKey=function(){return(0,o.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,Iu(this._delegate,vu()))},t.prototype.orderByPriority=function(){return(0,o.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,Iu(this._delegate,yu()))},t.prototype.orderByValue=function(){return(0,o.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,Iu(this._delegate,bu()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,Iu(this._delegate,ou(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,Iu(this._delegate,su(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,Iu(this._delegate,eu(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,Iu(this._delegate,ru(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,Iu(this._delegate,wu(e,n)))},t.prototype.toString=function(){return(0,o.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,(0,o.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"===typeof e&&null!==e)r.context=e;else{if("function"!==typeof e)throw new Error((0,o.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Wu(this.database,new xs(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Wu=function(t){function e(e,n){var r=t.call(this,e,new As(n._repo,n._path,new zn,!1))||this;return r.database=e,r._delegate=n,r}return s(e,t),e.prototype.getKey=function(){return(0,o.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.validateArgCount)("Reference.child",1,1,arguments.length),"number"===typeof t&&(t=String(t)),new e(this.database,Ms(this._delegate,t))},e.prototype.getParent=function(){(0,o.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.validateArgCount)("Reference.set",1,2,arguments.length),(0,o.validateCallback)("Reference.set","onComplete",e,!0);var n=Us(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if((0,o.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,L("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Sa("Reference.update",this._delegate._path),(0,o.validateCallback)("Reference.update","onComplete",e,!0);var i=Bs(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){(0,o.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=Vs(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){(0,o.validateArgCount)("Reference.remove",0,1,arguments.length),(0,o.validateCallback)("Reference.remove","onComplete",t,!0);var e=js(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,o.validateCallback)("Reference.transaction","transactionUpdate",t,!1),(0,o.validateCallback)("Reference.transaction","onComplete",e,!0),ka("Reference.transaction","applyLocally",n,!0);var i=Uu(this._delegate,t,{applyLocally:n}).then((function(t){return new Vu(t.committed,new Bu(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){(0,o.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,o.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=qs(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;(0,o.validateArgCount)("Reference.push",0,2,arguments.length),(0,o.validateCallback)("Reference.push","onComplete",n,!0);var i=Fs(this._delegate,t),a=i.then((function(t){return new e(r.database,t)}));n&&a.then((function(){return n(null)}),(function(t){return n(t)}));var s=new e(this.database,i);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},e.prototype.onDisconnect=function(){return Sa("Reference.onDisconnect",this._delegate._path),new qu(new ks(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Ku),Hu=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),xu(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.validateArgCount)("database.ref",0,1,arguments.length),t instanceof Wu){var e=Ls(this._delegate,t.toString());return new Wu(this,e)}e=Ds(this._delegate,t);return new Wu(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.validateArgCount)(e,1,1,arguments.length);var n=Ls(this._delegate,t);return new Wu(this,n)},t.prototype.goOffline=function(){return(0,o.validateArgCount)("database.goOffline",0,0,arguments.length),Ou(this._delegate)},t.prototype.goOnline=function(){return(0,o.validateArgCount)("database.goOnline",0,0,arguments.length),Du(this._delegate)},t.ServerValue={TIMESTAMP:Mu(),increment:function(t){return Fu(t)}},t}(),Gu=function(){$t.forceDisallow(),Wt.forceAllow()},zu=function(){Wt.forceDisallow()},Qu=function(){return $t["isAvailable"]()},$u=function(t,e){var n=t._delegate._repo.persistentConnection_;n.securityDebugCallback_=e},Yu=function(t,e){is(t._delegate._repo,e)},Xu=function(t,e){os(t._delegate._repo,e)},Ju=function(t){return t._delegate._repo.dataUpdateCount},Zu=function(t,e){return Va(t._delegate._repo,e)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){var e=t.app,n=t.url,r=t.version,o=t.customAuthImpl,a=t.namespace,s=t.nodeAdmin,u=void 0!==s&&s;m(r);var c=new i.Provider("auth-internal",new i.ComponentContainer("database-standalone"));return c.setComponent(new i.Component("auth-internal",(function(){return o}),"PRIVATE")),{instance:new Hu(ku(e,c,void 0,n,u),e),namespace:a}}var ec=Object.freeze({__proto__:null,forceLongPolling:Gu,forceWebSockets:zu,isWebSocketsAvailable:Qu,setSecurityDebugCallback:$u,stats:Yu,statsIncrementCounter:Xu,dataUpdateCount:Ju,interceptServerData:Zu,initStandalone:tc}),nc=Qe;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qe.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Qe.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var rc=he,ic=function(t){var e=Qe.prototype.put;return Qe.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Qe.prototype.put=e}},oc=mt,ac=function(t){return t._delegate._queryIdentifier},sc=function(t){Pu(t)},uc=Object.freeze({__proto__:null,DataConnection:nc,RealTimeConnection:rc,hijackHash:ic,ConnectionTarget:oc,queryIdentifier:ac,forceRestClient:sc}),cc=Hu.ServerValue;function lc(e){m(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.Component("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Hu(ku(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Wu,Query:Ku,Database:Hu,DataSnapshot:Bu,enableLogging:P,INTERNAL:ec,ServerValue:cc,TEST_ACCESS:uc}).setMultipleInstances(!0));e.registerVersion(v,g),(0,o.isNodeSdk)()&&(t.exports=n)}lc(r["default"])},594:function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.r(e),n.d(e,{LogLevel:function(){return o},Logger:function(){return h},setLogLevel:function(){return f},setUserLogHandler:function(){return p}});var o,a=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=(i={},i[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){var u=i[r];n(u)}}},783:function(t,e,n){"use strict";n.r(e),n.d(e,{CONSTANTS:function(){return a},Deferred:function(){return m},ErrorFactory:function(){return F},FirebaseError:function(){return M},MAX_VALUE_MILLIS:function(){return yt},RANDOM_FACTOR:function(){return mt},Sha1:function(){return nt},areCookiesEnabled:function(){return O},assert:function(){return s},assertionError:function(){return u},async:function(){return ot},base64:function(){return h},base64Decode:function(){return d},base64Encode:function(){return f},base64urlEncodeWithoutPadding:function(){return p},calculateBackoffMillis:function(){return bt},contains:function(){return z},createMockUserToken:function(){return b},createSubscribe:function(){return rt},decode:function(){return B},deepCopy:function(){return v},deepEqual:function(){return X},deepExtend:function(){return g},errorPrefix:function(){return ct},extractQuerystring:function(){return et},getGlobal:function(){return D},getModularInstance:function(){return It},getUA:function(){return _},isAdmin:function(){return G},isBrowser:function(){return T},isBrowserExtension:function(){return E},isElectron:function(){return C},isEmpty:function(){return $},isIE:function(){return k},isIndexedDBAvailable:function(){return R},isMobileCordova:function(){return w},isNode:function(){return I},isNodeSdk:function(){return N},isReactNative:function(){return S},isSafari:function(){return P},isUWP:function(){return A},isValidFormat:function(){return H},isValidTimestamp:function(){return K},issuedAtTime:function(){return W},jsonEval:function(){return q},map:function(){return Y},ordinal:function(){return _t},querystring:function(){return Z},querystringDecode:function(){return tt},safeGet:function(){return Q},stringLength:function(){return dt},stringToByteArray:function(){return pt},stringify:function(){return V},validateArgCount:function(){return ut},validateCallback:function(){return ht},validateContextObject:function(){return ft},validateIndexedDBOpenable:function(){return x},validateNamespace:function(){return lt}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};Object.create;Object.create;var a={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(t,e){if(!t)throw u(e)},u=function(t){return new Error("Firebase Database ("+a.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},c=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},l=function(t){var e=[],n=0,r=0;while(n<t.length){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=t[n++];var a=t[n++],s=t[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{o=t[n++],a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(c(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):l(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length,s=a?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var l=i<t.length,h=l?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==h)throw Error();var f=o<<2|s>>4;if(r.push(f),64!==c){var p=s<<4&240|c>>2;if(r.push(p),64!==h){var d=c<<6&192|h;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},f=function(t){var e=c(t);return h.encodeByteArray(e,!0)},p=function(t){return f(t).replace(/\./g,"")},d=function(t){try{return h.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function v(t){return g(void 0,t)}function g(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&y(r)&&(t[r]=g(t[r],e[r]));return t}function y(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=o({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[p(JSON.stringify(n)),p(JSON.stringify(s)),u].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function w(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())}function I(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function T(){return"object"===typeof self&&self.self===self}function E(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function S(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function C(){return _().indexOf("Electron/")>=0}function k(){var t=_();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A(){return _().indexOf("MSAppHost/")>=0}function N(){return!0===a.NODE_CLIENT||!0===a.NODE_ADMIN}function P(){return!I()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R(){return"indexedDB"in self&&null!=indexedDB}function x(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function O(){return!(!navigator||!navigator.cookieEnabled)}function D(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L="FirebaseError",M=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=L,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,F.prototype.create),o}return i(e,t),e}(Error),F=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?j(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new M(i,s,r);return u},t}();function j(t,e){return t.replace(U,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var U=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(t){return JSON.parse(t)}function V(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=q(d(o[0])||""),n=q(d(o[1])||""),i=o[2],r=n["d"]||{},delete n["d"]}catch(a){}return{header:e,claims:n,data:r,signature:i}},K=function(t){var e=B(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof e&&(e.hasOwnProperty("nbf")?r=e["nbf"]:e.hasOwnProperty("iat")&&(r=e["iat"]),i=e.hasOwnProperty("exp")?e["exp"]:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},W=function(t){var e=B(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e["iat"]:null},H=function(t){var e=B(t),n=e.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},G=function(t){var e=B(t).claims;return"object"===typeof e&&!0===e["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function z(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Q(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function $(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Y(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function X(t,e){if(t===e)return!0;for(var n=Object.keys(t),r=Object.keys(e),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=t[a],u=e[a];if(J(s)&&J(u)){if(!X(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){a=l[c];if(!n.includes(a))return!1}return!0}function J(t){return null!==t&&"object"===typeof t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],a=o[0],s=o[1];n(a,s)}return e.length?"&"+e.join("&"):""}function tt(t){var e={},n=t.replace(/^\?/,"").split("&");return n.forEach((function(t){if(t){var n=t.split("="),r=n[0],i=n[1];e[decodeURIComponent(r)]=decodeURIComponent(i)}})),e}function et(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function rt(t,e){var n=new it(t,e);return n.subscribe.bind(n)}var it=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=at(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=st),void 0===r.error&&(r.error=st),void 0===r.complete&&(r.complete=st);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function ot(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}}function at(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}function st(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function ct(t,e){return t+" failed: "+e+" argument "}function lt(t,e,n){if((!n||e)&&"string"!==typeof e)throw new Error(ct(t,"namespace")+"must be a valid firebase namespace.")}function ht(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ct(t,e)+"must be a valid function.")}function ft(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ct(t,e)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,s(r<t.length,"Surrogate pair missing trail surrogate.");var a=t.charCodeAt(r)-56320;i=65536+(o<<10)+a}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},dt=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},vt=1e3,gt=2,yt=144e5,mt=.5;function bt(t,e,n){void 0===e&&(e=vt),void 0===n&&(n=gt);var r=e*Math.pow(n,t),i=Math.round(mt*r*(Math.random()-.5)*2);return Math.min(yt,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){return Number.isFinite(t)?t+wt(t):""+t}function wt(t){t=Math.abs(t);var e=t%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}},931:function(t,e,n){"use strict";function r(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.d(e,{Bj:function(){return S},qq:function(){return U},Fl:function(){return ce},X3:function(){return zt},PG:function(){return Wt},dq:function(){return te},yT:function(){return Gt},Xl:function(){return $t},Jd:function(){return K},WL:function(){return se},qj:function(){return qt},iH:function(){return ee},lk:function(){return W},Um:function(){return Vt},XI:function(){return ne},IU:function(){return Qt},j:function(){return H},X$:function(){return z},SU:function(){return oe}});const i=()=>{},o=Object.assign,a=Object.prototype.hasOwnProperty,s=(t,e)=>a.call(t,e),u=Array.isArray,c=t=>"[object Map]"===v(t),l=t=>"function"===typeof t,h=t=>"string"===typeof t,f=t=>"symbol"===typeof t,p=t=>null!==t&&"object"===typeof t,d=Object.prototype.toString,v=t=>d.call(t),g=t=>v(t).slice(8,-1),y=t=>h(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,m=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},b=/-(\w)/g,_=(m((t=>t.replace(b,((t,e)=>e?e.toUpperCase():"")))),/\B([A-Z])/g),w=(m((t=>t.replace(_,"-$1").toLowerCase())),m((t=>t.charAt(0).toUpperCase()+t.slice(1)))),I=(m((t=>t?`on${w(t)}`:"")),(t,e)=>!Object.is(t,e)),T=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})};let E;class S{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&E&&(this.parent=E,this.index=(E.scopes||(E.scopes=[])).push(this)-1)}run(t){if(this.active){const e=E;try{return E=this,t()}finally{E=e}}else 0}on(){E=this}off(){E=this.parent}stop(t){if(this.active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}function C(t,e=E){e&&e.active&&e.effects.push(t)}const k=t=>{const e=new Set(t);return e.w=0,e.n=0,e},A=t=>(t.w&D)>0,N=t=>(t.n&D)>0,P=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=D},R=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];A(i)&&!N(i)?i.delete(t):e[n++]=i,i.w&=~D,i.n&=~D}e.length=n}},x=new WeakMap;let O=0,D=1;const L=30;let M;const F=Symbol(""),j=Symbol("");class U{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,C(this,n)}run(){if(!this.active)return this.fn();let t=M,e=V;while(t){if(t===this)return;t=t.parent}try{return this.parent=M,M=this,V=!0,D=1<<++O,O<=L?P(this):q(this),this.fn()}finally{O<=L&&R(this),D=1<<--O,M=this.parent,V=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){M===this?this.deferStop=!0:this.active&&(q(this),this.onStop&&this.onStop(),this.active=!1)}}function q(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let V=!0;const B=[];function K(){B.push(V),V=!1}function W(){const t=B.pop();V=void 0===t||t}function H(t,e,n){if(V&&M){let e=x.get(t);e||x.set(t,e=new Map);let r=e.get(n);r||e.set(n,r=k());const i=void 0;G(r,i)}}function G(t,e){let n=!1;O<=L?N(t)||(t.n|=D,n=!A(t)):n=!t.has(M),n&&(t.add(M),M.deps.push(t))}function z(t,e,n,r,i,o){const a=x.get(t);if(!a)return;let s=[];if("clear"===e)s=[...a.values()];else if("length"===n&&u(t))a.forEach(((t,e)=>{("length"===e||e>=r)&&s.push(t)}));else switch(void 0!==n&&s.push(a.get(n)),e){case"add":u(t)?y(n)&&s.push(a.get("length")):(s.push(a.get(F)),c(t)&&s.push(a.get(j)));break;case"delete":u(t)||(s.push(a.get(F)),c(t)&&s.push(a.get(j)));break;case"set":c(t)&&s.push(a.get(F));break}if(1===s.length)s[0]&&Q(s[0]);else{const t=[];for(const e of s)e&&t.push(...e);Q(k(t))}}function Q(t,e){const n=u(t)?t:[...t];for(const r of n)r.computed&&$(r,e);for(const r of n)r.computed||$(r,e)}function $(t,e){(t!==M||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Y=r("__proto__,__v_isRef,__isVue"),X=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(f)),J=rt(),Z=rt(!1,!0),tt=rt(!0),et=nt();function nt(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Qt(this);for(let e=0,i=this.length;e<i;e++)H(n,"get",e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(Qt)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){K();const n=Qt(this)[e].apply(this,t);return W(),n}})),t}function rt(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_isShallow"===r)return e;if("__v_raw"===r&&i===(t?e?Ft:Mt:e?Lt:Dt).get(n))return n;const o=u(n);if(!t&&o&&s(et,r))return Reflect.get(et,r,i);const a=Reflect.get(n,r,i);return(f(r)?X.has(r):Y(r))?a:(t||H(n,"get",r),e?a:te(a)?o&&y(r)?a:a.value:p(a)?t?Bt(a):qt(a):a)}}const it=at(),ot=at(!0);function at(t=!1){return function(e,n,r,i){let o=e[n];if(Ht(o)&&te(o)&&!te(r))return!1;if(!t&&!Ht(r)&&(Gt(r)||(r=Qt(r),o=Qt(o)),!u(e)&&te(o)&&!te(r)))return o.value=r,!0;const a=u(e)&&y(n)?Number(n)<e.length:s(e,n),c=Reflect.set(e,n,r,i);return e===Qt(i)&&(a?I(r,o)&&z(e,"set",n,r,o):z(e,"add",n,r)),c}}function st(t,e){const n=s(t,e),r=t[e],i=Reflect.deleteProperty(t,e);return i&&n&&z(t,"delete",e,void 0,r),i}function ut(t,e){const n=Reflect.has(t,e);return f(e)&&X.has(e)||H(t,"has",e),n}function ct(t){return H(t,"iterate",u(t)?"length":F),Reflect.ownKeys(t)}const lt={get:J,set:it,deleteProperty:st,has:ut,ownKeys:ct},ht={get:tt,set(t,e){return!0},deleteProperty(t,e){return!0}},ft=o({},lt,{get:Z,set:ot}),pt=t=>t,dt=t=>Reflect.getPrototypeOf(t);function vt(t,e,n=!1,r=!1){t=t["__v_raw"];const i=Qt(t),o=Qt(e);n||(e!==o&&H(i,"get",e),H(i,"get",o));const{has:a}=dt(i),s=r?pt:n?Xt:Yt;return a.call(i,e)?s(t.get(e)):a.call(i,o)?s(t.get(o)):void(t!==i&&t.get(e))}function gt(t,e=!1){const n=this["__v_raw"],r=Qt(n),i=Qt(t);return e||(t!==i&&H(r,"has",t),H(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function yt(t,e=!1){return t=t["__v_raw"],!e&&H(Qt(t),"iterate",F),Reflect.get(t,"size",t)}function mt(t){t=Qt(t);const e=Qt(this),n=dt(e),r=n.has.call(e,t);return r||(e.add(t),z(e,"add",t,t)),this}function bt(t,e){e=Qt(e);const n=Qt(this),{has:r,get:i}=dt(n);let o=r.call(n,t);o||(t=Qt(t),o=r.call(n,t));const a=i.call(n,t);return n.set(t,e),o?I(e,a)&&z(n,"set",t,e,a):z(n,"add",t,e),this}function _t(t){const e=Qt(this),{has:n,get:r}=dt(e);let i=n.call(e,t);i||(t=Qt(t),i=n.call(e,t));const o=r?r.call(e,t):void 0,a=e.delete(t);return i&&z(e,"delete",t,void 0,o),a}function wt(){const t=Qt(this),e=0!==t.size,n=void 0,r=t.clear();return e&&z(t,"clear",void 0,void 0,n),r}function It(t,e){return function(n,r){const i=this,o=i["__v_raw"],a=Qt(o),s=e?pt:t?Xt:Yt;return!t&&H(a,"iterate",F),o.forEach(((t,e)=>n.call(r,s(t),s(e),i)))}}function Tt(t,e,n){return function(...r){const i=this["__v_raw"],o=Qt(i),a=c(o),s="entries"===t||t===Symbol.iterator&&a,u="keys"===t&&a,l=i[t](...r),h=n?pt:e?Xt:Yt;return!e&&H(o,"iterate",u?j:F),{next(){const{value:t,done:e}=l.next();return e?{value:t,done:e}:{value:s?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function Et(t){return function(...e){return"delete"!==t&&this}}function St(){const t={get(t){return vt(this,t)},get size(){return yt(this)},has:gt,add:mt,set:bt,delete:_t,clear:wt,forEach:It(!1,!1)},e={get(t){return vt(this,t,!1,!0)},get size(){return yt(this)},has:gt,add:mt,set:bt,delete:_t,clear:wt,forEach:It(!1,!0)},n={get(t){return vt(this,t,!0)},get size(){return yt(this,!0)},has(t){return gt.call(this,t,!0)},add:Et("add"),set:Et("set"),delete:Et("delete"),clear:Et("clear"),forEach:It(!0,!1)},r={get(t){return vt(this,t,!0,!0)},get size(){return yt(this,!0)},has(t){return gt.call(this,t,!0)},add:Et("add"),set:Et("set"),delete:Et("delete"),clear:Et("clear"),forEach:It(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{t[i]=Tt(i,!1,!1),n[i]=Tt(i,!0,!1),e[i]=Tt(i,!1,!0),r[i]=Tt(i,!0,!0)})),[t,n,e,r]}const[Ct,kt,At,Nt]=St();function Pt(t,e){const n=e?t?Nt:At:t?kt:Ct;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(s(n,r)&&r in e?n:e,r,i)}const Rt={get:Pt(!1,!1)},xt={get:Pt(!1,!0)},Ot={get:Pt(!0,!1)};const Dt=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,Ft=new WeakMap;function jt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ut(t){return t["__v_skip"]||!Object.isExtensible(t)?0:jt(g(t))}function qt(t){return Ht(t)?t:Kt(t,!1,lt,Rt,Dt)}function Vt(t){return Kt(t,!1,ft,xt,Lt)}function Bt(t){return Kt(t,!0,ht,Ot,Mt)}function Kt(t,e,n,r,i){if(!p(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=i.get(t);if(o)return o;const a=Ut(t);if(0===a)return t;const s=new Proxy(t,2===a?r:n);return i.set(t,s),s}function Wt(t){return Ht(t)?Wt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function Ht(t){return!(!t||!t["__v_isReadonly"])}function Gt(t){return!(!t||!t["__v_isShallow"])}function zt(t){return Wt(t)||Ht(t)}function Qt(t){const e=t&&t["__v_raw"];return e?Qt(e):t}function $t(t){return T(t,"__v_skip",!0),t}const Yt=t=>p(t)?qt(t):t,Xt=t=>p(t)?Bt(t):t;function Jt(t){V&&M&&(t=Qt(t),G(t.dep||(t.dep=k())))}function Zt(t,e){t=Qt(t),t.dep&&Q(t.dep)}function te(t){return!(!t||!0!==t.__v_isRef)}function ee(t){return re(t,!1)}function ne(t){return re(t,!0)}function re(t,e){return te(t)?t:new ie(t,e)}class ie{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Qt(t),this._value=e?t:Yt(t)}get value(){return Jt(this),this._value}set value(t){t=this.__v_isShallow?t:Qt(t),I(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Yt(t),Zt(this,t))}}function oe(t){return te(t)?t.value:t}const ae={get:(t,e,n)=>oe(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return te(i)&&!te(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function se(t){return Wt(t)?t:new Proxy(t,ae)}class ue{constructor(t,e,n,r){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new U(t,(()=>{this._dirty||(this._dirty=!0,Zt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const t=Qt(this);return Jt(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function ce(t,e,n=!1){let r,o;const a=l(t);a?(r=t,o=i):(r=t.get,o=t.set);const s=new ue(r,o,a||!o,n);return s}},252:function(t,e,n){"use strict";n.d(e,{$d:function(){return a},FN:function(){return vn},Fl:function(){return Rn},HY:function(){return Oe},JJ:function(){return $},P$:function(){return at},Q6:function(){return ft},U2:function(){return ut},Uk:function(){return nn},Us:function(){return ke},Wm:function(){return Je},Y3:function(){return I},Y8:function(){return rt},YP:function(){return J},_:function(){return Xe},aZ:function(){return pt},f3:function(){return Y},h:function(){return xn},iD:function(){return We},ic:function(){return At},kq:function(){return on},nK:function(){return ht},uE:function(){return rn},up:function(){return jt},wg:function(){return Ue},wy:function(){return Lt}});var r=n(931),i=n(612);function o(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){s(o,e,n)}return i}function a(t,e,n,r){if((0,i.mf)(t)){const a=o(t,e,n,r);return a&&(0,i.tI)(a)&&a.catch((t=>{s(t,e,n)})),a}const u=[];for(let i=0;i<t.length;i++)u.push(a(t[i],e,n,r));return u}function s(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const i=e.proxy,a=n;while(r){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,a))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void o(s,null,10,[t,i,a])}u(t,n,i,r)}function u(t,e,n,r=!0){console.error(t)}let c=!1,l=!1;const h=[];let f=0;const p=[];let d=null,v=0;const g=[];let y=null,m=0;const b=Promise.resolve();let _=null,w=null;function I(t){const e=_||b;return t?e.then(this?t.bind(this):t):e}function T(t){let e=f+1,n=h.length;while(e<n){const r=e+n>>>1,i=x(h[r]);i<t?e=r+1:n=r}return e}function E(t){h.length&&h.includes(t,c&&t.allowRecurse?f+1:f)||t===w||(null==t.id?h.push(t):h.splice(T(t.id),0,t),S())}function S(){c||l||(l=!0,_=b.then(O))}function C(t){const e=h.indexOf(t);e>f&&h.splice(e,1)}function k(t,e,n,r){(0,i.kJ)(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),S()}function A(t){k(t,d,p,v)}function N(t){k(t,y,g,m)}function P(t,e=null){if(p.length){for(w=e,d=[...new Set(p)],p.length=0,v=0;v<d.length;v++)d[v]();d=null,v=0,w=null,P(t,e)}}function R(t){if(P(),g.length){const t=[...new Set(g)];if(g.length=0,y)return void y.push(...t);for(y=t,y.sort(((t,e)=>x(t)-x(e))),m=0;m<y.length;m++)y[m]();y=null,m=0}}const x=t=>null==t.id?1/0:t.id;function O(t){l=!1,c=!0,P(t),h.sort(((t,e)=>x(t)-x(e)));i.dG;try{for(f=0;f<h.length;f++){const t=h[f];t&&!1!==t.active&&o(t,null,14)}}finally{f=0,h.length=0,R(t),c=!1,_=null,(h.length||p.length||g.length)&&O(t)}}new Set;new Map;function D(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||i.kT;let o=n;const s=e.startsWith("update:"),u=s&&e.slice(7);if(u&&u in r){const t=`${"modelValue"===u?"model":u}Modifiers`,{number:e,trim:a}=r[t]||i.kT;a&&(o=n.map((t=>t.trim()))),e&&(o=n.map(i.He))}let c;let l=r[c=(0,i.hR)(e)]||r[c=(0,i.hR)((0,i._A)(e))];!l&&s&&(l=r[c=(0,i.hR)((0,i.rs)(e))]),l&&a(l,t,6,o);const h=r[c+"Once"];if(h){if(t.emitted){if(t.emitted[c])return}else t.emitted={};t.emitted[c]=!0,a(h,t,6,o)}}function L(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(void 0!==o)return o;const a=t.emits;let s={},u=!1;if(!(0,i.mf)(t)){const r=t=>{const n=L(t,e,!0);n&&(u=!0,(0,i.l7)(s,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return a||u?((0,i.kJ)(a)?a.forEach((t=>s[t]=null)):(0,i.l7)(s,a),r.set(t,s),s):(r.set(t,null),null)}function M(t,e){return!(!t||!(0,i.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,i.RI)(t,(0,i.rs)(e))||(0,i.RI)(t,e))}let F=null,j=null;function U(t){const e=F;return F=t,j=t&&t.type.__scopeId||null,e}function q(t,e=F,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&Be(-1);const i=U(e),o=t(...n);return U(i),r._d&&Be(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function V(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:a,propsOptions:[u],slots:c,attrs:l,emit:h,render:f,renderCache:p,data:d,setupState:v,ctx:g,inheritAttrs:y}=t;let m,b;const _=U(t);try{if(4&n.shapeFlag){const t=o||r;m=an(f.call(t,t,p,a,v,d,g)),b=l}else{const t=e;0,m=an(t.length>1?t(a,{attrs:l,slots:c,emit:h}):t(a,null)),b=e.props?l:B(l)}}catch(I){Fe.length=0,s(I,t,1),m=Je(Le)}let w=m;if(b&&!1!==y){const t=Object.keys(b),{shapeFlag:e}=w;t.length&&7&e&&(u&&t.some(i.tR)&&(b=K(b,u)),w=en(w,b))}return n.dirs&&(w=en(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),m=w,U(_),m}const B=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,i.F7)(n))&&((e||(e={}))[n]=t[n]);return e},K=(t,e)=>{const n={};for(const r in t)(0,i.tR)(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function W(t,e,n){const{props:r,children:i,component:o}=t,{props:a,children:s,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!s||s&&s.$stable)||r!==a&&(r?!a||H(r,a,c):!!a);if(1024&u)return!0;if(16&u)return r?H(r,a,c):!!a;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(a[n]!==r[n]&&!M(c,n))return!0}}return!1}function H(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!M(n,o))return!0}return!1}function G({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const z=t=>t.__isSuspense;function Q(t,e){e&&e.pendingBranch?(0,i.kJ)(t)?e.effects.push(...t):e.effects.push(t):N(t)}function $(t,e){if(dn){let n=dn.provides;const r=dn.parent&&dn.parent.provides;r===n&&(n=dn.provides=Object.create(r)),n[t]=e}else 0}function Y(t,e,n=!1){const r=dn||F;if(r){const o=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&(0,i.mf)(e)?e.call(r.proxy):e}else 0}const X={};function J(t,e,n){return Z(t,e,n)}function Z(t,e,{immediate:n,deep:s,flush:u,onTrack:c,onTrigger:l}=i.kT){const h=dn;let f,p,d=!1,v=!1;if((0,r.dq)(t)?(f=()=>t.value,d=(0,r.yT)(t)):(0,r.PG)(t)?(f=()=>t,s=!0):(0,i.kJ)(t)?(v=!0,d=t.some((t=>(0,r.PG)(t)||(0,r.yT)(t))),f=()=>t.map((t=>(0,r.dq)(t)?t.value:(0,r.PG)(t)?nt(t):(0,i.mf)(t)?o(t,h,2):void 0))):f=(0,i.mf)(t)?e?()=>o(t,h,2):()=>{if(!h||!h.isUnmounted)return p&&p(),a(t,h,3,[g])}:i.dG,e&&s){const t=f;f=()=>nt(t())}let g=t=>{p=_.onStop=()=>{o(t,h,4)}};if(wn)return g=i.dG,e?n&&a(e,h,3,[f(),v?[]:void 0,g]):f(),i.dG;let y=v?[]:X;const m=()=>{if(_.active)if(e){const t=_.run();(s||d||(v?t.some(((t,e)=>(0,i.aU)(t,y[e]))):(0,i.aU)(t,y)))&&(p&&p(),a(e,h,3,[t,y===X?void 0:y,g]),y=t)}else _.run()};let b;m.allowRecurse=!!e,b="sync"===u?m:"post"===u?()=>Ce(m,h&&h.suspense):()=>A(m);const _=new r.qq(f,b);return e?n?m():y=_.run():"post"===u?Ce(_.run.bind(_),h&&h.suspense):_.run(),()=>{_.stop(),h&&h.scope&&(0,i.Od)(h.scope.effects,_)}}function tt(t,e,n){const r=this.proxy,o=(0,i.HD)(t)?t.includes(".")?et(r,t):()=>r[t]:t.bind(r,r);let a;(0,i.mf)(e)?a=e:(a=e.handler,n=e);const s=dn;gn(this);const u=Z(o,a.bind(r),n);return s?gn(s):yn(),u}function et(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function nt(t,e){if(!(0,i.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,r.dq)(t))nt(t.value,e);else if((0,i.kJ)(t))for(let n=0;n<t.length;n++)nt(t[n],e);else if((0,i.DM)(t)||(0,i._N)(t))t.forEach((t=>{nt(t,e)}));else if((0,i.PO)(t))for(const n in t)nt(t[n],e);return t}function rt(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ct((()=>{t.isMounted=!0})),Nt((()=>{t.isUnmounting=!0})),t}const it=[Function,Array],ot={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:it,onEnter:it,onAfterEnter:it,onEnterCancelled:it,onBeforeLeave:it,onLeave:it,onAfterLeave:it,onLeaveCancelled:it,onBeforeAppear:it,onAppear:it,onAfterAppear:it,onAppearCancelled:it},setup(t,{slots:e}){const n=vn(),i=rt();let o;return()=>{const a=e.default&&ft(e.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){let t=!1;for(const e of a)if(e.type!==Le){0,s=e,t=!0;break}}const u=(0,r.IU)(t),{mode:c}=u;if(i.isLeaving)return ct(s);const l=lt(s);if(!l)return ct(s);const h=ut(l,u,i,n);ht(l,h);const f=n.subTree,p=f&&lt(f);let d=!1;const{getTransitionKey:v}=l.type;if(v){const t=v();void 0===o?o=t:t!==o&&(o=t,d=!0)}if(p&&p.type!==Le&&(!ze(l,p)||d)){const t=ut(p,u,i,n);if(ht(p,t),"out-in"===c)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,n.update()},ct(s);"in-out"===c&&l.type!==Le&&(t.delayLeave=(t,e,n)=>{const r=st(i,p);r[String(p.key)]=p,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return s}}},at=ot;function st(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function ut(t,e,n,r){const{appear:o,mode:s,persisted:u=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:d,onAfterLeave:v,onLeaveCancelled:g,onBeforeAppear:y,onAppear:m,onAfterAppear:b,onAppearCancelled:_}=e,w=String(t.key),I=st(n,t),T=(t,e)=>{t&&a(t,r,9,e)},E=(t,e)=>{const n=e[1];T(t,e),(0,i.kJ)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},S={mode:s,persisted:u,beforeEnter(e){let r=c;if(!n.isMounted){if(!o)return;r=y||c}e._leaveCb&&e._leaveCb(!0);const i=I[w];i&&ze(t,i)&&i.el._leaveCb&&i.el._leaveCb(),T(r,[e])},enter(t){let e=l,r=h,i=f;if(!n.isMounted){if(!o)return;e=m||l,r=b||h,i=_||f}let a=!1;const s=t._enterCb=e=>{a||(a=!0,T(e?i:r,[t]),S.delayedLeave&&S.delayedLeave(),t._enterCb=void 0)};e?E(e,[t,s]):s()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();T(p,[e]);let o=!1;const a=e._leaveCb=n=>{o||(o=!0,r(),T(n?g:v,[e]),e._leaveCb=void 0,I[i]===t&&delete I[i])};I[i]=t,d?E(d,[e,a]):a()},clone(t){return ut(t,e,n,r)}};return S}function ct(t){if(vt(t))return t=en(t),t.children=null,t}function lt(t){return vt(t)?t.children?t.children[0]:void 0:t}function ht(t,e){6&t.shapeFlag&&t.component?ht(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ft(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let a=t[o];const s=null==n?a.key:String(n)+String(null!=a.key?a.key:o);a.type===Oe?(128&a.patchFlag&&i++,r=r.concat(ft(a.children,e,s))):(e||a.type!==Le)&&r.push(null!=s?en(a,{key:s}):a)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function pt(t){return(0,i.mf)(t)?{setup:t,name:t.name}:t}const dt=t=>!!t.type.__asyncLoader;const vt=t=>t.type.__isKeepAlive;RegExp,RegExp;function gt(t,e){return(0,i.kJ)(t)?t.some((t=>gt(t,e))):(0,i.HD)(t)?t.split(",").includes(e):!!t.test&&t.test(e)}function yt(t,e){bt(t,"a",e)}function mt(t,e){bt(t,"da",e)}function bt(t,e,n=dn){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(Tt(e,r,n),n){let t=n.parent;while(t&&t.parent)vt(t.parent.vnode)&&_t(r,e,n,t),t=t.parent}}function _t(t,e,n,r){const o=Tt(e,t,r,!0);Pt((()=>{(0,i.Od)(r[e],o)}),n)}function wt(t){let e=t.shapeFlag;256&e&&(e-=256),512&e&&(e-=512),t.shapeFlag=e}function It(t){return 128&t.shapeFlag?t.ssContent:t}function Tt(t,e,n=dn,i=!1){if(n){const o=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...i)=>{if(n.isUnmounted)return;(0,r.Jd)(),gn(n);const o=a(e,n,t,i);return yn(),(0,r.lk)(),o});return i?o.unshift(s):o.push(s),s}}const Et=t=>(e,n=dn)=>(!wn||"sp"===t)&&Tt(t,e,n),St=Et("bm"),Ct=Et("m"),kt=Et("bu"),At=Et("u"),Nt=Et("bum"),Pt=Et("um"),Rt=Et("sp"),xt=Et("rtg"),Ot=Et("rtc");function Dt(t,e=dn){Tt("ec",t,e)}function Lt(t,e){const n=F;if(null===n)return t;const r=An(n)||n.proxy,o=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[t,n,s,u=i.kT]=e[a];(0,i.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&nt(n),o.push({dir:t,instance:r,value:n,oldValue:void 0,arg:s,modifiers:u})}return t}function Mt(t,e,n,i){const o=t.dirs,s=e&&e.dirs;for(let u=0;u<o.length;u++){const c=o[u];s&&(c.oldValue=s[u].value);let l=c.dir[i];l&&((0,r.Jd)(),a(l,n,8,[t.el,c,t,e]),(0,r.lk)())}}const Ft="components";function jt(t,e){return qt(Ft,t,!0,e)||t}const Ut=Symbol();function qt(t,e,n=!0,r=!1){const o=F||dn;if(o){const n=o.type;if(t===Ft){const t=Nn(n);if(t&&(t===e||t===(0,i._A)(e)||t===(0,i.kC)((0,i._A)(e))))return n}const a=Vt(o[t]||n[t],e)||Vt(o.appContext[t],e);return!a&&r?n:a}}function Vt(t,e){return t&&(t[e]||t[(0,i._A)(e)]||t[(0,i.kC)((0,i._A)(e))])}const Bt=t=>t?mn(t)?An(t)||t.proxy:Bt(t.parent):null,Kt=(0,i.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bt(t.parent),$root:t=>Bt(t.root),$emit:t=>t.emit,$options:t=>Yt(t),$forceUpdate:t=>t.f||(t.f=()=>E(t.update)),$nextTick:t=>t.n||(t.n=I.bind(t.proxy)),$watch:t=>tt.bind(t)}),Wt={get({_:t},e){const{ctx:n,setupState:o,data:a,props:s,accessCache:u,type:c,appContext:l}=t;let h;if("$"!==e[0]){const r=u[e];if(void 0!==r)switch(r){case 1:return o[e];case 2:return a[e];case 4:return n[e];case 3:return s[e]}else{if(o!==i.kT&&(0,i.RI)(o,e))return u[e]=1,o[e];if(a!==i.kT&&(0,i.RI)(a,e))return u[e]=2,a[e];if((h=t.propsOptions[0])&&(0,i.RI)(h,e))return u[e]=3,s[e];if(n!==i.kT&&(0,i.RI)(n,e))return u[e]=4,n[e];Ht&&(u[e]=0)}}const f=Kt[e];let p,d;return f?("$attrs"===e&&(0,r.j)(t,"get",e),f(t)):(p=c.__cssModules)&&(p=p[e])?p:n!==i.kT&&(0,i.RI)(n,e)?(u[e]=4,n[e]):(d=l.config.globalProperties,(0,i.RI)(d,e)?d[e]:void 0)},set({_:t},e,n){const{data:r,setupState:o,ctx:a}=t;return o!==i.kT&&(0,i.RI)(o,e)?(o[e]=n,!0):r!==i.kT&&(0,i.RI)(r,e)?(r[e]=n,!0):!(0,i.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(a[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:a}},s){let u;return!!n[s]||t!==i.kT&&(0,i.RI)(t,s)||e!==i.kT&&(0,i.RI)(e,s)||(u=a[0])&&(0,i.RI)(u,s)||(0,i.RI)(r,s)||(0,i.RI)(Kt,s)||(0,i.RI)(o.config.globalProperties,s)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,i.RI)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let Ht=!0;function Gt(t){const e=Yt(t),n=t.proxy,o=t.ctx;Ht=!1,e.beforeCreate&&Qt(e.beforeCreate,t,"bc");const{data:a,computed:s,methods:u,watch:c,provide:l,inject:h,created:f,beforeMount:p,mounted:d,beforeUpdate:v,updated:g,activated:y,deactivated:m,beforeDestroy:b,beforeUnmount:_,destroyed:w,unmounted:I,render:T,renderTracked:E,renderTriggered:S,errorCaptured:C,serverPrefetch:k,expose:A,inheritAttrs:N,components:P,directives:R,filters:x}=e,O=null;if(h&&zt(h,o,O,t.appContext.config.unwrapInjectedRef),u)for(const r in u){const t=u[r];(0,i.mf)(t)&&(o[r]=t.bind(n))}if(a){0;const e=a.call(n,n);0,(0,i.Kn)(e)&&(t.data=(0,r.qj)(e))}if(Ht=!0,s)for(const r in s){const t=s[r],e=(0,i.mf)(t)?t.bind(n,n):(0,i.mf)(t.get)?t.get.bind(n,n):i.dG;0;const a=!(0,i.mf)(t)&&(0,i.mf)(t.set)?t.set.bind(n):i.dG,u=Rn({get:e,set:a});Object.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>u.value,set:t=>u.value=t})}if(c)for(const r in c)$t(c[r],o,n,r);if(l){const t=(0,i.mf)(l)?l.call(n):l;Reflect.ownKeys(t).forEach((e=>{$(e,t[e])}))}function D(t,e){(0,i.kJ)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(f&&Qt(f,t,"c"),D(St,p),D(Ct,d),D(kt,v),D(At,g),D(yt,y),D(mt,m),D(Dt,C),D(Ot,E),D(xt,S),D(Nt,_),D(Pt,I),D(Rt,k),(0,i.kJ)(A))if(A.length){const e=t.exposed||(t.exposed={});A.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});T&&t.render===i.dG&&(t.render=T),null!=N&&(t.inheritAttrs=N),P&&(t.components=P),R&&(t.directives=R)}function zt(t,e,n=i.dG,o=!1){(0,i.kJ)(t)&&(t=ee(t));for(const a in t){const n=t[a];let s;s=(0,i.Kn)(n)?"default"in n?Y(n.from||a,n.default,!0):Y(n.from||a):Y(n),(0,r.dq)(s)&&o?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>s.value,set:t=>s.value=t}):e[a]=s}}function Qt(t,e,n){a((0,i.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function $t(t,e,n,r){const o=r.includes(".")?et(n,r):()=>n[r];if((0,i.HD)(t)){const n=e[t];(0,i.mf)(n)&&J(o,n)}else if((0,i.mf)(t))J(o,t.bind(n));else if((0,i.Kn)(t))if((0,i.kJ)(t))t.forEach((t=>$t(t,e,n,r)));else{const r=(0,i.mf)(t.handler)?t.handler.bind(n):e[t.handler];(0,i.mf)(r)&&J(o,r,t)}else 0}function Yt(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,s=o.get(e);let u;return s?u=s:i.length||n||r?(u={},i.length&&i.forEach((t=>Xt(u,t,a,!0))),Xt(u,e,a)):u=e,o.set(e,u),u}function Xt(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&Xt(t,o,n,!0),i&&i.forEach((e=>Xt(t,e,n,!0)));for(const a in e)if(r&&"expose"===a);else{const r=Jt[a]||n&&n[a];t[a]=r?r(t[a],e[a]):e[a]}return t}const Jt={data:Zt,props:re,emits:re,methods:re,computed:re,beforeCreate:ne,created:ne,beforeMount:ne,mounted:ne,beforeUpdate:ne,updated:ne,beforeDestroy:ne,beforeUnmount:ne,destroyed:ne,unmounted:ne,activated:ne,deactivated:ne,errorCaptured:ne,serverPrefetch:ne,components:re,directives:re,watch:ie,provide:Zt,inject:te};function Zt(t,e){return e?t?function(){return(0,i.l7)((0,i.mf)(t)?t.call(this,this):t,(0,i.mf)(e)?e.call(this,this):e)}:e:t}function te(t,e){return re(ee(t),ee(e))}function ee(t){if((0,i.kJ)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ne(t,e){return t?[...new Set([].concat(t,e))]:e}function re(t,e){return t?(0,i.l7)((0,i.l7)(Object.create(null),t),e):e}function ie(t,e){if(!t)return e;if(!e)return t;const n=(0,i.l7)(Object.create(null),t);for(const r in e)n[r]=ne(t[r],e[r]);return n}function oe(t,e,n,o=!1){const a={},s={};(0,i.Nj)(s,Qe,1),t.propsDefaults=Object.create(null),se(t,e,a,s);for(const r in t.propsOptions[0])r in a||(a[r]=void 0);n?t.props=o?a:(0,r.Um)(a):t.type.props?t.props=a:t.props=s,t.attrs=s}function ae(t,e,n,o){const{props:a,attrs:s,vnode:{patchFlag:u}}=t,c=(0,r.IU)(a),[l]=t.propsOptions;let h=!1;if(!(o||u>0)||16&u){let r;se(t,e,a,s)&&(h=!0);for(const o in c)e&&((0,i.RI)(e,o)||(r=(0,i.rs)(o))!==o&&(0,i.RI)(e,r))||(l?!n||void 0===n[o]&&void 0===n[r]||(a[o]=ue(l,c,o,void 0,t,!0)):delete a[o]);if(s!==c)for(const t in s)e&&(0,i.RI)(e,t)||(delete s[t],h=!0)}else if(8&u){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(M(t.emitsOptions,o))continue;const u=e[o];if(l)if((0,i.RI)(s,o))u!==s[o]&&(s[o]=u,h=!0);else{const e=(0,i._A)(o);a[e]=ue(l,c,e,u,t,!1)}else u!==s[o]&&(s[o]=u,h=!0)}}h&&(0,r.X$)(t,"set","$attrs")}function se(t,e,n,o){const[a,s]=t.propsOptions;let u,c=!1;if(e)for(let r in e){if((0,i.Gg)(r))continue;const l=e[r];let h;a&&(0,i.RI)(a,h=(0,i._A)(r))?s&&s.includes(h)?(u||(u={}))[h]=l:n[h]=l:M(t.emitsOptions,r)||r in o&&l===o[r]||(o[r]=l,c=!0)}if(s){const e=(0,r.IU)(n),o=u||i.kT;for(let r=0;r<s.length;r++){const u=s[r];n[u]=ue(a,e,u,o[u],t,!(0,i.RI)(o,u))}}return c}function ue(t,e,n,r,o,a){const s=t[n];if(null!=s){const t=(0,i.RI)(s,"default");if(t&&void 0===r){const t=s.default;if(s.type!==Function&&(0,i.mf)(t)){const{propsDefaults:i}=o;n in i?r=i[n]:(gn(o),r=i[n]=t.call(null,e),yn())}else r=t}s[0]&&(a&&!t?r=!1:!s[1]||""!==r&&r!==(0,i.rs)(n)||(r=!0))}return r}function ce(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const a=t.props,s={},u=[];let c=!1;if(!(0,i.mf)(t)){const r=t=>{c=!0;const[n,r]=ce(t,e,!0);(0,i.l7)(s,n),r&&u.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!a&&!c)return r.set(t,i.Z6),i.Z6;if((0,i.kJ)(a))for(let h=0;h<a.length;h++){0;const t=(0,i._A)(a[h]);le(t)&&(s[t]=i.kT)}else if(a){0;for(const t in a){const e=(0,i._A)(t);if(le(e)){const n=a[t],r=s[e]=(0,i.kJ)(n)||(0,i.mf)(n)?{type:n}:n;if(r){const t=pe(Boolean,r.type),n=pe(String,r.type);r[0]=t>-1,r[1]=n<0||t<n,(t>-1||(0,i.RI)(r,"default"))&&u.push(e)}}}}const l=[s,u];return r.set(t,l),l}function le(t){return"$"!==t[0]}function he(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function fe(t,e){return he(t)===he(e)}function pe(t,e){return(0,i.kJ)(e)?e.findIndex((e=>fe(e,t))):(0,i.mf)(e)&&fe(e,t)?0:-1}const de=t=>"_"===t[0]||"$stable"===t,ve=t=>(0,i.kJ)(t)?t.map(an):[an(t)],ge=(t,e,n)=>{if(e._n)return e;const r=q(((...t)=>ve(e(...t))),n);return r._c=!1,r},ye=(t,e,n)=>{const r=t._ctx;for(const o in t){if(de(o))continue;const n=t[o];if((0,i.mf)(n))e[o]=ge(o,n,r);else if(null!=n){0;const t=ve(n);e[o]=()=>t}}},me=(t,e)=>{const n=ve(e);t.slots.default=()=>n},be=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,r.IU)(e),(0,i.Nj)(e,"_",n)):ye(e,t.slots={})}else t.slots={},e&&me(t,e);(0,i.Nj)(t.slots,Qe,1)},_e=(t,e,n)=>{const{vnode:r,slots:o}=t;let a=!0,s=i.kT;if(32&r.shapeFlag){const t=e._;t?n&&1===t?a=!1:((0,i.l7)(o,e),n||1!==t||delete o._):(a=!e.$stable,ye(e,o)),s=e}else e&&(me(t,e),s={default:1});if(a)for(const i in o)de(i)||i in s||delete o[i]};function we(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ie=0;function Te(t,e){return function(n,r=null){(0,i.mf)(n)||(n=Object.assign({},n)),null==r||(0,i.Kn)(r)||(r=null);const o=we(),a=new Set;let s=!1;const u=o.app={_uid:Ie++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:On,get config(){return o.config},set config(t){0},use(t,...e){return a.has(t)||(t&&(0,i.mf)(t.install)?(a.add(t),t.install(u,...e)):(0,i.mf)(t)&&(a.add(t),t(u,...e))),u},mixin(t){return o.mixins.includes(t)||o.mixins.push(t),u},component(t,e){return e?(o.components[t]=e,u):o.components[t]},directive(t,e){return e?(o.directives[t]=e,u):o.directives[t]},mount(i,a,c){if(!s){0;const l=Je(n,r);return l.appContext=o,a&&e?e(l,i):t(l,i,c),s=!0,u._container=i,i.__vue_app__=u,An(l.component)||l.component.proxy}},unmount(){s&&(t(null,u._container),delete u._container.__vue_app__)},provide(t,e){return o.provides[t]=e,u}};return u}}function Ee(t,e,n,a,s=!1){if((0,i.kJ)(t))return void t.forEach(((t,r)=>Ee(t,e&&((0,i.kJ)(e)?e[r]:e),n,a,s)));if(dt(a)&&!s)return;const u=4&a.shapeFlag?An(a.component)||a.component.proxy:a.el,c=s?null:u,{i:l,r:h}=t;const f=e&&e.r,p=l.refs===i.kT?l.refs={}:l.refs,d=l.setupState;if(null!=f&&f!==h&&((0,i.HD)(f)?(p[f]=null,(0,i.RI)(d,f)&&(d[f]=null)):(0,r.dq)(f)&&(f.value=null)),(0,i.mf)(h))o(h,l,12,[c,p]);else{const e=(0,i.HD)(h),o=(0,r.dq)(h);if(e||o){const o=()=>{if(t.f){const n=e?p[h]:h.value;s?(0,i.kJ)(n)&&(0,i.Od)(n,u):(0,i.kJ)(n)?n.includes(u)||n.push(u):e?(p[h]=[u],(0,i.RI)(d,h)&&(d[h]=p[h])):(h.value=[u],t.k&&(p[t.k]=h.value))}else e?(p[h]=c,(0,i.RI)(d,h)&&(d[h]=c)):(0,r.dq)(h)&&(h.value=c,t.k&&(p[t.k]=c))};c?(o.id=-1,Ce(o,n)):o()}else 0}}function Se(){}const Ce=Q;function ke(t){return Ae(t)}function Ae(t,e){Se();const n=(0,i.E9)();n.__VUE__=!0;const{insert:o,remove:a,patchProp:s,createElement:u,createText:c,createComment:l,setText:h,setElementText:f,parentNode:p,nextSibling:d,setScopeId:v=i.dG,cloneNode:g,insertStaticContent:y}=t,m=(t,e,n,r=null,i=null,o=null,a=!1,s=null,u=!!e.dynamicChildren)=>{if(t===e)return;t&&!ze(t,e)&&(r=Z(t),Q(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=e;switch(c){case De:b(t,e,n,r);break;case Le:_(t,e,n,r);break;case Me:null==t&&w(e,n,r,a);break;case Oe:L(t,e,n,r,i,o,a,s,u);break;default:1&h?S(t,e,n,r,i,o,a,s,u):6&h?M(t,e,n,r,i,o,a,s,u):(64&h||128&h)&&c.process(t,e,n,r,i,o,a,s,u,et)}null!=l&&i&&Ee(l,t&&t.ref,o,e||t,!e)},b=(t,e,n,r)=>{if(null==t)o(e.el=c(e.children),n,r);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},_=(t,e,n,r)=>{null==t?o(e.el=l(e.children||""),n,r):e.el=t.el},w=(t,e,n,r)=>{[t.el,t.anchor]=y(t.children,e,n,r,t.el,t.anchor)},I=({el:t,anchor:e},n,r)=>{let i;while(t&&t!==e)i=d(t),o(t,n,r),t=i;o(e,n,r)},T=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=d(t),a(t),t=n;a(e)},S=(t,e,n,r,i,o,a,s,u)=>{a=a||"svg"===e.type,null==t?k(e,n,r,i,o,a,s,u):x(t,e,i,o,a,s,u)},k=(t,e,n,r,a,c,l,h)=>{let p,d;const{type:v,props:y,shapeFlag:m,transition:b,patchFlag:_,dirs:w}=t;if(t.el&&void 0!==g&&-1===_)p=t.el=g(t.el);else{if(p=t.el=u(t.type,c,y&&y.is,y),8&m?f(p,t.children):16&m&&N(t.children,p,null,r,a,c&&"foreignObject"!==v,l,h),w&&Mt(t,null,r,"created"),y){for(const e in y)"value"===e||(0,i.Gg)(e)||s(p,e,null,y[e],c,t.children,r,a,J);"value"in y&&s(p,"value",null,y.value),(d=y.onVnodeBeforeMount)&&ln(d,r,t)}A(p,t,t.scopeId,l,r)}w&&Mt(t,null,r,"beforeMount");const I=(!a||a&&!a.pendingBranch)&&b&&!b.persisted;I&&b.beforeEnter(p),o(p,e,n),((d=y&&y.onVnodeMounted)||I||w)&&Ce((()=>{d&&ln(d,r,t),I&&b.enter(p),w&&Mt(t,null,r,"mounted")}),a)},A=(t,e,n,r,i)=>{if(n&&v(t,n),r)for(let o=0;o<r.length;o++)v(t,r[o]);if(i){let n=i.subTree;if(e===n){const e=i.vnode;A(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},N=(t,e,n,r,i,o,a,s,u=0)=>{for(let c=u;c<t.length;c++){const u=t[c]=s?sn(t[c]):an(t[c]);m(null,u,e,n,r,i,o,a,s)}},x=(t,e,n,r,o,a,u)=>{const c=e.el=t.el;let{patchFlag:l,dynamicChildren:h,dirs:p}=e;l|=16&t.patchFlag;const d=t.props||i.kT,v=e.props||i.kT;let g;n&&Ne(n,!1),(g=v.onVnodeBeforeUpdate)&&ln(g,n,e,t),p&&Mt(e,t,n,"beforeUpdate"),n&&Ne(n,!0);const y=o&&"foreignObject"!==e.type;if(h?O(t.dynamicChildren,h,c,n,r,y,a):u||B(t,e,c,null,n,r,y,a,!1),l>0){if(16&l)D(c,e,d,v,n,r,o);else if(2&l&&d.class!==v.class&&s(c,"class",null,v.class,o),4&l&&s(c,"style",d.style,v.style,o),8&l){const i=e.dynamicProps;for(let e=0;e<i.length;e++){const a=i[e],u=d[a],l=v[a];l===u&&"value"!==a||s(c,a,u,l,o,t.children,n,r,J)}}1&l&&t.children!==e.children&&f(c,e.children)}else u||null!=h||D(c,e,d,v,n,r,o);((g=v.onVnodeUpdated)||p)&&Ce((()=>{g&&ln(g,n,e,t),p&&Mt(e,t,n,"updated")}),r)},O=(t,e,n,r,i,o,a)=>{for(let s=0;s<e.length;s++){const u=t[s],c=e[s],l=u.el&&(u.type===Oe||!ze(u,c)||70&u.shapeFlag)?p(u.el):n;m(u,c,l,null,r,i,o,a,!0)}},D=(t,e,n,r,o,a,u)=>{if(n!==r){for(const c in r){if((0,i.Gg)(c))continue;const l=r[c],h=n[c];l!==h&&"value"!==c&&s(t,c,h,l,u,e.children,o,a,J)}if(n!==i.kT)for(const c in n)(0,i.Gg)(c)||c in r||s(t,c,n[c],null,u,e.children,o,a,J);"value"in r&&s(t,"value",n.value,r.value)}},L=(t,e,n,r,i,a,s,u,l)=>{const h=e.el=t?t.el:c(""),f=e.anchor=t?t.anchor:c("");let{patchFlag:p,dynamicChildren:d,slotScopeIds:v}=e;v&&(u=u?u.concat(v):v),null==t?(o(h,n,r),o(f,n,r),N(e.children,n,f,i,a,s,u,l)):p>0&&64&p&&d&&t.dynamicChildren?(O(t.dynamicChildren,d,n,i,a,s,u),(null!=e.key||i&&e===i.subTree)&&Pe(t,e,!0)):B(t,e,n,f,i,a,s,u,l)},M=(t,e,n,r,i,o,a,s,u)=>{e.slotScopeIds=s,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,a,u):F(e,n,r,i,o,a,u):j(t,e,u)},F=(t,e,n,r,i,o,a)=>{const s=t.component=pn(t,r,i);if(vt(t)&&(s.ctx.renderer=et),In(s),s.asyncDep){if(i&&i.registerDep(s,U),!t.el){const t=s.subTree=Je(Le);_(null,t,e,n)}}else U(s,t,e,n,i,o,a)},j=(t,e,n)=>{const r=e.component=t.component;if(W(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void q(r,e,n);r.next=e,C(r.update),r.update()}else e.el=t.el,r.vnode=e},U=(t,e,n,o,a,s,u)=>{const c=()=>{if(t.isMounted){let e,{next:n,bu:r,u:o,parent:c,vnode:l}=t,h=n;0,Ne(t,!1),n?(n.el=l.el,q(t,n,u)):n=l,r&&(0,i.ir)(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&ln(e,c,n,l),Ne(t,!0);const f=V(t);0;const d=t.subTree;t.subTree=f,m(d,f,p(d.el),Z(d),t,a,s),n.el=f.el,null===h&&G(t,f.el),o&&Ce(o,a),(e=n.props&&n.props.onVnodeUpdated)&&Ce((()=>ln(e,c,n,l)),a)}else{let r;const{el:u,props:c}=e,{bm:l,m:h,parent:f}=t,p=dt(e);if(Ne(t,!1),l&&(0,i.ir)(l),!p&&(r=c&&c.onVnodeBeforeMount)&&ln(r,f,e),Ne(t,!0),u&&rt){const n=()=>{t.subTree=V(t),rt(u,t.subTree,t,a,null)};p?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const r=t.subTree=V(t);0,m(null,r,n,o,t,a,s),e.el=r.el}if(h&&Ce(h,a),!p&&(r=c&&c.onVnodeMounted)){const t=e;Ce((()=>ln(r,f,t)),a)}(256&e.shapeFlag||f&&dt(f.vnode)&&256&f.vnode.shapeFlag)&&t.a&&Ce(t.a,a),t.isMounted=!0,e=n=o=null}},l=t.effect=new r.qq(c,(()=>E(h)),t.scope),h=t.update=()=>l.run();h.id=t.uid,Ne(t,!0),h()},q=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,ae(t,e.props,i,n),_e(t,e.children,n),(0,r.Jd)(),P(void 0,t.update),(0,r.lk)()},B=(t,e,n,r,i,o,a,s,u=!1)=>{const c=t&&t.children,l=t?t.shapeFlag:0,h=e.children,{patchFlag:p,shapeFlag:d}=e;if(p>0){if(128&p)return void H(c,h,n,r,i,o,a,s,u);if(256&p)return void K(c,h,n,r,i,o,a,s,u)}8&d?(16&l&&J(c,i,o),h!==c&&f(n,h)):16&l?16&d?H(c,h,n,r,i,o,a,s,u):J(c,i,o,!0):(8&l&&f(n,""),16&d&&N(h,n,r,i,o,a,s,u))},K=(t,e,n,r,o,a,s,u,c)=>{t=t||i.Z6,e=e||i.Z6;const l=t.length,h=e.length,f=Math.min(l,h);let p;for(p=0;p<f;p++){const r=e[p]=c?sn(e[p]):an(e[p]);m(t[p],r,n,null,o,a,s,u,c)}l>h?J(t,o,a,!0,!1,f):N(e,n,r,o,a,s,u,c,f)},H=(t,e,n,r,o,a,s,u,c)=>{let l=0;const h=e.length;let f=t.length-1,p=h-1;while(l<=f&&l<=p){const r=t[l],i=e[l]=c?sn(e[l]):an(e[l]);if(!ze(r,i))break;m(r,i,n,null,o,a,s,u,c),l++}while(l<=f&&l<=p){const r=t[f],i=e[p]=c?sn(e[p]):an(e[p]);if(!ze(r,i))break;m(r,i,n,null,o,a,s,u,c),f--,p--}if(l>f){if(l<=p){const t=p+1,i=t<h?e[t].el:r;while(l<=p)m(null,e[l]=c?sn(e[l]):an(e[l]),n,i,o,a,s,u,c),l++}}else if(l>p)while(l<=f)Q(t[l],o,a,!0),l++;else{const d=l,v=l,g=new Map;for(l=v;l<=p;l++){const t=e[l]=c?sn(e[l]):an(e[l]);null!=t.key&&g.set(t.key,l)}let y,b=0;const _=p-v+1;let w=!1,I=0;const T=new Array(_);for(l=0;l<_;l++)T[l]=0;for(l=d;l<=f;l++){const r=t[l];if(b>=_){Q(r,o,a,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(y=v;y<=p;y++)if(0===T[y-v]&&ze(r,e[y])){i=y;break}void 0===i?Q(r,o,a,!0):(T[i-v]=l+1,i>=I?I=i:w=!0,m(r,e[i],n,null,o,a,s,u,c),b++)}const E=w?Re(T):i.Z6;for(y=E.length-1,l=_-1;l>=0;l--){const t=v+l,i=e[t],f=t+1<h?e[t+1].el:r;0===T[l]?m(null,i,n,f,o,a,s,u,c):w&&(y<0||l!==E[y]?z(i,n,f,2):y--)}}},z=(t,e,n,r,i=null)=>{const{el:a,type:s,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void z(t.component.subTree,e,n,r);if(128&l)return void t.suspense.move(e,n,r);if(64&l)return void s.move(t,e,n,et);if(s===Oe){o(a,e,n);for(let t=0;t<c.length;t++)z(c[t],e,n,r);return void o(t.anchor,e,n)}if(s===Me)return void I(t,e,n);const h=2!==r&&1&l&&u;if(h)if(0===r)u.beforeEnter(a),o(a,e,n),Ce((()=>u.enter(a)),i);else{const{leave:t,delayLeave:r,afterLeave:i}=u,s=()=>o(a,e,n),c=()=>{t(a,(()=>{s(),i&&i()}))};r?r(a,s,c):c()}else o(a,e,n)},Q=(t,e,n,r=!1,i=!1)=>{const{type:o,props:a,ref:s,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=s&&Ee(s,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const p=1&l&&f,d=!dt(t);let v;if(d&&(v=a&&a.onVnodeBeforeUnmount)&&ln(v,e,t),6&l)X(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Mt(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,et,r):c&&(o!==Oe||h>0&&64&h)?J(c,e,n,!1,!0):(o===Oe&&384&h||!i&&16&l)&&J(u,e,n),r&&$(t)}(d&&(v=a&&a.onVnodeUnmounted)||p)&&Ce((()=>{v&&ln(v,e,t),p&&Mt(t,null,e,"unmounted")}),n)},$=t=>{const{type:e,el:n,anchor:r,transition:i}=t;if(e===Oe)return void Y(n,r);if(e===Me)return void T(t);const o=()=>{a(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:r}=i,a=()=>e(n,o);r?r(t.el,o,a):a()}else o()},Y=(t,e)=>{let n;while(t!==e)n=d(t),a(t),t=n;a(e)},X=(t,e,n)=>{const{bum:r,scope:o,update:a,subTree:s,um:u}=t;r&&(0,i.ir)(r),o.stop(),a&&(a.active=!1,Q(s,t,e,n)),u&&Ce(u,e),Ce((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},J=(t,e,n,r=!1,i=!1,o=0)=>{for(let a=o;a<t.length;a++)Q(t[a],e,n,r,i)},Z=t=>6&t.shapeFlag?Z(t.component.subTree):128&t.shapeFlag?t.suspense.next():d(t.anchor||t.el),tt=(t,e,n)=>{null==t?e._vnode&&Q(e._vnode,null,null,!0):m(e._vnode||null,t,e,null,null,null,n),R(),e._vnode=t},et={p:m,um:Q,m:z,r:$,mt:F,mc:N,pc:B,pbc:O,n:Z,o:t};let nt,rt;return e&&([nt,rt]=e(et)),{render:tt,hydrate:nt,createApp:Te(tt,nt)}}function Ne({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Pe(t,e,n=!1){const r=t.children,o=e.children;if((0,i.kJ)(r)&&(0,i.kJ)(o))for(let i=0;i<r.length;i++){const t=r[i];let e=o[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[i]=sn(o[i]),e.el=t.el),n||Pe(t,e))}}function Re(t){const e=t.slice(),n=[0];let r,i,o,a,s;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}o=0,a=n.length-1;while(o<a)s=o+a>>1,t[n[s]]<u?o=s+1:a=s;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,a=n[o-1];while(o-- >0)n[o]=a,a=e[a];return n}const xe=t=>t.__isTeleport;const Oe=Symbol(void 0),De=Symbol(void 0),Le=Symbol(void 0),Me=Symbol(void 0),Fe=[];let je=null;function Ue(t=!1){Fe.push(je=t?null:[])}function qe(){Fe.pop(),je=Fe[Fe.length-1]||null}let Ve=1;function Be(t){Ve+=t}function Ke(t){return t.dynamicChildren=Ve>0?je||i.Z6:null,qe(),Ve>0&&je&&je.push(t),t}function We(t,e,n,r,i,o){return Ke(Xe(t,e,n,r,i,o,!0))}function He(t,e,n,r,i){return Ke(Je(t,e,n,r,i,!0))}function Ge(t){return!!t&&!0===t.__v_isVNode}function ze(t,e){return t.type===e.type&&t.key===e.key}const Qe="__vInternal",$e=({key:t})=>null!=t?t:null,Ye=({ref:t,ref_key:e,ref_for:n})=>null!=t?(0,i.HD)(t)||(0,r.dq)(t)||(0,i.mf)(t)?{i:F,r:t,k:e,f:!!n}:t:null;function Xe(t,e=null,n=null,r=0,o=null,a=(t===Oe?0:1),s=!1,u=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$e(e),ref:e&&Ye(e),scopeId:j,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null};return u?(un(c,n),128&a&&t.normalize(c)):n&&(c.shapeFlag|=(0,i.HD)(n)?8:16),Ve>0&&!s&&je&&(c.patchFlag>0||6&a)&&32!==c.patchFlag&&je.push(c),c}const Je=Ze;function Ze(t,e=null,n=null,o=0,a=null,s=!1){if(t&&t!==Ut||(t=Le),Ge(t)){const r=en(t,e,!0);return n&&un(r,n),Ve>0&&!s&&je&&(6&r.shapeFlag?je[je.indexOf(t)]=r:je.push(r)),r.patchFlag|=-2,r}if(Pn(t)&&(t=t.__vccOpts),e){e=tn(e);let{class:t,style:n}=e;t&&!(0,i.HD)(t)&&(e.class=(0,i.C_)(t)),(0,i.Kn)(n)&&((0,r.X3)(n)&&!(0,i.kJ)(n)&&(n=(0,i.l7)({},n)),e.style=(0,i.j5)(n))}const u=(0,i.HD)(t)?1:z(t)?128:xe(t)?64:(0,i.Kn)(t)?4:(0,i.mf)(t)?2:0;return Xe(t,e,n,o,a,u,s,!0)}function tn(t){return t?(0,r.X3)(t)||Qe in t?(0,i.l7)({},t):t:null}function en(t,e,n=!1){const{props:r,ref:o,patchFlag:a,children:s}=t,u=e?cn(r||{},e):r,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&$e(u),ref:e&&e.ref?n&&o?(0,i.kJ)(o)?o.concat(Ye(e)):[o,Ye(e)]:Ye(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Oe?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&en(t.ssContent),ssFallback:t.ssFallback&&en(t.ssFallback),el:t.el,anchor:t.anchor};return c}function nn(t=" ",e=0){return Je(De,null,t,e)}function rn(t,e){const n=Je(Me,null,t);return n.staticCount=e,n}function on(t="",e=!1){return e?(Ue(),He(Le,null,t)):Je(Le,null,t)}function an(t){return null==t||"boolean"===typeof t?Je(Le):(0,i.kJ)(t)?Je(Oe,null,t.slice()):"object"===typeof t?sn(t):Je(De,null,String(t))}function sn(t){return null===t.el||t.memo?t:en(t)}function un(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if((0,i.kJ)(e))n=16;else if("object"===typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),un(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||Qe in e?3===r&&F&&(1===F.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=F}}else(0,i.mf)(e)?(e={default:e,_ctx:F},n=32):(e=String(e),64&r?(n=16,e=[nn(e)]):n=8);t.children=e,t.shapeFlag|=n}function cn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=(0,i.C_)([e.class,r.class]));else if("style"===t)e.style=(0,i.j5)([e.style,r.style]);else if((0,i.F7)(t)){const n=e[t],o=r[t];!o||n===o||(0,i.kJ)(n)&&n.includes(o)||(e[t]=n?[].concat(n,o):o)}else""!==t&&(e[t]=r[t])}return e}function ln(t,e,n,r=null){a(t,e,7,[n,r])}const hn=we();let fn=0;function pn(t,e,n){const o=t.type,a=(e?e.appContext:t.appContext)||hn,s={uid:fn++,vnode:t,type:o,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ce(o,a),emitsOptions:L(o,a),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:o.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=D.bind(null,s),t.ce&&t.ce(s),s}let dn=null;const vn=()=>dn||F,gn=t=>{dn=t,t.scope.on()},yn=()=>{dn&&dn.scope.off(),dn=null};function mn(t){return 4&t.vnode.shapeFlag}let bn,_n,wn=!1;function In(t,e=!1){wn=e;const{props:n,children:r}=t.vnode,i=mn(t);oe(t,n,i,e),be(t,r);const o=i?Tn(t,e):void 0;return wn=!1,o}function Tn(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,r.Xl)(new Proxy(t.ctx,Wt));const{setup:a}=n;if(a){const n=t.setupContext=a.length>1?kn(t):null;gn(t),(0,r.Jd)();const u=o(a,t,0,[t.props,n]);if((0,r.lk)(),yn(),(0,i.tI)(u)){if(u.then(yn,yn),e)return u.then((n=>{En(t,n,e)})).catch((e=>{s(e,t,0)}));t.asyncDep=u}else En(t,u,e)}else Sn(t,e)}function En(t,e,n){(0,i.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Kn)(e)&&(t.setupState=(0,r.WL)(e)),Sn(t,n)}function Sn(t,e,n){const o=t.type;if(!t.render){if(!e&&bn&&!o.render){const e=o.template;if(e){0;const{isCustomElement:n,compilerOptions:r}=t.appContext.config,{delimiters:a,compilerOptions:s}=o,u=(0,i.l7)((0,i.l7)({isCustomElement:n,delimiters:a},r),s);o.render=bn(e,u)}}t.render=o.render||i.dG,_n&&_n(t)}gn(t),(0,r.Jd)(),Gt(t),(0,r.lk)(),yn()}function Cn(t){return new Proxy(t.attrs,{get(e,n){return(0,r.j)(t,"get","$attrs"),e[n]}})}function kn(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=Cn(t))},slots:t.slots,emit:t.emit,expose:e}}function An(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(t.exposed)),{get(e,n){return n in e?e[n]:n in Kt?Kt[n](t):void 0}}))}function Nn(t){return(0,i.mf)(t)&&t.displayName||t.name}function Pn(t){return(0,i.mf)(t)&&"__vccOpts"in t}const Rn=(t,e)=>(0,r.Fl)(t,e,wn);function xn(t,e,n){const r=arguments.length;return 2===r?(0,i.Kn)(e)&&!(0,i.kJ)(e)?Ge(e)?Je(t,null,[e]):Je(t,e):Je(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Ge(n)&&(n=[n]),Je(t,e,n))}Symbol("");const On="3.2.36"},612:function(t,e,n){"use strict";function r(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.d(e,{C_:function(){return l},DM:function(){return C},E9:function(){return z},F7:function(){return m},Gg:function(){return D},HD:function(){return A},He:function(){return H},Kn:function(){return N},NO:function(){return g},Nj:function(){return W},Od:function(){return w},PO:function(){return O},RI:function(){return T},Z6:function(){return d},_A:function(){return F},_N:function(){return S},aU:function(){return B},dG:function(){return v},e1:function(){return o},hR:function(){return V},ir:function(){return K},j5:function(){return a},kC:function(){return q},kJ:function(){return E},kT:function(){return p},l7:function(){return _},mf:function(){return k},rs:function(){return U},tI:function(){return P},tR:function(){return b},zw:function(){return h}});const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",o=r(i);function a(t){if(E(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=A(r)?c(r):a(r);if(i)for(const t in i)e[t]=i[t]}return e}return A(t)||N(t)?t:void 0}const s=/;(?![^(]*\))/g,u=/:(.+)/;function c(t){const e={};return t.split(s).forEach((t=>{if(t){const n=t.split(u);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function l(t){let e="";if(A(t))e=t;else if(E(t))for(let n=0;n<t.length;n++){const r=l(t[n]);r&&(e+=r+" ")}else if(N(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const h=t=>A(t)?t:null==t?"":E(t)||N(t)&&(t.toString===R||!k(t.toString))?JSON.stringify(t,f,2):String(t),f=(t,e)=>e&&e.__v_isRef?f(t,e.value):S(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:C(e)?{[`Set(${e.size})`]:[...e.values()]}:!N(e)||E(e)||O(e)?e:String(e),p={},d=[],v=()=>{},g=()=>!1,y=/^on[^a-z]/,m=t=>y.test(t),b=t=>t.startsWith("onUpdate:"),_=Object.assign,w=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},I=Object.prototype.hasOwnProperty,T=(t,e)=>I.call(t,e),E=Array.isArray,S=t=>"[object Map]"===x(t),C=t=>"[object Set]"===x(t),k=t=>"function"===typeof t,A=t=>"string"===typeof t,N=t=>null!==t&&"object"===typeof t,P=t=>N(t)&&k(t.then)&&k(t.catch),R=Object.prototype.toString,x=t=>R.call(t),O=t=>"[object Object]"===x(t),D=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),L=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},M=/-(\w)/g,F=L((t=>t.replace(M,((t,e)=>e?e.toUpperCase():"")))),j=/\B([A-Z])/g,U=L((t=>t.replace(j,"-$1").toLowerCase())),q=L((t=>t.charAt(0).toUpperCase()+t.slice(1))),V=L((t=>t?`on${q(t)}`:"")),B=(t,e)=>!Object.is(t,e),K=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},W=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},H=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let G;const z=()=>G||(G="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},61:function(t,e,n){"use strict";n.d(e,{ri:function(){return Ut},bM:function(){return Pt},nr:function(){return Nt},iM:function(){return Lt}});var r=n(612),i=n(252);n(931);function o(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const a="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s=o(a);function u(t){return!!t||""===t}function c(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=l(t[r],e[r]);return n}function l(t,e){if(t===e)return!0;let n=m(t),r=m(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=w(t),r=w(e),n||r)return t===e;if(n=g(t),r=g(e),n||r)return!(!n||!r)&&c(t,e);if(n=I(t),r=I(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!l(t[n],e[n]))return!1}}return String(t)===String(e)}function h(t,e){return t.findIndex((t=>l(t,e)))}const f=/^on[^a-z]/,p=t=>f.test(t),d=t=>t.startsWith("onUpdate:"),v=Object.assign,g=(Object.prototype.hasOwnProperty,Array.isArray),y=t=>"[object Set]"===E(t),m=t=>"[object Date]"===E(t),b=t=>"function"===typeof t,_=t=>"string"===typeof t,w=t=>"symbol"===typeof t,I=t=>null!==t&&"object"===typeof t,T=Object.prototype.toString,E=t=>T.call(t),S=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},C=/-(\w)/g,k=(S((t=>t.replace(C,((t,e)=>e?e.toUpperCase():"")))),/\B([A-Z])/g),A=S((t=>t.replace(k,"-$1").toLowerCase())),N=S((t=>t.charAt(0).toUpperCase()+t.slice(1))),P=(S((t=>t?`on${N(t)}`:"")),(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)}),R=t=>{const e=parseFloat(t);return isNaN(e)?t:e};const x="http://www.w3.org/2000/svg",O="undefined"!==typeof document?document:null,D=O&&O.createElement("template"),L={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?O.createElementNS(x,t):O.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>O.createTextNode(t),createComment:t=>O.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>O.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r,i,o){const a=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),n),i===o||!(i=i.nextSibling))break}else{D.innerHTML=r?`<svg>${t}</svg>`:t;const i=D.content;if(r){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function M(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function F(t,e,n){const r=t.style,i=_(n);if(n&&!i){for(const t in n)U(r,t,n[t]);if(e&&!_(e))for(const t in e)null==n[t]&&U(r,t,"")}else{const o=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=o)}}const j=/\s*!important$/;function U(t,e,n){if(g(n))n.forEach((n=>U(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=B(t,e);j.test(n)?t.setProperty(A(r),n.replace(j,""),"important"):t[r]=n}}const q=["Webkit","Moz","ms"],V={};function B(t,e){const n=V[e];if(n)return n;let i=(0,r._A)(e);if("filter"!==i&&i in t)return V[e]=i;i=N(i);for(let r=0;r<q.length;r++){const n=q[r]+i;if(n in t)return V[e]=n}return e}const K="http://www.w3.org/1999/xlink";function W(t,e,n,r,i){if(r&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(K,e.slice(6,e.length)):t.setAttributeNS(K,e,n);else{const r=s(e);null==n||r&&!u(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function H(t,e,n,r,i,o,a){if("innerHTML"===e||"textContent"===e)return r&&a(r,i,o),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName&&!t.tagName.includes("-")){t._value=n;const r=null==n?"":n;return t.value===r&&"OPTION"!==t.tagName||(t.value=r),void(null==n&&t.removeAttribute(e))}let s=!1;if(""===n||null==n){const r=typeof t[e];"boolean"===r?n=u(n):null==n&&"string"===r?(n="",s=!0):"number"===r&&(n=0,s=!0)}try{t[e]=n}catch(c){0}s&&t.removeAttribute(e)}const[G,z]=(()=>{let t=Date.now,e=!1;if("undefined"!==typeof window){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let Q=0;const $=Promise.resolve(),Y=()=>{Q=0},X=()=>Q||($.then(Y),Q=G());function J(t,e,n,r){t.addEventListener(e,n,r)}function Z(t,e,n,r){t.removeEventListener(e,n,r)}function tt(t,e,n,r,i=null){const o=t._vei||(t._vei={}),a=o[e];if(r&&a)a.value=r;else{const[n,s]=nt(e);if(r){const a=o[e]=rt(r,i);J(t,n,a,s)}else a&&(Z(t,n,a,s),o[e]=void 0)}}const et=/(?:Once|Passive|Capture)$/;function nt(t){let e;if(et.test(t)){let n;e={};while(n=t.match(et))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[A(t.slice(2)),e]}function rt(t,e){const n=t=>{const r=t.timeStamp||G();(z||r>=n.attached-1)&&(0,i.$d)(it(t,n.value),e,5,[t])};return n.value=t,n.attached=X(),n}function it(t,e){if(g(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const ot=/^on[a-z]/,at=(t,e,n,r,i=!1,o,a,s,u)=>{"class"===e?M(t,r,i):"style"===e?F(t,n,r):p(e)?d(e)||tt(t,e,n,r,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):st(t,e,r,i))?H(t,e,r,o,a,s,u):("true-value"===e?t._trueValue=r:"false-value"===e&&(t._falseValue=r),W(t,e,r,i))};function st(t,e,n,r){return r?"innerHTML"===e||"textContent"===e||!!(e in t&&ot.test(e)&&b(n)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!ot.test(e)||!_(n))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const ut="transition",ct="animation",lt=(t,{slots:e})=>(0,i.h)(i.P$,dt(t),e);lt.displayName="Transition";const ht={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ft=(lt.props=v({},i.P$.props,ht),(t,e=[])=>{g(t)?t.forEach((t=>t(...e))):t&&t(...e)}),pt=t=>!!t&&(g(t)?t.some((t=>t.length>1)):t.length>1);function dt(t){const e={};for(const v in t)v in ht||(e[v]=t[v]);if(!1===t.css)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:c=a,appearToClass:l=s,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,d=vt(i),g=d&&d[0],y=d&&d[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:_,onLeave:w,onLeaveCancelled:I,onBeforeAppear:T=m,onAppear:E=b,onAppearCancelled:S=_}=e,C=(t,e,n)=>{mt(t,e?l:s),mt(t,e?c:a),n&&n()},k=(t,e)=>{t._isLeaving=!1,mt(t,h),mt(t,p),mt(t,f),e&&e()},A=t=>(e,n)=>{const i=t?E:b,a=()=>C(e,t,n);ft(i,[e,a]),bt((()=>{mt(e,t?u:o),yt(e,t?l:s),pt(i)||wt(e,r,g,a)}))};return v(e,{onBeforeEnter(t){ft(m,[t]),yt(t,o),yt(t,a)},onBeforeAppear(t){ft(T,[t]),yt(t,u),yt(t,c)},onEnter:A(!1),onAppear:A(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>k(t,e);yt(t,h),St(),yt(t,f),bt((()=>{t._isLeaving&&(mt(t,h),yt(t,p),pt(w)||wt(t,r,y,n))})),ft(w,[t,n])},onEnterCancelled(t){C(t,!1),ft(_,[t])},onAppearCancelled(t){C(t,!0),ft(S,[t])},onLeaveCancelled(t){k(t),ft(I,[t])}})}function vt(t){if(null==t)return null;if(I(t))return[gt(t.enter),gt(t.leave)];{const e=gt(t);return[e,e]}}function gt(t){const e=R(t);return e}function yt(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function mt(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function bt(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let _t=0;function wt(t,e,n,r){const i=t._endId=++_t,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:u}=It(t,e);if(!a)return r();const c=a+"end";let l=0;const h=()=>{t.removeEventListener(c,f),o()},f=e=>{e.target===t&&++l>=u&&h()};setTimeout((()=>{l<u&&h()}),s+1),t.addEventListener(c,f)}function It(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r(ut+"Delay"),o=r(ut+"Duration"),a=Tt(i,o),s=r(ct+"Delay"),u=r(ct+"Duration"),c=Tt(s,u);let l=null,h=0,f=0;e===ut?a>0&&(l=ut,h=a,f=o.length):e===ct?c>0&&(l=ct,h=c,f=u.length):(h=Math.max(a,c),l=h>0?a>c?ut:ct:null,f=l?l===ut?o.length:u.length:0);const p=l===ut&&/\b(transform|all)(,|$)/.test(n[ut+"Property"]);return{type:l,timeout:h,propCount:f,hasTransform:p}}function Tt(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>Et(e)+Et(t[n]))))}function Et(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function St(){return document.body.offsetHeight}new WeakMap,new WeakMap;const Ct=t=>{const e=t.props["onUpdate:modelValue"]||!1;return g(e)?t=>P(e,t):e};function kt(t){t.target.composing=!0}function At(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Nt={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=Ct(i);const o=r||i.props&&"number"===i.props.type;J(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n&&(r=r.trim()),o&&(r=R(r)),t._assign(r)})),n&&J(t,"change",(()=>{t.value=t.value.trim()})),e||(J(t,"compositionstart",kt),J(t,"compositionend",At),J(t,"change",At))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},o){if(t._assign=Ct(o),t.composing)return;if(document.activeElement===t&&"range"!==t.type){if(n)return;if(r&&t.value.trim()===e)return;if((i||"number"===t.type)&&R(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}};const Pt={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=y(e);J(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?R(xt(t)):xt(t)));t._assign(t.multiple?i?new Set(e):e:e[0])})),t._assign=Ct(r)},mounted(t,{value:e}){Rt(t,e)},beforeUpdate(t,e,n){t._assign=Ct(n)},updated(t,{value:e}){Rt(t,e)}};function Rt(t,e){const n=t.multiple;if(!n||g(e)||y(e)){for(let r=0,i=t.options.length;r<i;r++){const i=t.options[r],o=xt(i);if(n)g(e)?i.selected=h(e,o)>-1:i.selected=e.has(o);else if(l(xt(i),e))return void(t.selectedIndex!==r&&(t.selectedIndex=r))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function xt(t){return"_value"in t?t._value:t.value}const Ot=["ctrl","shift","alt","meta"],Dt={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>Ot.some((n=>t[`${n}Key`]&&!e.includes(n)))},Lt=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=Dt[e[t]];if(r&&r(n,e))return}return t(n,...r)};const Mt=v({patchProp:at},L);let Ft;function jt(){return Ft||(Ft=(0,i.Us)(Mt))}const Ut=(...t)=>{const e=jt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const r=qt(t);if(!r)return;const i=e._component;b(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function qt(t){if(_(t)){const e=document.querySelector(t);return e}return t}},689:function(t,e,n){"use strict";n.d(e,{Z:function(){return r["default"]}});var r=n(62);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function i(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}var o=i(this);function a(t,n){if(n){var r=o;t=t.split(".");for(var i=0;i<t.length-1;i++){var a=t[i];a in r||(r[a]={}),r=r[a]}t=t[t.length-1],i=r[t],n=n(i),n!=i&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}function s(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function u(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:s(t)}}a("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var i=o.setTimeout;n.prototype.c=function(t){i(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(_){this.f(_)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(_){n.reject(_)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(rr){o(rr)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=u(t),o=i.next();!o.done;o=i.next())r(o.value).Ra(e,n)}))},e.all=function(t){var n=u(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,s--,0==s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Ra(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,f=null;function p(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&h.test(t)?t:""}function d(){}function v(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function g(t){var e=v(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){return"function"==v(t)}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function b(t){return Object.prototype.hasOwnProperty.call(t,w)&&t[w]||(t[w]=++I)}var w="closure_uid_"+(1e9*Math.random()>>>0),I=0;function T(t,e,n){return t.call.apply(t.bind,arguments)}function E(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function S(t,e,n){return S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T:E,S.apply(null,arguments)}function C(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var k=Date.now;function A(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function N(t){return t}function P(t,e,n){this.code=O+t,this.message=e||D[t]||"",this.a=n||null}function R(t){var e=t&&t.code;return e?new P(e.substring(O.length),t.message,t.serverResponse):null}A(P,Error),P.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},P.prototype.toJSON=function(){return this.w()};var x,O="auth/",D={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},L={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function M(t){for(var e in L)if(L[e].id===t)return t=L[e],{firebaseEndpoint:t.Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function F(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function j(t){if(Error.captureStackTrace)Error.captureStackTrace(this,j);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function U(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");j.call(this,n+t[r])}function q(t,e){throw new U("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function V(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function B(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function K(){this.b=this.a=null}x=M("__EID__")?"__EID__":void 0,A(j,Error),j.prototype.name="CustomError",A(U,j),U.prototype.name="AssertionError",V.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var W=new V((function(){return new G}),(function(t){t.reset()}));function H(){var t=xe,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function G(){this.next=this.b=this.a=null}K.prototype.add=function(t,e){var n=W.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},G.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},G.prototype.reset=function(){this.next=this.b=this.a=null};var z=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function $(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}var Y=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},X=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},J=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Z(t){t:{for(var e=ss,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function tt(t,e){return 0<=z(t,e)}function et(t,e){var n;return e=z(t,e),(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function nt(t,e){$(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function rt(t){return Array.prototype.concat.apply([],arguments)}function it(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var ot,at=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},st=/&/g,ut=/</g,ct=/>/g,lt=/"/g,ht=/'/g,ft=/\x00/g,pt=/[\x00&<>"']/;function dt(t,e){return-1!=t.indexOf(e)}function vt(t,e){return t<e?-1:t>e?1:0}t:{var gt=l.navigator;if(gt){var yt=gt.userAgent;if(yt){ot=yt;break t}}ot=""}function mt(t){return dt(ot,t)}function bt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function _t(t){for(var e in t)return!1;return!0}function wt(t){var e,n={};for(e in t)n[e]=t[e];return n}var It="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<It.length;o++)n=It[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Et(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||l,r.Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(m(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;q("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function St(t,e){this.a=t===Nt&&e||"",this.b=At}function Ct(t){return t instanceof St&&t.constructor===St&&t.b===At?t.a:(q("expected object of type Const, got '"+t+"'"),"type_error:Const")}St.prototype.ta=!0,St.prototype.sa=function(){return this.a},St.prototype.toString=function(){return"Const{"+this.a+"}"};var kt,At={},Nt={};function Pt(){if(void 0===kt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:N,createScript:N,createScriptURL:N})}catch(n){l.console&&l.console.error(n.message)}kt=t}else kt=t}return kt}function Rt(t,e){this.a=e===Mt?t:""}function xt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(q("expected object of type TrustedResourceUrl, got '"+t+"' of type "+v(t)),"type_error:TrustedResourceUrl")}function Ot(t,e){var n=Ct(t);if(!Lt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Dt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return t=e[r],t instanceof St?Ct(t):encodeURIComponent(String(t))})),Ft(t)}Rt.prototype.ta=!0,Rt.prototype.sa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Dt=/%{(\w+)}/g,Lt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Mt={};function Ft(t){var e=Pt();return t=e?e.createScriptURL(t):t,new Rt(t,Mt)}function jt(t,e){this.a=e===Ht?t:""}function Ut(t){return t instanceof jt&&t.constructor===jt?t.a:(q("expected object of type SafeUrl, got '"+t+"' of type "+v(t)),"type_error:SafeUrl")}jt.prototype.ta=!0,jt.prototype.sa=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var qt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Vt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Bt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Kt(t){if(t instanceof jt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Bt.test(t))t=new jt(t,Ht);else{t=String(t),t=t.replace(/(%0A|%0D)/g,"");var e=t.match(Vt);t=e&&qt.test(e[1])?new jt(t,Ht):null}return t}function Wt(t){return t instanceof jt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Bt.test(t)||(t="about:invalid#zClosurez"),new jt(t,Ht))}var Ht={},Gt=new jt("about:invalid#zClosurez",Ht);function zt(t,e,n){this.a=n===$t?t:""}function Qt(t){return t instanceof zt&&t.constructor===zt?t.a:(q("expected object of type SafeHtml, got '"+t+"' of type "+v(t)),"type_error:SafeHtml")}zt.prototype.ta=!0,zt.prototype.sa=function(){return this.a.toString()},zt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var $t={};function Yt(t,e){Et(t,"HTMLScriptElement"),t.src=xt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=l?e=p(e.document):(null===f&&(f=p(l.document)),e=f),e&&t.setAttribute("nonce",e)}function Xt(t,e,n,r){return t=t instanceof jt?t:Wt(t),e=e||l,n=n instanceof St?Ct(n):n||"",e.open(Ut(t),n,r,void 0)}function Jt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Zt(t){return pt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(st,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ut,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ct,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(lt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ht,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ft,"&#0;"))),t}function te(t){return te[" "](t),t}function ee(t,e){var n=de;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}te[" "]=d;var ne,re=mt("Opera"),ie=mt("Trident")||mt("MSIE"),oe=mt("Edge"),ae=oe||ie,se=mt("Gecko")&&!(dt(ot.toLowerCase(),"webkit")&&!mt("Edge"))&&!(mt("Trident")||mt("MSIE"))&&!mt("Edge"),ue=dt(ot.toLowerCase(),"webkit")&&!mt("Edge");function ce(){var t=l.document;return t?t.documentMode:void 0}t:{var le="",he=function(){var t=ot;return se?/rv:([^\);]+)(\)|;)/.exec(t):oe?/Edge\/([\d\.]+)/.exec(t):ie?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ue?/WebKit\/(\S+)/.exec(t):re?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(he&&(le=he?he[1]:""),ie){var fe=ce();if(null!=fe&&fe>parseFloat(le)){ne=String(fe);break t}}ne=le}var pe,de={};function ve(t){return ee(t,(function(){for(var e=0,n=at(String(ne)).split("."),r=at(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=vt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||vt(0==a[2].length,0==s[2].length)||vt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(l.document&&ie){var ge=ce();pe=ge||(parseInt(ne,10)||void 0)}else pe=void 0;var ye=pe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(nd){}var me=!ie||9<=Number(ye);function be(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function _e(t,e){bt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Te.hasOwnProperty(n)?t.setAttribute(Te[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var we,Ie,Te={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Ee(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!me&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Zt(a.name),'"'),a.type){o.push(' type="',Zt(a.type),'"');var s={};Tt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=Ce(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):_e(o,a)),2<r.length&&Se(i,o,r),o}function Se(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!g(o)||m(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(m(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(y(o)){a="function"==typeof o.item;break t}}a=!1}Q(a?it(o):o,r)}}}function Ce(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ke(t){l.setTimeout((function(){throw t}),0)}function Ae(){var t=l.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!mt("Presto")&&(t=function(){var t=Ce(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=S((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!mt("Trident")&&!mt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){l.setTimeout(t,0)}}function Ne(t,e){Ie||Pe(),Re||(Ie(),Re=!0),xe.add(t,e)}function Pe(){if(l.Promise&&l.Promise.resolve){var t=l.Promise.resolve(void 0);Ie=function(){t.then(Oe)}}else Ie=function(){var t=Oe;!y(l.setImmediate)||l.Window&&l.Window.prototype&&!mt("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(we||(we=Ae()),we(t)):l.setImmediate(t)}}var Re=!1,xe=new K;function Oe(){for(var t;t=H();){try{t.a.call(t.b)}catch(e){ke(e)}B(W,t)}Re=!1}function De(t,e){if(this.a=Le,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=d)try{var n=this;t.call(e,(function(t){$e(n,Me,t)}),(function(t){if(!(t instanceof on))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}$e(n,Fe,t)}))}catch(r){$e(this,Fe,r)}}var Le=0,Me=2,Fe=3;function je(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}je.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ue=new V((function(){return new je}),(function(t){t.reset()}));function qe(t,e,n){var r=Ue.get();return r.g=t,r.b=e,r.f=n,r}function Ve(t){if(t instanceof De)return t;var e=new De(d);return $e(e,Me,t),e}function Be(t){return new De((function(e,n){n(t)}))}function Ke(t,e,n){Ye(t,e,n,null)||Ne(C(e,t))}function We(t){return new De((function(e,n){var r=t.length,i=[];if(r)for(var o,a=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},u=0;u<t.length;u++)o=t[u],Ke(o,C(a,u),s);else e(i)}))}function He(t){return new De((function(e){var n=t.length,r=[];if(n)for(var i,o=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},a=0;a<t.length;a++)i=t[a],Ke(i,C(o,a,!0),C(o,a,!1));else e(r)}))}function Ge(t,e){if(t.a==Le)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Le&&1==r?Ge(n,e):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):Ze(n),tn(n,i,Fe,e)))}t.c=null}else $e(t,Fe,e)}function ze(t,e){t.b||t.a!=Me&&t.a!=Fe||Je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Qe(t,e,n,r){var i=qe(null,null,null);return i.a=new De((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(_){o(_)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof on?o(e):t(i)}catch(_){o(_)}}:o})),i.a.c=t,ze(t,i),i.a}function $e(t,e,n){t.a==Le&&(t===n&&(e=Fe,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ye(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Je(t),e!=Fe||n instanceof on||nn(t,n)))}function Ye(t,e,n,r){if(t instanceof De)return ze(t,qe(e||d,n||null,r)),!0;if(F(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(y(i))return Xe(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Xe(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(u){o(u)}}function Je(t){t.h||(t.h=!0,Ne(t.gc,t))}function Ze(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function tn(t,e,n,r){if(n==Fe&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,en(e,n,r);else try{e.c?e.g.call(e.f):en(e,n,r)}catch(i){rn.call(null,i)}B(Ue,e)}function en(t,e,n){e==Me?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function nn(t,e){t.g=!0,Ne((function(){t.g&&rn.call(null,e)}))}De.prototype.then=function(t,e,n){return Qe(this,y(t)?t:null,y(e)?e:null,n)},De.prototype.$goog_Thenable=!0,t=De.prototype,t.oa=function(t,e){return t=qe(t,t,e),t.c=!0,ze(this,t),this},t.o=function(t,e){return Qe(this,null,t,e)},t.cancel=function(t){if(this.a==Le){var e=new on(t);Ne((function(){Ge(this,e)}),this)}},t.$c=function(t){this.a=Le,$e(this,Me,t)},t.ad=function(t){this.a=Le,$e(this,Fe,t)},t.gc=function(){for(var t;t=Ze(this);)tn(this,t,this.a,this.i);this.h=!1};var rn=ke;function on(t){j.call(this,t)}function an(){0!=sn&&(un[b(this)]=this),this.ya=this.ya,this.pa=this.pa}A(on,j),on.prototype.name="cancel";var sn=0,un={};function cn(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=sn)){var e=b(t);if(0!=sn&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete un[e]}}an.prototype.ya=!1,an.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var ln=Object.freeze||function(t){return t},hn=!ie||9<=Number(ye),fn=ie&&!ve("9"),pn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",d,e),l.removeEventListener("test",d,e)}catch(n){}return t}();function dn(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function vn(t,e){if(dn.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(se){t:{try{te(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:gn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}dn.prototype.preventDefault=function(){this.defaultPrevented=!0},A(vn,dn);var gn=ln({2:"touch",3:"pen",4:"mouse"});vn.prototype.preventDefault=function(){vn.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,fn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},vn.prototype.g=function(){return this.a};var yn="closure_listenable_"+(1e6*Math.random()|0),mn=0;function bn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++mn,this.wa=this.Qa=!1}function _n(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function wn(t){this.src=t,this.a={},this.b=0}function In(t,e){var n=e.type;n in t.a&&et(t.a[n],e)&&(_n(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Tn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}wn.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var a=Tn(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):(e=new bn(e,this.src,o,!!r,i),e.Qa=n,t.push(e)),e};var En="closure_lm_"+(1e6*Math.random()|0),Sn={};function Cn(t,e,n,r,i){if(r&&r.once)Nn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Cn(t,e[o],n,r,i);else n=jn(n),t&&t[yn]?qn(t,e,n,m(r)?!!r.capture:!!r,i):kn(t,e,n,!1,r,i)}function kn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=Mn(t);if(s||(t[En]=s=new wn(t)),n=s.add(e,n,r,a,o),!n.proxy){if(r=An(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)pn||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function An(){var t=Ln,e=hn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function Nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Nn(t,e[o],n,r,i);else n=jn(n),t&&t[yn]?Vn(t,e,n,m(r)?!!r.capture:!!r,i):kn(t,e,n,!0,r,i)}function Pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Pn(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=jn(n),t&&t[yn]?(t=t.v,e=String(e).toString(),e in t.a&&(o=t.a[e],n=Tn(o,n,r,i),-1<n&&(_n(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Tn(e,n,r,i)),(n=-1<t?e[t]:null)&&Rn(n))}function Rn(t){if("number"!==typeof t&&t&&!t.wa){var e=t.src;if(e&&e[yn])In(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mn(e))?(In(n,t),0==n.b&&(n.src=null,e[En]=null)):_n(t)}}}function xn(t){return t in Sn?Sn[t]:Sn[t]="on"+t}function On(t,e,n,r){var i=!0;if((t=Mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=Dn(o,r),i=i&&!1!==o)}return i}function Dn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&Rn(t),n.call(r,e)}function Ln(t,e){if(t.wa)return!0;if(!hn){if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}if(r=e,e=new vn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=On(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=On(r[i],t,!1,e),n=n&&o}return n}return Dn(t,new vn(e,this))}function Mn(t){return t=t[En],t instanceof wn?t:null}var Fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function jn(t){return y(t)?t:(t[Fn]||(t[Fn]=function(e){return t.handleEvent(e)}),t[Fn])}function Un(){an.call(this),this.v=new wn(this),this.bc=this,this.hb=null}function qn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Vn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Bn(t,e,n,r){if(e=t.v.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&In(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Kn(t,e,n){if(y(t))n&&(t=S(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=S(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function Wn(t){var e=null;return new De((function(n,r){e=Kn((function(){n(void 0)}),t),-1==e&&r(Error("Failed to schedule timer."))})).o((function(t){throw l.clearTimeout(e),t}))}function Hn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"===typeof t)return t.split("");if(g(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Gn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(g(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function zn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(g(t)||"string"===typeof t)Q(t,e,void 0);else for(var n=Gn(t),r=Hn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}function Qn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function $n(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Yn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Yn(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Yn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}A(Un,an),Un.prototype[yn]=!0,Un.prototype.addEventListener=function(t,e,n,r){Cn(this,t,e,n,r)},Un.prototype.removeEventListener=function(t,e,n,r){Pn(this,t,e,n,r)},Un.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"===typeof t)t=new dn(t,n);else if(t instanceof dn)t.target=t.target||n;else{var i=t;t=new dn(r,n),Tt(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Bn(a,r,!0,t)&&i}if(a=t.b=n,i=Bn(a,r,!0,t)&&i,i=Bn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)a=t.b=e[o],i=Bn(a,r,!1,t)&&i;return i},Un.prototype.Da=function(){if(Un.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)_n(n[r]);delete e.a[t],e.b--}}this.hb=null},t=Qn.prototype,t.X=function(){$n(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return $n(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Yn(this.b,t)?this.b[t]:e},t.set=function(t,e){Yn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jn(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Zn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Zn?(this.i=void 0!==e?e:t.i,tr(this,t.c),this.l=t.l,this.a=t.a,er(this,t.g),this.f=t.f,nr(this,Ir(t.b)),this.h=t.h):t&&(n=String(t).match(Xn))?(this.i=!!e,tr(this,n[1]||"",!0),this.l=ur(n[2]||""),this.a=ur(n[3]||"",!0),er(this,n[4]),this.f=ur(n[5]||"",!0),nr(this,n[6]||"",!0),this.h=ur(n[7]||"")):(this.i=!!e,this.b=new gr(null,this.i))}function tr(t,e,n){t.c=n?ur(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function er(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function nr(t,e,n){e instanceof gr?(t.b=e,Er(t.b,t.i)):(n||(e=cr(e,dr)),t.b=new gr(e,t.i))}function ir(t,e,n){t.b.set(e,n)}function or(t,e){return t.b.get(e)}function ar(t){return t instanceof Zn?new Zn(t):new Zn(t,void 0)}function sr(t,e,n,r){var i=new Zn(null,void 0);return t&&tr(i,t),e&&(i.a=e),n&&er(i,n),r&&(i.f=r),i}function ur(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function cr(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,lr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function lr(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Zn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(cr(e,hr,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(cr(e,hr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.g,null!=n&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(cr(n,"/"==n.charAt(0)?pr:fr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",cr(n,vr)),t.join("")},Zn.prototype.resolve=function(t){var e=new Zn(this),n=!!t.c;n?tr(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)er(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(dt(i,"./")||dt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?nr(e,Ir(t.b)):n=!!t.h,n&&(e.h=t.h),e};var hr=/[#\/\?@]/g,fr=/[#\?:]/g,pr=/[#\?]/g,dr=/[#\?@]/g,vr=/#/g;function gr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function yr(t){t.a||(t.a=new Qn,t.b=0,t.c&&Jn(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function mr(t){var e=Gn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new gr(null,void 0);t=Hn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?wr(n,i,o):n.add(i,o)}return n}function br(t,e){yr(t),e=Tr(t,e),Yn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Yn(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&$n(t)))}function _r(t,e){return yr(t),e=Tr(t,e),Yn(t.a.b,e)}function wr(t,e,n){br(t,e),0<n.length&&(t.c=null,t.a.set(Tr(t,e),it(n)),t.b+=n.length)}function Ir(t){var e=new gr;return e.c=t.c,t.a&&(e.a=new Qn(t.a),e.b=t.b),e}function Tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Er(t,e){e&&!t.f&&(yr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(br(this,e),wr(this,n,t))}),t)),t.f=e}function Sr(t){var e=[];return kr(new Cr,t,e),e.join("")}function Cr(){}function kr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),kr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r],"function"!=typeof o&&(n.push(i),Pr(r,n),n.push(":"),kr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Pr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}t=gr.prototype,t.add=function(t,e){yr(this),this.c=null,t=Tr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){yr(this),this.a.forEach((function(n,r){Q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){yr(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){yr(this);var e=[];if("string"===typeof t)_r(this,t)&&(e=rt(e,this.a.get(Tr(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=rt(e,t[n])}return e},t.set=function(t,e){return yr(this),this.c=null,t=Tr(this,t),_r(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t?(t=this.X(t),0<t.length?String(t[0]):e):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Ar={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Nr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Pr(t,e){e.push('"',t.replace(Nr,(function(t){var e=Ar[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Ar[t]=e),e})),'"')}function Rr(){var t=ei();return ie&&!!ye&&11==ye||/Edge\/\d+/.test(t)}function xr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function Or(t,e){e=e||l.window;var n="about:blank";t&&(n=Ut(Kt(t)||Gt)),e.location.href=n}function Dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<Dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function Lr(){var t=ei();return t=Jr(t)!=Xr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null,!(t&&30>t)&&(!ie||!ye||9<ye)}function Mr(t){return t=(t||ei()).toLowerCase(),!!(t.match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Fr(t){t=t||l.window;try{t.close()}catch(e){}}function jr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ei().toLowerCase(),r&&(e.target=r,dt(n,"crios/")&&(e.target="_blank")),Jr(ei())==Yr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof jt?n:Kt("undefined"!=typeof n.href?n.href:String(n))||Gt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((mt("iPhone")&&!mt("iPod")&&!mt("iPad")||mt("iPad")||mt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=Ce(document,"A"),Et(a,"HTMLAnchorElement"),e=e instanceof jt?e:Wt(e),a.href=Ut(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Xt("",r,n,a),t=Ut(e),a&&(ae&&dt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Zt(t)+'">',t=(r=Pt())?r.createHTML(t):t,t=new zt(t,null,$t),r=a.document)&&(r.write(Qt(t)),r.close())):(a=Xt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}function Ur(t){return new De((function(e){function n(){Wn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}return n()}))}var qr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vr=/^[^@]+@[^@]+$/;function Br(){var t=null;return new De((function(e){"complete"==l.document.readyState?e():(t=function(){e()},Nn(window,"load",t))})).o((function(e){throw Pn(window,"load",t),e}))}function Kr(){return Wr(void 0)?Br().then((function(){return new De((function(t,e){var n=l.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Be(Error("Cordova must run in an Android or iOS file scheme."))}function Wr(t){return t=t||ei(),!("file:"!==ai()&&"ionic:"!==ai()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hr(){var t=l.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Gr(){return"undefined"!==typeof l.WorkerGlobalScope&&"function"===typeof l.importScripts}function zr(){return r["default"].INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r["default"].INTERNAL.hasOwnProperty("node")?"Node":Gr()?"Worker":"Browser"}function Qr(){var t=zr();return"ReactNative"===t||"Node"===t}function $r(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}var Yr="Firefox",Xr="Chrome";function Jr(t){var e=t.toLowerCase();return dt(e,"opera/")||dt(e,"opr/")||dt(e,"opios/")?"Opera":dt(e,"iemobile")?"IEMobile":dt(e,"msie")||dt(e,"trident/")?"IE":dt(e,"edge/")?"Edge":dt(e,"firefox/")?Yr:dt(e,"silk/")?"Silk":dt(e,"blackberry")?"Blackberry":dt(e,"webos")?"Webos":!dt(e,"safari/")||dt(e,"chrome/")||dt(e,"crios/")||dt(e,"android")?!dt(e,"chrome/")&&!dt(e,"crios/")||dt(e,"edge/")?dt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Xr:"Safari"}var Zr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function ti(t,e){e=e||[];var n,r=[],i={};for(n in Zr)i[Zr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),e=r,e.length||(e=["FirebaseCore-web"]),r=zr(),"Browser"===r?(i=ei(),r=Jr(i)):"Worker"===r&&(i=ei(),r=Jr(i)+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ei(){return l.navigator&&l.navigator.userAgent||""}function ni(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function ri(){try{var t=l.localStorage,e=hi();if(t)return t.setItem(e,"1"),t.removeItem(e),!Rr()||!!l.indexedDB}catch(n){return Gr()&&!!l.indexedDB}return!1}function ii(){return(oi()||"chrome-extension:"===ai()||Wr())&&!Qr()&&ri()&&!Gr()}function oi(){return"http:"===ai()||"https:"===ai()}function ai(){return l.location&&l.location.protocol||null}function si(t){return t=t||ei(),!Mr(t)&&Jr(t)!=Yr}function ui(t){return"undefined"===typeof t?null:Sr(t)}function ci(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function li(t){if(null!==t)return JSON.parse(t)}function hi(t){return t||Math.floor(1e9*Math.random()).toString()}function fi(t){return t=t||ei(),"Safari"!=Jr(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function pi(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function di(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=ei(),e=zr(),this.b=Mr(t)||"ReactNative"===e}function vi(){var t=l.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function gi(){var t=l.document,e=null;return vi()||!t?Ve():new De((function(n){e=function(){vi()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}function yi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function mi(){return!(!ni("fireauth.oauthhelper",l)&&!ni("fireauth.iframe",l))}function bi(){var t=l.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}function _i(){var t=l.navigator;return t&&t.serviceWorker?Ve().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ve(null)}di.prototype.get=function(){var t=l.navigator;return!t||"boolean"!==typeof t.onLine||!oi()&&"chrome-extension:"!==ai()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var wi,Ii={};function Ti(t){Ii[t]||(Ii[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Ei={};Object.defineProperty(Ei,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ei,"abcd",{configurable:!0,enumerable:!0,value:2}),wi=2==Ei.abcd}catch(nd){wi=!1}function Si(t,e,n){wi?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ci(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Si(t,n,e[n])}function ki(t){var e={};return Ci(e,t),e}function Ai(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Ni(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Pi(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Si(e,n,Pi(t[n]));return e}function Ri(t){var e=t&&(t[Mi]?"phone":null);if(!(e&&t&&t[Li]))throw new P("internal-error","Internal assert: invalid MultiFactorInfo object");Si(this,"uid",t[Li]),Si(this,"displayName",t[Oi]||null);var n=null;t[Di]&&(n=new Date(t[Di]).toUTCString()),Si(this,"enrollmentTime",n),Si(this,"factorId",e)}function xi(t){try{var e=new Fi(t)}catch(n){e=null}return e}Ri.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Oi="displayName",Di="enrolledAt",Li="mfaEnrollmentId",Mi="phoneInfo";function Fi(t){Ri.call(this,t),Si(this,"phoneNumber",t[Mi])}function ji(t){var e={},n=t[Bi],r=t[Wi],i=t[Hi];if(t=xi(t[Ki]),!i||i!=qi&&i!=Vi&&!n||i==Vi&&!r||i==Ui&&!t)throw Error("Invalid checkActionCode response!");i==Vi?(e[zi]=n||null,e[$i]=n||null,e[Gi]=r):(e[zi]=r||null,e[$i]=r||null,e[Gi]=n||null),e[Qi]=t||null,Si(this,Xi,i),Si(this,Yi,Pi(e))}A(Fi,Ri),Fi.prototype.w=function(){var t=Fi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Ui="REVERT_SECOND_FACTOR_ADDITION",qi="EMAIL_SIGNIN",Vi="VERIFY_AND_CHANGE_EMAIL",Bi="email",Ki="mfaInfo",Wi="newEmail",Hi="requestType",Gi="email",zi="fromEmail",Qi="multiFactorInfo",$i="previousEmail",Yi="data",Xi="operation";function Ji(t){t=ar(t);var e=or(t,Zi)||null,n=or(t,to)||null,r=or(t,ro)||null;if(r=r&&oo[r]||null,!e||!n||!r)throw new P("argument-error",Zi+", "+to+"and "+ro+" are required in a valid action code URL.");Ci(this,{apiKey:e,operation:r,code:n,continueUrl:or(t,eo)||null,languageCode:or(t,no)||null,tenantId:or(t,io)||null})}var Zi="apiKey",to="oobCode",eo="continueUrl",no="languageCode",ro="mode",io="tenantId",oo={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Ui,signIn:qi,verifyAndChangeEmail:Vi,verifyEmail:"VERIFY_EMAIL"};function ao(t){try{return new Ji(t)}catch(e){return null}}function so(t){var e=t[fo];if("undefined"===typeof e)throw new P("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new P("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[uo];if(n&&"object"===typeof n){e=n[go];var r=n[po];if(n=n[vo],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new P("argument-error",po+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new P("argument-error",vo+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new P("argument-error",go+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new P("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new P("argument-error",uo+" property must be a non null object when specified.");if(this.f=null,(e=t[ho])&&"object"===typeof e){if(e=e[yo],"string"===typeof e&&e.length)this.f=e;else if("undefined"!==typeof e)throw new P("argument-error",yo+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new P("argument-error",ho+" property must be a non null object when specified.");if(e=t[lo],"undefined"!==typeof e&&"boolean"!==typeof e)throw new P("argument-error",lo+" property must be a boolean when specified.");if(this.c=!!e,t=t[co],"undefined"!==typeof t&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new P("argument-error",co+" property must be a non empty string when specified.");this.i=t||null}var uo="android",co="dynamicLinkDomain",lo="handleCodeInApp",ho="iOS",fo="url",po="installApp",vo="minimumVersion",go="packageName",yo="bundleId";function mo(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}function bo(t){return X(t,(function(t){return t=t.toString(16),1<t.length?t:"0"+t})).join("")}var _o=null;function wo(t){var e=[];return Io(t,(function(t){e.push(t)})),e}function Io(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=_o[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}To();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}function To(){if(!_o){_o={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===_o[o]&&(_o[o]=i)}}}function Eo(t){var e=Co(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function So(t){try{return new Eo(t)}catch(e){return null}}function Co(t){if(!t)return null;if(t=t.split("."),3!=t.length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{var r=wo(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=r[e++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(1023&u))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(_){}return null}Eo.prototype.T=function(){return this.f},Eo.prototype.l=function(){return this.c},Eo.prototype.toString=function(){return this.h};var ko="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ao=["client_id","response_type","scope","redirect_uri","state"],No={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Ao},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Ao},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Ao},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:ko},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Po(t){for(var e in No)if(No[e].fa==t)return No[e];return null}function Ro(t){var e={};e["facebook.com"]=Mo,e["google.com"]=jo,e["github.com"]=Fo,e["twitter.com"]=Uo;var n=t&&t[Oo];try{if(n)return e[n]?new e[n](t):new Lo(t);if("undefined"!==typeof t[xo])return new Do(t)}catch(r){}return null}var xo="idToken",Oo="providerId";function Do(t){var e=t[Oo];if(!e&&t[xo]){var n=So(t[xo]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Si(this,"providerId",e),Si(this,"isNewUser",n)}function Lo(t){Do.call(this,t),t=li(t.rawUserInfo||"{}"),Si(this,"profile",Pi(t||{}))}function Mo(t){if(Lo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Fo(t){if(Lo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Si(this,"username",this.profile&&this.profile.login||null)}function jo(t){if(Lo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Uo(t){if(Lo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Si(this,"username",t.screenName||null)}function qo(t){var e=ar(t),n=or(e,"link"),r=or(ar(n),"link");return e=or(e,"deep_link_id"),or(ar(e),"link")||e||r||n||t}function Vo(t,e){if(!t&&!e)throw new P("internal-error","Internal assert: no raw session string available");if(t&&e)throw new P("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Bo:Ko}A(Lo,Do),A(Mo,Lo),A(Fo,Lo),A(jo,Lo),A(Uo,Lo);var Bo="enroll",Ko="signin";function Wo(){}function Ho(t,e){return t.then((function(t){if(t[js]){var n=So(t[js]);if(!n||e!=n.i)throw new P("user-mismatch");return t}throw new P("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==O+"user-not-found"?new P("user-mismatch"):t}))}function Go(t,e){if(!e)throw new P("internal-error","failed to construct a credential");this.a=e,Si(this,"providerId",t),Si(this,"signInMethod",t)}function zo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Qo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Go(t.providerId,t.pendingToken)}catch(e){}return null}function $o(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Si(this,"idToken",e.idToken),e.accessToken&&Si(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Si(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new P("internal-error","failed to construct a credential");Si(this,"accessToken",e.oauthToken),Si(this,"secret",e.oauthTokenSecret)}Si(this,"providerId",t),Si(this,"signInMethod",n)}function Yo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:mr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Xo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new $o(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Jo(t,e){this.Qc=e||[],Ci(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Po(t)||{}).Ja||null,this.pb=null}function Zo(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new P("argument-error",'SAML provider IDs must be prefixed with "saml."');Jo.call(this,t,[])}function ta(t){Jo.call(this,t,Ao),this.a=[]}function ea(){ta.call(this,"facebook.com")}function na(t){if(!t)throw new P("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new ea).credential({accessToken:e})}function ra(){ta.call(this,"github.com")}function ia(t){if(!t)throw new P("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new ra).credential({accessToken:e})}function oa(){ta.call(this,"google.com"),this.Ca("profile")}function aa(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new oa).credential({idToken:n,accessToken:e})}function sa(){Jo.call(this,"twitter.com",ko)}function ua(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new P("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new $o("twitter.com",n,"twitter.com")}function ca(t,e,n){this.a=t,this.f=e,Si(this,"providerId","password"),Si(this,"signInMethod",n===ha.EMAIL_LINK_SIGN_IN_METHOD?ha.EMAIL_LINK_SIGN_IN_METHOD:ha.EMAIL_PASSWORD_SIGN_IN_METHOD)}function la(t){return t&&t.email&&t.password?new ca(t.email,t.password,t.signInMethod):null}function ha(){Ci(this,{providerId:"password",isOAuthProvider:!1})}function fa(t,e){if(e=pa(e),!e)throw new P("argument-error","Invalid email link!");return new ca(t,e.code,ha.EMAIL_LINK_SIGN_IN_METHOD)}function pa(t){return t=qo(t),(t=ao(t))&&t.operation===qi?t:null}function da(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new P("internal-error");this.a=t,Si(this,"providerId","phone"),this.fa="phone",Si(this,"signInMethod","phone")}function va(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return Q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new da(e)}return null}function ga(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function ya(t){try{this.a=t||r["default"].auth()}catch(e){throw new P("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ci(this,{providerId:"phone",isOAuthProvider:!1})}function ma(t,e){if(!t)throw new P("missing-verification-id");if(!e)throw new P("missing-verification-code");return new da({fb:t,eb:e})}function ba(t){if(t.temporaryProof&&t.phoneNumber)return new da({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return aa(o,n);case"facebook.com":return na(n);case"github.com":return ia(n);case"twitter.com":return ua(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new Go(e,a):new $o(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ta(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function _a(t){if(!t.isOAuthProvider)throw new P("invalid-oauth-provider")}function wa(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new P("invalid-auth-event");if(this.g&&this.a)throw new P("invalid-auth-event");if(this.g&&!this.f)throw new P("invalid-auth-event")}function Ia(t){return t=t||{},t.type?new wa(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&R(t.error),t.postBody,t.tenantId):null}function Ta(){this.b=null,this.a=[]}Vo.prototype.Ha=function(){return this.a?Ve(this.a):Ve(this.b)},Vo.prototype.w=function(){return this.type==Bo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Wo.prototype.ka=function(){},Wo.prototype.b=function(){},Wo.prototype.c=function(){},Wo.prototype.w=function(){},Go.prototype.ka=function(t){return du(t,zo(this))},Go.prototype.b=function(t,e){var n=zo(this);return n.idToken=e,vu(t,n)},Go.prototype.c=function(t,e){return Ho(gu(t,zo(this)),e)},Go.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},$o.prototype.ka=function(t){return du(t,Yo(this))},$o.prototype.b=function(t,e){var n=Yo(this);return n.idToken=e,vu(t,n)},$o.prototype.c=function(t,e){var n=Yo(this);return Ho(gu(t,n),e)},$o.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Jo.prototype.Ka=function(t){return this.Jb=wt(t),this},A(Zo,Jo),A(ta,Jo),ta.prototype.Ca=function(t){return tt(this.a,t)||this.a.push(t),this},ta.prototype.Rb=function(){return it(this.a)},ta.prototype.credential=function(t,e){var n;if(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null},!n.idToken&&!n.accessToken)throw new P("argument-error","credential failed: must provide the ID token and/or the access token.");return new $o(this.providerId,n,this.providerId)},A(ea,ta),Si(ea,"PROVIDER_ID","facebook.com"),Si(ea,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),A(ra,ta),Si(ra,"PROVIDER_ID","github.com"),Si(ra,"GITHUB_SIGN_IN_METHOD","github.com"),A(oa,ta),Si(oa,"PROVIDER_ID","google.com"),Si(oa,"GOOGLE_SIGN_IN_METHOD","google.com"),A(sa,Jo),Si(sa,"PROVIDER_ID","twitter.com"),Si(sa,"TWITTER_SIGN_IN_METHOD","twitter.com"),ca.prototype.ka=function(t){return this.signInMethod==ha.EMAIL_LINK_SIGN_IN_METHOD?Xu(t,Eu,{email:this.a,oobCode:this.f}):Xu(t,Gu,{email:this.a,password:this.f})},ca.prototype.b=function(t,e){return this.signInMethod==ha.EMAIL_LINK_SIGN_IN_METHOD?Xu(t,Su,{idToken:e,email:this.a,oobCode:this.f}):Xu(t,ju,{idToken:e,email:this.a,password:this.f})},ca.prototype.c=function(t,e){return Ho(this.ka(t),e)},ca.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ci(ha,{PROVIDER_ID:"password"}),Ci(ha,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ci(ha,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),da.prototype.ka=function(t){return t.gb(ga(this))},da.prototype.b=function(t,e){var n=ga(this);return n.idToken=e,Xu(t,Qu,n)},da.prototype.c=function(t,e){var n=ga(this);return n.operation="REAUTH",t=Xu(t,$u,n),Ho(t,e)},da.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},ya.prototype.gb=function(t,e){var n=this.a.a;return Ve(e.verify()).then((function(r){if("string"!==typeof r)throw new P("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i,o=m(t)?t.session:null,a=m(t)?t.phoneNumber:t;return i=o&&o.type==Bo?o.Ha().then((function(t){return su(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==Ko?o.Ha().then((function(e){return cu(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):au(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new P("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Ci(ya,{PROVIDER_ID:"phone"}),Ci(ya,{PHONE_SIGN_IN_METHOD:"phone"}),wa.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},wa.prototype.T=function(){return this.h},wa.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ea,Sa=null;function Ca(t){var e=Sa;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},t=ni("universalLinks.subscribe",l),"function"===typeof t&&t(null,e.b))}function ka(t){var e="unauthorized-domain",n=void 0,r=ar(t);t=r.a,r=r.c,"chrome-extension"==r?n=Jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",P.call(this,e,n)}function Aa(t,e,n){P.call(this,t,n),t=e||{},t.Kb&&Si(this,"email",t.Kb),t.ea&&Si(this,"phoneNumber",t.ea),t.credential&&Si(this,"credential",t.credential),t.$b&&Si(this,"tenantId",t.$b)}function Na(t){if(t.code){var e=t.code||"";0==e.indexOf(O)&&(e=e.substring(O.length));var n={credential:ba(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new P(e,t.message||void 0);return new Aa(e,n,t.message)}return null}function Pa(){}function Ra(t){return t.c||(t.c=t.b())}function xa(){}function Oa(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Da(){}function La(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.qc,this),this.a.onerror=S(this.Tb,this),this.a.onprogress=S(this.rc,this),this.a.ontimeout=S(this.vc,this)}function Ma(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Fa(t,e,n){this.reset(t,e,n,void 0,void 0)}A(ka,P),A(Aa,P),Aa.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&Tt(t,e),t},Aa.prototype.toJSON=function(){return this.w()},Pa.prototype.c=null,A(xa,Pa),xa.prototype.a=function(){var t=Oa(this);return t?new ActiveXObject(t):new XMLHttpRequest},xa.prototype.b=function(){var t={};return Oa(this)&&(t[0]=!0,t[1]=!0),t},Ea=new xa,A(Da,Pa),Da.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new La;throw Error("Unsupported browser")},Da.prototype.b=function(){return{}},t=La.prototype,t.open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ma(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Ma(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Ma(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Fa.prototype.a=null;function ja(t){this.f=t,this.b=this.c=this.a=null}function Ua(t,e){this.name=t,this.value=e}Fa.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||k(),delete this.a},Ua.prototype.toString=function(){return this.name};var qa=new Ua("SEVERE",1e3),Va=new Ua("WARNING",900),Ba=new Ua("CONFIG",700),Ka=new Ua("FINE",500);function Wa(t){return t.c?t.c:t.a?Wa(t.a):(q("Root logger has no level set."),null)}ja.prototype.log=function(t,e,n){if(t.value>=Wa(this).value)for(y(e)&&(e=e()),t=new Fa(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ha={},Ga=null;function za(t){var e;if(Ga||(Ga=new ja(""),Ha[""]=Ga,Ga.c=Ba),!(e=Ha[t])){e=new ja(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=za(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,Ha[t]=e}return e}function Qa(t,e){t&&t.log(Ka,e,void 0)}function $a(t){this.f=t}function Ya(t){Un.call(this),this.u=t,this.h=void 0,this.readyState=Xa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=za("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}A($a,Pa),$a.prototype.a=function(){return new Ya(this.f)},$a.prototype.b=function(t){return function(){return t}}({}),A(Ya,Un);var Xa=0;function Ja(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function Za(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ts(t)}function ts(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function es(t){Un.call(this),this.headers=new Qn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ns,this.u=this.S=!1}t=Ya.prototype,t.open=function(t,e){if(this.readyState!=Xa)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ts(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Za(this)),this.readyState=Xa},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ts(this)),this.a&&(this.readyState=3,ts(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,Ja(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Za(this):ts(this),3==this.readyState&&Ja(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,Za(this))},t.sc=function(t){this.a&&(this.response=t,Za(this))},t.Va=function(t){var e=this.i;e&&e.log(Va,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Za(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Va,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Va,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ya.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),A(es,Un);var ns="";es.prototype.b=za("goog.net.XhrIo");var rs=/^https?$/i,is=["POST","PUT"];function os(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ea.a(),t.C=t.D?Ra(t.D):Ra(Ea),t.a.onreadystatechange=S(t.Wb,t);try{Qa(t.b,gs(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return Qa(t.b,gs(t,"Error opening Xhr: "+a.message)),void us(t,a)}e=r||"";var o=new Qn(t.headers);i&&zn(i,(function(t,e){o.set(e,t)})),i=Z(o.Y()),r=l.FormData&&e instanceof l.FormData,!tt(is,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{fs(t),0<t.g&&(t.u=as(t.a),Qa(t.b,gs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=S(t.Ma,t)):t.s=Kn(t.Ma,t.g,t)),Qa(t.b,gs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){Qa(t.b,gs(t,"Send error: "+a.message)),us(t,a)}}function as(t){return ie&&ve(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function ss(t){return"content-type"==t.toLowerCase()}function us(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,cs(t),hs(t)}function cs(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ls(t){if(t.c&&"undefined"!=typeof c)if(t.C[1]&&4==ps(t)&&2==ds(t))Qa(t.b,gs(t,"Local request error detected and ignored"));else if(t.i&&4==ps(t))Kn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==ps(t)){Qa(t.b,gs(t,"Request complete")),t.c=!1;try{var e,n=ds(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Xn)[1]||null;if(!o&&l.self&&l.self.location){var a=l.self.location.protocol;o=a.substr(0,a.length-1)}i=!rs.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var s=2<ps(t)?t.a.statusText:""}catch(u){Qa(t.b,"Can not get status: "+u.message),s=""}t.h=s+" ["+ds(t)+"]",cs(t)}}finally{hs(t)}}}function hs(t,e){if(t.a){fs(t);var n=t.a,r=t.C[0]?d:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(qa,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function fs(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ps(t){return t.a?t.a.readyState:0}function ds(t){try{return 2<ps(t)?t.a.status:-1}catch(e){return-1}}function vs(t){try{return t.a?t.a.responseText:""}catch(e){return Qa(t.b,"Can not get responseText: "+e.message),""}}function gs(t,e){return e+" ["+t.P+" "+t.l+" "+ds(t)+"]"}function ys(t){var e=Ps;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ms(t,e,n){t.a=!0,t.c=n,t.f=!e,Ts(t)}function bs(t){if(t.a){if(!t.v)throw new Es(t);t.v=!1}}function _s(t,e){ws(t,null,e,void 0)}function ws(t,e,n,r){t.g.push([e,n,r]),t.a&&Ts(t)}function Is(t){return J(t.g,(function(t){return y(t[1])}))}function Ts(t){if(t.h&&t.a&&Is(t)){var e=t.h,n=ks[e];n&&(l.clearTimeout(n.a),delete ks[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(F(e)||"function"===typeof l.Promise&&e instanceof l.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,Is(t)||(n=!0)}}t.c=e,r&&(s=S(t.m,t,!0),r=S(t.m,t,!1),e instanceof ys?(ws(e,s,r),e.C=!0):e.then(s,r)),n&&(e=new Cs(e),ks[e.a]=e,t.h=e.a)}function Es(){j.call(this)}function Ss(){j.call(this)}function Cs(t){this.a=l.setTimeout(S(this.c,this),0),this.b=t}t=es.prototype,t.Ma=function(){"undefined"!=typeof c&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Qa(this.b,gs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Qa(this.b,gs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),hs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),hs(this,!0)),es.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?ls(this):this.Jc())},t.Jc=function(){ls(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ns:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(qa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Qa(this.b,"Can not get response: "+e.message),null}},ys.prototype.cancel=function(t){if(this.a)this.c instanceof ys&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ss(this),bs(this),ms(this,!1,t))}},ys.prototype.m=function(t,e){this.i=!1,ms(this,t,e)},ys.prototype.then=function(t,e,n){var r,i,o=new De((function(t,e){r=t,i=e}));return ws(this,r,(function(t){t instanceof Ss?o.cancel():i(t)})),o.then(t,e,n)},ys.prototype.$goog_Thenable=!0,A(Es,j),Es.prototype.message="Deferred has already fired",Es.prototype.name="AlreadyCalledError",A(Ss,j),Ss.prototype.message="Deferred was canceled",Ss.prototype.name="CanceledError",Cs.prototype.c=function(){throw delete ks[this.a],this.b};var ks={};function As(t){var e={},n=e.document||document,r=xt(t).toString(),i=Ce(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new ys(o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){Rs(i,!0);var t=new Ds(Os,"Timeout reached for loading script "+r);bs(a),ms(a,!1,t)}),u),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Rs(i,e.xd||!1,s),bs(a),ms(a,!0,null))},i.onerror=function(){Rs(i,!0,s);var t=new Ds(xs,"Error while loading script "+r);bs(a),ms(a,!1,t)},o=e.attributes||{},Tt(o,{type:"text/javascript",charset:"UTF-8"}),_e(i,o),Yt(i,t),Ns(n).appendChild(i),a}function Ns(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}function Ps(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Rs(t,!0,this.Ma)}}function Rs(t,e,n){null!=n&&l.clearTimeout(n),t.onload=d,t.onerror=d,t.onreadystatechange=d,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var xs=0,Os=1;function Ds(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),j.call(this,n),this.code=t}function Ls(t){this.f=t}function Ms(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Us,this.g=wt(t.secureTokenHeaders||qs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Vs,this.a=wt(t.firebaseHeaders||Bs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==zr(),n=l.XMLHttpRequest||n&&r["default"].INTERNAL.node&&r["default"].INTERNAL.node.XMLHttpRequest,!n&&!Gr())throw new P("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Gr()?this.f=new $a(self):Qr()?this.f=new Ls(n):this.f=new Da,this.b=null}A(Ds,j),A(Ls,Pa),Ls.prototype.a=function(){return new this.f},Ls.prototype.b=function(){return{}};var Fs,js="idToken",Us=new di(3e4,6e4),qs={"Content-Type":"application/x-www-form-urlencoded"},Vs=new di(3e4,6e4),Bs={"Content-Type":"application/json"};function Ks(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ws(t,e){e&&(t.l=Hs("https://securetoken.googleapis.com/v1/token",e),t.h=Hs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Hs("https://identitytoolkit.googleapis.com/v2/",e))}function Hs(t,e){return t=ar(t),e=ar(e.url),t.f=t.a+t.f,tr(t,e.c),t.a=e.a,er(t,e.g),t.toString()}function Gs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function zs(t,e,n,r,i,o,a){Lr()||Gr()?t=S(t.u,t):(Fs||(Fs=new De((function(t,e){Ys(t,e)}))),t=S(t.s,t)),t(e,n,r,i,o,a)}Ms.prototype.T=function(){return this.b},Ms.prototype.u=function(t,e,n,r,i,o){if(Gr()&&("undefined"===typeof l.fetch||"undefined"===typeof l.Headers||"undefined"===typeof l.Request))throw new P("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new es(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}qn(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(vs(this))||null}catch(_){t=null}e&&e(t)})),Vn(a,"ready",(function(){s&&clearTimeout(s),cn(this)})),Vn(a,"timeout",(function(){s&&clearTimeout(s),cn(this),e&&e(null)})),os(a,t,n,r,i)};var Qs=new St(Nt,"https://apis.google.com/js/client.js?onload=%{onload}"),$s="__fcb"+Math.floor(1e6*Math.random()).toString();function Ys(t,e){if(((window.gapi||{}).client||{}).request)t();else{l[$s]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=Ot(Qs,{onload:$s});_s(As(n),(function(){e(Error("CORS_UNSUPPORTED"))}))}}function Xs(t,e){return new De((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?zs(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Zu(t)):t.access_token&&t.refresh_token?n(t):r(new P("internal-error")):r(new P("network-request-failed"))}),"POST",mr(e).toString(),t.g,t.m.get()):r(new P("internal-error"))}))}function Js(t,e,n,r,i,o,a){var s=ar(e+n);ir(s,"key",t.c),a&&ir(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&ir(s,c,i[c]);return new De((function(e,n){zs(t,s.toString(),(function(t){t?t.error?n(Zu(t,o||{})):e(t):n(new P("network-request-failed"))}),r,u?void 0:Sr(ci(i)),t.a,t.v.get())}))}function Zs(t){if(t=t.email,"string"!==typeof t||!Vr.test(t))throw new P("invalid-email")}function tu(t){"email"in t&&Zs(t)}function eu(t,e){return Xu(t,wu,{identifier:e,continueUri:oi()?xr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}function nu(t){return Xu(t,Ou,{}).then((function(t){return t.authorizedDomains||[]}))}function ru(t){if(!t[js]){if(t.mfaPendingCredential)throw new P("multi-factor-auth-required",null,wt(t));throw new P("internal-error")}}function iu(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new P("internal-error")}else{if(!t.sessionInfo)throw new P("missing-verification-id");if(!t.code)throw new P("missing-verification-code")}}Ms.prototype.s=function(t,e,n,r,i){var o=this;Fs.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ms.prototype.Ab=function(){return Xu(this,Uu,{})},Ms.prototype.Cb=function(t,e){return Xu(this,Fu,{idToken:t,email:e})},Ms.prototype.Db=function(t,e){return Xu(this,ju,{idToken:t,password:e})};var ou={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function au(t,e){return Xu(t,Mu,e)}function su(t,e){return Xu(t,qu,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}function uu(t){if(!t.phoneVerificationInfo)throw new P("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new P("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new P("missing-verification-code")}function cu(t,e){return Xu(t,Vu,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}function lu(t,e,n){return Xu(t,Tu,{idToken:e,deleteProvider:n})}function hu(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new P("internal-error")}function fu(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(t=new gr(t.postBody),_r(t,"nonce")&&(e.nonce=t.get("nonce")))),e}function pu(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Na(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Na(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Na(t)):t.errorMessage&&(e=Ju(t.errorMessage)),e)throw e;ru(t)}function du(t,e){return e.returnIdpCredential=!0,Xu(t,Bu,e)}function vu(t,e){return e.returnIdpCredential=!0,Xu(t,Wu,e)}function gu(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Xu(t,Ku,e)}function yu(t){if(!t.oobCode)throw new P("invalid-action-code")}t=Ms.prototype,t.Eb=function(t,e){var n={idToken:t},r=[];return bt(ou,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Xu(this,Fu,n)},t.wb=function(t,e){return t={requestType:"PASSWORD_RESET",email:t},Tt(t,e),Xu(this,xu,t)},t.xb=function(t,e){return t={requestType:"EMAIL_SIGNIN",email:t},Tt(t,e),Xu(this,Nu,t)},t.vb=function(t,e){return t={requestType:"VERIFY_EMAIL",idToken:t},Tt(t,e),Xu(this,Pu,t)},t.Fb=function(t,e,n){return t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},Tt(t,n),Xu(this,Ru,t)},t.gb=function(t){return Xu(this,zu,t)},t.ob=function(t,e){return Xu(this,Lu,{oobCode:t,newPassword:e})},t.Sa=function(t){return Xu(this,bu,{oobCode:t})},t.kb=function(t){return Xu(this,mu,{oobCode:t})};var mu={endpoint:"setAccountInfo",A:yu,Z:"email",B:!0},bu={endpoint:"resetPassword",A:yu,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new P("internal-error")},B:!0},_u={endpoint:"signupNewUser",A:function(t){if(Zs(t),!t.password)throw new P("weak-password")},G:ru,V:!0,B:!0},wu={endpoint:"createAuthUri",B:!0},Iu={endpoint:"deleteAccount",O:["idToken"]},Tu={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new P("internal-error")}},Eu={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Zs,G:ru,V:!0,B:!0},Su={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Zs,G:ru,V:!0},Cu={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:uu,G:ru,B:!0,Na:!0},ku={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:uu,G:ru,B:!0,Na:!0},Au={endpoint:"getAccountInfo"},Nu={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new P("internal-error");Zs(t)},Z:"email",B:!0},Pu={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new P("internal-error")},Z:"email",B:!0},Ru={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new P("internal-error")},Z:"email",B:!0},xu={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new P("internal-error");Zs(t)},Z:"email",B:!0},Ou={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Du={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new P("internal-error")}},Lu={endpoint:"resetPassword",A:yu,Z:"email",B:!0},Mu={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Fu={endpoint:"setAccountInfo",O:["idToken"],A:tu,V:!0},ju={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(tu(t),!t.password)throw new P("weak-password")},G:ru,V:!0},Uu={endpoint:"signupNewUser",G:ru,V:!0,B:!0},qu={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new P("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new P("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new P("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new P("internal-error")},B:!0,Na:!0},Vu={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new P("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new P("internal-error")},B:!0,Na:!0},Bu={endpoint:"verifyAssertion",A:hu,Za:fu,G:pu,V:!0,B:!0},Ku={endpoint:"verifyAssertion",A:hu,Za:fu,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new P("user-not-found");if(t.errorMessage)throw Ju(t.errorMessage);ru(t)},V:!0,B:!0},Wu={endpoint:"verifyAssertion",A:function(t){if(hu(t),!t.idToken)throw new P("internal-error")},Za:fu,G:pu,V:!0},Hu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new P("invalid-custom-token")},G:ru,V:!0,B:!0},Gu={endpoint:"verifyPassword",A:function(t){if(Zs(t),!t.password)throw new P("wrong-password")},G:ru,V:!0,B:!0},zu={endpoint:"verifyPhoneNumber",A:iu,G:ru,B:!0},Qu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new P("internal-error");iu(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Na(t);ru(t)}},$u={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:iu,G:ru,B:!0},Yu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[js]^!!t.refreshToken)throw new P("internal-error")},B:!0,Na:!0};function Xu(t,e,n){if(!Ni(n,e.O))return Be(new P("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ve(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),Js(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new P("internal-error");return r[e.Z]}))}function Ju(t){return Zu({error:{errors:[{message:t}],code:400,message:t}})}function Zu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new P(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Tt(r,e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new P(r[i],e);return!e&&t&&(e=ui(t)),new P("internal-error",e)}function tc(t){this.b=t,this.a=null,this.sb=ec(this)}function ec(t){return uc().then((function(){return new De((function(e,n){ni("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:ni("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ac.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}function nc(t,e){return t.sb.then((function(){return new De((function(n){t.a.send(e.type,e,n,ni("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}function rc(t,e){t.sb.then((function(){t.a.register("authEvent",e,ni("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}var ic=new St(Nt,"https://apis.google.com/js/api.js?onload=%{onload}"),oc=new di(3e4,6e4),ac=new di(5e3,15e3),sc=null;function uc(){return sc||(sc=new De((function(t,e){function n(){pi(),ni("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){pi(),e(Error("Network Error"))},timeout:oc.get()})}if(ni("gapi.iframes.Iframe"))t();else if(ni("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){ni("gapi.load")?n():e(Error("Network Error"))},r=Ot(ic,{onload:r}),Ve(As(r)).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw sc=null,t})))}function cc(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?(t=ar(this.g.url),t=sr(t.c,t.a,t.g,"/emulator/auth/iframe")):t=sr("https",this.l,null,"/__/auth/iframe"),this.a=t,ir(this.a,"apiKey",this.h),ir(this.a,"appName",this.i),this.b=null,this.c=[]}function lc(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function hc(t){try{return r["default"].app(t).auth().Ga()}catch(e){return[]}}function fc(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function pc(t){var e=xr();return nu(t).then((function(t){t:{var n=ar(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=ar(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:qr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new ka(xr())}))}function dc(t){return t.m||(t.m=Br().then((function(){if(!t.u){var e=t.c,n=t.i,r=hc(t.b),i=new cc(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=it(r||[]),t.u=i.toString()}t.v=new tc(t.u),yc(t)}))),t.m}function vc(t){return t.l||(t.C=t.c?ti(t.c,hc(t.b)):null,t.l=new Ms(t.g,M(t.i),t.C),t.f&&Ws(t.l,t.f)),t.l}function gc(t,e,n,r,i,o,a,s,u,c,l,h){return t=new lc(t,e,n,r,i,h),t.l=o,t.g=a,t.i=s,t.b=wt(u||null),t.f=c,t.zb(l).toString()}function yc(t){if(!t.v)throw Error("IfcHandler must be initialized!");rc(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ia(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return n={},n.status=r?"ACK":"ERROR",Ve(n)}return n.status="ERROR",Ve(n)}))}function mc(t){var e={type:"webStorageSupport"};return dc(t).then((function(){return nc(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))}function bc(t){if(this.a=t||r["default"].INTERNAL.reactNative&&r["default"].INTERNAL.reactNative.AsyncStorage,!this.a)throw new P("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _c(t){this.b=t,this.a={},this.f=S(this.c,this)}cc.prototype.toString=function(){return this.f?ir(this.a,"v",this.f):br(this.a.b,"v"),this.b?ir(this.a,"eid",this.b):br(this.a.b,"eid"),this.c.length?ir(this.a,"fw",this.c.join(",")):br(this.a.b,"fw"),this.a.toString()},lc.prototype.zb=function(t){return this.h=t,this},lc.prototype.toString=function(){if(this.v){var t=ar(this.v.url);t=sr(t.c,t.a,t.g,"/emulator/auth/handler")}else t=sr("https",this.u,null,"/__/auth/handler");if(ir(t,"apiKey",this.s),ir(t,"appName",this.c),ir(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r["default"].app(this.c).auth().la()}catch(u){n=null}for(var i in e.pb=n,ir(t,"providerId",this.a.providerId),n=this.a,e=ci(n.Jb),e)e[i]=e[i].toString();i=n.Qc,e=wt(e);for(var o=0;o<i.length;o++){var a=i[o];a in e&&delete e[a]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),_t(e)||ir(t,"customParameters",ui(e))}if("function"===typeof this.a.Rb&&(n=this.a.Rb(),n.length&&ir(t,"scopes",n.join(","))),this.l?ir(t,"redirectUrl",this.l):br(t.b,"redirectUrl"),this.g?ir(t,"eventId",this.g):br(t.b,"eventId"),this.i?ir(t,"v",this.i):br(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!or(t,s)&&ir(t,s,this.b[s]);return this.h?ir(t,"tid",this.h):br(t.b,"tid"),this.f?ir(t,"eid",this.f):br(t.b,"eid"),s=hc(this.c),s.length&&ir(t,"fw",s.join(",")),t.toString()},t=fc.prototype,t.Pb=function(t,e,n){var r=new P("popup-closed-by-user"),i=new P("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){mc(o).then((function(n){n||(t&&Fr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return Ur(t)})).then((function(){if(!a)return Wn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=ei();return!si(t)&&!fi(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return Be(new P("popup-blocked"));if(a&&!si())return this.ma().o((function(e){Fr(t),i(e)})),r(),Ve();this.a||(this.a=pc(vc(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw Fr(t),i(e),e}));return r(),e})).then((function(){if(_a(n),!a){var r=gc(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f);Or(r,t)}})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=pc(vc(this)));var i=this;return this.a.then((function(){_a(e);var o=gc(i.s,i.g,i.b,t,e,xr(),n,i.c,void 0,i.i,r,i.f);Or(o)})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return dc(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new P("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){nt(this.h,(function(e){return e==t}))},t=bc.prototype,t.get=function(t){return Ve(this.a.getItem(t)).then((function(t){return t&&li(t)}))},t.set=function(t,e){return Ve(this.a.setItem(t,ui(e)))},t.U=function(t){return Ve(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wc,Ic=[];function Tc(){var t=Gr()?self:null;if(Q(Ic,(function(n){n.b==t&&(e=n)})),!e){var e=new _c(t);Ic.push(e)}return e}function Ec(t,e,n){_t(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Sc(t){this.a=t}function Cc(t){this.c=t,this.b=!1,this.a=[]}function kc(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Be(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new De((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Ac(t,c),e})).o((function(e){throw Ac(t,c),e}))}function Ac(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),nt(t.a,(function(t){return t==e}))}}function Nc(){if(!Dc())throw new P("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Gr()&&self?(this.v=Tc(),Ec(this.v,"keyChanged",(function(e,n){return Uc(t).then((function(e){return 0<e.length&&Q(t.a,(function(t){t(e)})),{keyProcessed:tt(e,n.key)}}))})),Ec(this.v,"ping",(function(){return Ve(["keyChanged"])}))):_i().then((function(e){(t.h=e)&&(t.g=new Cc(new Sc(e)),kc(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&tt(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Pc(t){return new De((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}function Rc(t){return new De((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?e(r):Pc(t).then((function(){return Rc(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function xc(t){return t.i||(t.i=Rc(t)),t.i}function Oc(t,e){function n(i,o){xc(t).then(e).then(i).o((function(e){if(!(3<++r))return xc(t).then((function(e){return e.close(),t.i=void 0,n(i,o)})).o((function(t){o(t)}));o(e)}))}var r=0;return new De(n)}function Dc(){try{return!!l.indexedDB}catch(nd){return!1}}function Lc(t){return t.objectStore("firebaseLocalStorage")}function Mc(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Fc(t){return new De((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function jc(t,e){return t.g&&t.h&&bi()===t.h?kc(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ve()}function Uc(t){return xc(t).then((function(t){var e=Lc(Mc(t,!1));return e.getAll?Fc(e.getAll()):new De((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e["continue"]()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=Dr(t.c,n),t.c=n}return r}))}function qc(t){function e(){t.f=setTimeout((function(){t.l=Uc(t).then((function(e){0<e.length&&Q(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Vc(t),e()}function Vc(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Bc(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ve().then((function(){if(Dc()){var t=hi(),r="__sak"+t;return wc||(wc=new Nc),n=wc,n.set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){Q(e.a,(function(e){e(t)}))})),t}))}function Kc(){this.a={},this.type="inMemory"}function Wc(){if(!Gc()){if("Node"==zr())throw new P("internal-error","The LocalStorage compatibility library was not found.");throw new P("web-storage-unsupported")}this.a=Hc()||r["default"].INTERNAL.node.localStorage,this.type="localStorage"}function Hc(){try{var t=l.localStorage,e=hi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Gc(){var t="Node"==zr();if(t=Hc()||t&&r["default"].INTERNAL.node&&r["default"].INTERNAL.node.localStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}function zc(){this.type="nullStorage"}function Qc(){if(!Yc()){if("Node"==zr())throw new P("internal-error","The SessionStorage compatibility library was not found.");throw new P("web-storage-unsupported")}this.a=$c()||r["default"].INTERNAL.node.sessionStorage,this.type="sessionStorage"}function $c(){try{var t=l.sessionStorage,e=hi();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Yc(){var t="Node"==zr();if(t=$c()||t&&r["default"].INTERNAL.node&&r["default"].INTERNAL.node.sessionStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}function Xc(){var t={};t.Browser=tl,t.Node=el,t.ReactNative=nl,t.Worker=rl,this.a=t[zr()]}_c.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];Q(r,(function(e){i.push(Ve().then((function(){return e(t.origin,t.data.data)})))})),He(i).then((function(r){var i=[];Q(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),Q(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Sc.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Cc.prototype.close=function(){for(;0<this.a.length;)Ac(this,this.a[0]);this.b=!0},t=Nc.prototype,t.set=function(t,e){var n=this,r=!1;return Oc(this,(function(e){return e=Lc(Mc(e,!0)),Fc(e.get(t))})).then((function(i){return Oc(n,(function(o){if(o=Lc(Mc(o,!0)),i)return i.value=e,Fc(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Fc(o.add(a))}))})).then((function(){return n.c[t]=e,jc(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Oc(this,(function(e){return Fc(Lc(Mc(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Oc(this,(function(r){return n=!0,e.b++,Fc(Lc(Mc(r,!0))["delete"](t))})).then((function(){return delete e.c[t],jc(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&qc(this),this.a.push(t)},t.ia=function(t){nt(this.a,(function(e){return e==t})),0==this.a.length&&Vc(this)},t=Bc.prototype,t.get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){nt(this.a,(function(e){return e==t}))},t=Kc.prototype,t.get=function(t){return Ve(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ve()},t.U=function(t){return delete this.a[t],Ve()},t.ca=function(){},t.ia=function(){},t=Wc.prototype,t.get=function(t){var e=this;return Ve().then((function(){var n=e.a.getItem(t);return li(n)}))},t.set=function(t,e){var n=this;return Ve().then((function(){var r=ui(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ve().then((function(){e.a.removeItem(t)}))},t.ca=function(t){l.window&&Cn(l.window,"storage",t)},t.ia=function(t){l.window&&Pn(l.window,"storage",t)},t=zc.prototype,t.get=function(){return Ve(null)},t.set=function(){return Ve()},t.U=function(){return Ve()},t.ca=function(){},t.ia=function(){},t=Qc.prototype,t.get=function(t){var e=this;return Ve().then((function(){var n=e.a.getItem(t);return li(n)}))},t.set=function(t,e){var n=this;return Ve().then((function(){var r=ui(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ve().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Jc,Zc,tl={F:Wc,cb:Qc},el={F:Wc,cb:Qc},nl={F:bc,cb:zc},rl={F:Wc,cb:zc},il={rd:"local",NONE:"none",td:"session"};function ol(t){var e=new P("invalid-persistence-type"),n=new P("unsupported-persistence-type");t:{for(r in il)if(il[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(zr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Dc()&&"none"!==t)throw n;break;default:if(!ri()&&"none"!==t)throw n}}function al(){var t=!(fi(ei())||!Hr()),e=si(),n=ri();this.m=t,this.h=e,this.l=n,this.a={},Jc||(Jc=new Xc),t=Jc;try{this.g=!Rr()&&mi()||!l.indexedDB?new t.a.F:new Bc(Gr()?new Kc:new t.a.F)}catch(r){this.g=new Kc,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new Kc}this.v=new Kc,this.f=S(this.Zb,this),this.b={}}function sl(){return Zc||(Zc=new al),Zc}function ul(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function cl(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ll(t,e,n){var r=cl(e,n),i=ul(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=li(l.localStorage.getItem(r))}catch(s){}if(a&&!o)return l.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&l.localStorage.removeItem(r)}))}function hl(t,e,n){return n=cl(e,n),"local"==e.F&&(t.b[n]=null),ul(t,e.F).U(n)}function fl(t){pl(t),t.c=setInterval((function(){for(var e in t.a){var n=l.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new vn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}function pl(t){t.c&&(clearInterval(t.c),t.c=null)}function dl(t){this.a=t,this.b=sl()}t=al.prototype,t.get=function(t,e){return ul(this,t.F).get(cl(t,e))},t.set=function(t,e,n){var r=cl(t,n),i=this,o=ul(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=cl(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),_t(this.a)&&(ul(this,"local").ca(this.f),this.h||(Rr()||!mi())&&l.indexedDB||!this.l||fl(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=cl(t,e),this.a[t]&&(nt(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),_t(this.a)&&(ul(this,"local").ia(this.f),pl(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?ul(this,"local").ia(this.f):pl(this),this.m)if(n=l.localStorage.getItem(e),r=t.a.newValue,r!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.nb(e))},ie&&ye&&10==ye&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else Q(t,S(this.nb,this))},t.nb=function(t){this.a[t]&&Q(this.a[t],(function(t){t()}))};var vl,gl={name:"authEvent",F:"local"};function yl(t){return t.b.get(gl,t.a).then((function(t){return Ia(t)}))}function ml(){this.a=sl()}function bl(){this.b=-1}function _l(t,e){this.b=wl,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===vl&&(vl=l.Int32Array?new Int32Array(Al):Al),this.reset()}A(_l,bl);for(var wl=64,Il=wl-1,Tl=[],El=0;El<Il;El++)Tl[El]=0;var Sl=rt(128,Tl);function Cl(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=c&l^~c&h,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|vl[e])|0,a=o+(a+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function kl(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Cl(t),i=0);else{if(!g(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Cl(t),i=0)}}t.c=i,t.g+=n}_l.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):it(this.h)};var Al=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Nl(){_l.call(this,8,Pl)}A(Nl,_l);var Pl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Rl(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new ml,this.g=new dl(this.h),this.f=null,this.b=[],this.a=this.c=null}function xl(t){return new P("invalid-cordova-configuration",t)}function Ol(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function Dl(t){var e=new Nl;kl(e,t),t=[];var n=8*e.g;56>e.c?kl(e,Sl,56-e.c):kl(e,Sl,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Cl(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return bo(t)}function Ll(t,e,n,r,i){var o=Ol(),a=new wa(e,r,null,o,new P("no-auth-event"),null,i),s=ni("BuildInfo.packageName",l);if("string"!==typeof s)throw new P("invalid-cordova-configuration");var u=ni("BuildInfo.displayName",l),c={};if(ei().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!ei().toLowerCase().match(/android/))return Be(new P("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=Dl(o),c.sessionId=o;var h=gc(t.v,t.i,t.l,e,n,null,r,t.m,c,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(gl,a.w(),e)})).then((function(){var e=ni("cordova.plugins.browsertab.isAvailable",l);if("function"!==typeof e)throw new P("invalid-cordova-configuration");var n=null;e((function(e){if(e){if(n=ni("cordova.plugins.browsertab.openUrl",l),"function"!==typeof n)throw new P("invalid-cordova-configuration");n(h)}else{if(n=ni("cordova.InAppBrowser.open",l),"function"!==typeof n)throw new P("invalid-cordova-configuration");e=ei(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}function Ml(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Fl(t){return t.f||(t.f=t.ma().then((function(){return new De((function(e){function n(r){return e(r),t.Ta(n),!1}t.Ea(n),Ul(t)}))}))),t.f}function jl(t){var e=null;return yl(t.g).then((function(n){return e=n,n=t.g,hl(n.b,gl,n.a)})).then((function(){return e}))}function Ul(t){function e(e){r=!0,i&&i.cancel(),jl(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;i=qo(e.url),-1!=i.indexOf("/__/auth/callback")&&(o=ar(i),o=li(or(o,"firebaseError")||null),o=(o="object"===typeof o?R(o):null)?new wa(r.c,r.b,null,null,o,null,r.T()):new wa(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ml(t,i)}))}var n=new wa("unknown",null,null,null,new P("no-auth-event")),r=!1,i=Wn(500).then((function(){return jl(t).then((function(){r||Ml(t,n)}))})),o=l.handleOpenURL;l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(ni("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Sa||(Sa=new Ta),Ca(e)}function ql(t){this.a=t,this.b=sl()}t=Rl.prototype,t.ma=function(){return this.Ia?this.Ia:this.Ia=Kr().then((function(){if("function"!==typeof ni("universalLinks.subscribe",l))throw xl("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof ni("BuildInfo.packageName",l))throw xl("cordova-plugin-buildinfo is not installed");if("function"!==typeof ni("cordova.plugins.browsertab.openUrl",l))throw xl("cordova-plugin-browsertab is not installed");if("function"!==typeof ni("cordova.InAppBrowser.open",l))throw xl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new P("cordova-not-ready")}))},t.Pb=function(t,e){return e(new P("operation-not-supported-in-this-environment")),Ve()},t.Nb=function(){return Be(new P("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Be(new P("redirect-operation-pending"));var i=this,o=l.document,a=null,s=null,u=null,c=null;return this.c=Ve().then((function(){return _a(e),Fl(i)})).then((function(){return Ll(i,t,e,n,r)})).then((function(){return new De((function(t,e){s=function(){var e=ni("cordova.plugins.browsertab.close",l);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),u=function(){a||(a=Wn(2e3).then((function(){e(new P("redirect-cancelled-by-user"))})))},c=function(){vi()&&u()},o.addEventListener("resume",u,!1),ei().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(t){return jl(i).then((function(){throw t}))}))})).oa((function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Ta(s),i.c=null}))},t.Ea=function(t){this.b.push(t),Fl(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new wa("unknown",null,null,null,new P("no-auth-event")),t(e))}))},t.Ta=function(t){nt(this.b,(function(e){return e==t}))};var Vl={name:"pendingRedirect",F:"session"};function Bl(t){return t.b.set(Vl,"pending",t.a)}function Kl(t){return hl(t.b,Vl,t.a)}function Wl(t){return t.b.get(Vl,t.a).then((function(t){return"pending"==t}))}function Hl(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=S(this.s,this),this.b=new ah,this.C=new dh,this.g=new ql(ih(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Gl(this.D,this.v,this.m,x,this.J)}function Gl(t,e,n,i,o){var a=r["default"].SDK_VERSION||null;return Wr()?new Rl(t,e,n,a,i,o):new fc(t,e,n,a,i,o)}function zl(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Ql(t){t.a.Yb()&&zl(t).o((function(e){var n=new wa("unknown",null,null,null,new P("operation-not-supported-in-this-environment"));th(e)&&t.s(n)})),t.a.Ub()||sh(t.b)}function $l(t,e){tt(t.h,e)||t.h.push(e),t.f||Wl(t.g).then((function(e){e?Kl(t.g).then((function(){zl(t).o((function(e){var n=new wa("unknown",null,null,null,new P("operation-not-supported-in-this-environment"));th(e)&&t.s(n)}))})):Ql(t)})).o((function(){Ql(t)}))}function Yl(t,e){nt(t.h,(function(t){return t==e}))}Hl.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Gl(this.D,this.v,this.m,null,this.J),this.i={}},Hl.prototype.s=function(t){if(!t)throw new P("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return sh(this.b),e};var Xl=new di(2e3,1e4),Jl=new di(3e4,6e4);function Zl(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function th(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function eh(t,e,n,r,i){var o;return Bl(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(th(e))throw new P("operation-not-supported-in-this-environment");return o=e,Kl(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new De((function(){})):Kl(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function nh(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Xl.get())}Hl.prototype.ra=function(){return this.b.ra()};var rh={};function ih(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function oh(t,e,n,r){var i=ih(e,n,r);return rh[i]||(rh[i]=new Hl(t,e,n,r)),rh[i]}function ah(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function sh(t){t.g||(t.g=!0,fh(t,!1,null,null))}function uh(t){t.g&&!t.i&&fh(t,!1,null,null)}function ch(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){fh(t,s,e,null)})).o((function(e){fh(t,s,null,e)}))}function lh(t,e){if(t.b=function(){return Be(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}function hh(t,e){if(t.b=function(){return Ve(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function fh(t,e,n,r){e?r?lh(t,r):hh(t,n):hh(t,{user:null}),t.f=[],t.c=[]}function ph(t){var e=new P("timeout");t.a&&t.a.cancel(),t.a=Wn(Jl.get()).then((function(){t.b||(t.g=!0,fh(t,!0,null,e))}))}function dh(){}function vh(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}function gh(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function yh(t,e){this.a=e,Si(this,"verificationId",t)}function mh(t,e,n,r){return new ya(t).gb(e,n).then((function(t){return new yh(t,r)}))}function bh(t){var e=Co(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new P("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ci(this,{token:t,expirationTime:yi(1e3*e.exp),authTime:yi(1e3*e.auth_time),issuedAtTime:yi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function _h(t,e,n){var r=e&&e[Ih];if(!r)throw new P("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=wt(e),this.g=n,this.c=new Vo(null,r),this.b=[];var i=this;Q(e[wh]||[],(function(t){(t=xi(t))&&i.b.push(t)})),Si(this,"auth",this.a),Si(this,"session",this.c),Si(this,"hints",this.b)}ah.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ah.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(fh(this,!0,null,t.a),Ve()):e.Fa(n,r)?ch(this,t,e):Be(new P("invalid-auth-event")):(fh(this,!1,null,null),Ve())}else Be(new P("invalid-auth-event"))},ah.prototype.ra=function(){var t=this;return new De((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),ph(t))}))},dh.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ve()):e.Fa(n,r)?vh(t,e):Be(new P("invalid-auth-event"))}else Be(new P("invalid-auth-event"))},yh.prototype.confirm=function(t){return t=ma(this.verificationId,t),this.a(t)};var wh="mfaInfo",Ih="mfaPendingCredential";function Th(t,e,n,r){P.call(this,"multi-factor-auth-required",r,e),this.b=new _h(t,e,n),Si(this,"resolver",this.b)}function Eh(t,e,n){if(t&&m(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Th(e,t.serverResponse,n,t.message)}catch(r){}return null}function Sh(){}function Ch(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),Tt(n,{phoneVerificationInfo:ga(t.a)}),Xu(e,Cu,n)}))}function kh(t,e,n){return n.Ha().then((function(n){return n={mfaPendingCredential:n},Tt(n,{phoneVerificationInfo:ga(t.a)}),Xu(e,ku,n)}))}function Ah(t){Si(this,"factorId",t.fa),this.a=t}function Nh(t){if(Ah.call(this,t),this.a.fa!=ya.PROVIDER_ID)throw new P("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Ph(t,e){for(var n in dn.call(this,t),e)this[n]=e[n]}function Rh(t,e){this.a=t,this.b=[],this.c=S(this.yc,this),Cn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&Q(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Li]=t.uid),t.displayName&&(r[Oi]=t.displayName),t.enrollmentTime&&(r[Di]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Mi]=t.phoneNumber);try{e=new Fi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),Oh(this,n)}function xh(t){var e=[];return Q(t.mfaInfo||[],(function(t){(t=xi(t))&&e.push(t)})),e}function Oh(t,e){t.b=e,Si(t,"enrolledFactors",e)}function Dh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Lh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Mh(t,e){t.stop(),t.b=Wn(Lh(t,e)).then((function(){return gi()})).then((function(){return t.h()})).then((function(){Mh(t,!0)})).o((function(e){t.i(e)&&Mh(t,!1)}))}function Fh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function jh(t,e){"undefined"===typeof e&&(t.b?(e=t.b,e=e.a-e.g):e=0),t.c=Date.now()+1e3*e}function Uh(t,e){t.b=So(e[js]||""),t.a=e.refreshToken,e=e.expiresIn,jh(t,"undefined"!==typeof e?Number(e):void 0)}function qh(t,e){t.b=e.b,t.a=e.a,t.c=e.c}function Vh(t,e){return Xs(t.f,e).then((function(e){return t.b=So(e.access_token),t.a=e.refresh_token,jh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Bh(t,e){this.a=t||null,this.b=e||null,Ci(this,{lastSignInTime:yi(e||null),creationTime:yi(t||null)})}function Kh(t){return new Bh(t.a,t.b)}function Wh(t,e,n,r,i,o){Ci(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Hh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r["default"].SDK_VERSION?ti(r["default"].SDK_VERSION):null;this.a=new Ms(this.l,M(x),i),(this.u=t.emulatorConfig||null)&&Ws(this.a,this.u),this.h=new Fh(this.a),ef(this,e[js]),Uh(this.h,e),Si(this,"refreshToken",this.h.a),af(this,n||{}),Un.call(this),this.P=!1,this.s&&ii()&&(this.b=oh(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=Jh(this),this.ba=S(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){Gh(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){$h(o,t.f)},this.ja=null,this.S=new Rh(this,n),Si(this,"multiFactor",this.S)}function Gh(t,e){t.u=e,Ws(t.a,e),t.b&&(e=t.b,t.b=oh(t.s,t.l,t.m,t.u),t.P&&(Yl(e,t),$l(t.b,t)))}function zh(t,e){t.qa&&Pn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&Cn(e,"languageCodeChanged",t.Pa)}function Qh(t,e){t.$&&Pn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&Cn(e,"emulatorConfigChanged",t.Ba)}function $h(t,e){t.aa=e,Gs(t.a,r["default"].SDK_VERSION?ti(r["default"].SDK_VERSION,t.aa):null)}function Yh(t,e){t.ja&&Pn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&Cn(e,"frameworkChanged",t.Oa)}function Xh(t){try{return r["default"].app(t.m).auth()}catch(e){throw new P("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Jh(t){return new Dh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}function Zh(t){t.J||t.D.b||(t.D.start(),Pn(t,"tokenChanged",t.ba),Cn(t,"tokenChanged",t.ba))}function tf(t){Pn(t,"tokenChanged",t.ba),t.D.stop()}function ef(t,e){t.Aa=e,Si(t,"_lat",e)}function nf(t,e){nt(t.W,(function(t){return t==e}))}function rf(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return He(e).then((function(){return t}))}function of(t){t.b&&!t.P&&(t.P=!0,$l(t.b,t))}function af(t,e){Ci(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Bh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function sf(){}function uf(t){return Ve().then((function(){if(t.J)throw new P("app-deleted")}))}function cf(t){return X(t.providerData,(function(t){return t.providerId}))}function lf(t,e){e&&(hf(t,e.providerId),t.providerData.push(e))}function hf(t,e){nt(t.providerData,(function(t){return t.providerId==e}))}function ff(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Si(t,e,n)}function pf(t,e){t!=e&&(Ci(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Si(t,"metadata",Kh(e.metadata)):Si(t,"metadata",new Bh),Q(e.providerData,(function(e){lf(t,e)})),qh(t.h,e.h),Si(t,"refreshToken",t.h.a),Oh(t.S,e.S.b))}function df(t){return t.I().then((function(e){var n=t.isAnonymous;return gf(t,e).then((function(){return n||ff(t,"isAnonymous",!1),e}))}))}function vf(t,e){e[js]&&t.Aa!=e[js]&&(Uh(t.h,e),t.dispatchEvent(new Ph("tokenChanged")),ef(t,e[js]),ff(t,"refreshToken",t.h.a))}function gf(t,e){return Xu(t.a,Au,{idToken:e}).then(S(t.Kc,t))}function yf(t){return(t=t.providerUserInfo)&&t.length?X(t,(function(t){return new Wh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}function mf(t,e){return df(t).then((function(){if(tt(cf(t),e))return rf(t).then((function(){throw new P("provider-already-linked")}))}))}function bf(t,e,n){var r=ba(e);return e=Ro(e),ki({user:t,credential:r,additionalUserInfo:e,operationType:n})}function _f(t,e){return vf(t,e),t.reload().then((function(){return t}))}function wf(t,e,n,i,o){if(!ii())return Be(new P("operation-not-supported-in-this-environment"));if(t.i&&!o)return Be(t.i);var a=Po(n.providerId),s=hi(t.uid+":::"),u=null;(!si()||Hr())&&t.s&&n.isOAuthProvider&&(u=gc(t.s,t.l,t.m,e,n,null,s,r["default"].SDK_VERSION||null,null,null,t.tenantId,t.u));var c=jr(u,a&&a.va,a&&a.ua);return i=i().then((function(){if(Tf(t),!o)return t.I().then((function(){}))})).then((function(){return Zl(t.b,c,e,n,s,!!u,t.tenantId)})).then((function(){return new De((function(n,r){t.na(e,null,new P("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=nh(t.b,t,e,c,s)}))})).then((function(t){return c&&Fr(c),t?ki(t):null})).o((function(t){throw c&&Fr(c),t})),Ef(t,i,o)}function If(t,e,n,r,i){if(!ii())return Be(new P("operation-not-supported-in-this-environment"));if(t.i&&!i)return Be(t.i);var o=null,a=hi(t.uid+":::");return r=r().then((function(){if(Tf(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,rf(t)})).then((function(e){return t.ha&&(e=t.ha,e=e.b.set(Pf,t.w(),e.a)),e})).then((function(){return eh(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Rf(t.ha);throw o})).then((function(){if(o)throw o})),Ef(t,r,i)}function Tf(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new P("internal-error");throw new P("auth-domain-config-required")}}function Ef(t,e,n){var r=Sf(t,e,n);return t.N.push(r),r.oa((function(){et(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Eh(e.w(),Xh(t),S(t.jc,t))),n||e}))}function Sf(t,e,n){return t.i&&!n?(e.cancel(),Be(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new Ph("userInvalidated")),t.i=e),e}))}function Cf(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Hh(e,n,t);return t.providerData&&Q(t.providerData,(function(t){t&&lf(i,ki(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function kf(t,e,n,r){var i=new Hh(t,e);return n&&(i.ha=n),r&&$h(i,r),i.reload().then((function(){return i}))}function Af(t,e,n,r){var i=t.h,o={};return o[js]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Hh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&$h(e,r),pf(e,t),e}function Nf(t){this.a=t,this.b=sl()}_h.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=wt(e.f);return delete n[wh],delete n[Ih],Tt(n,t),e.g(n)}))},A(Th,P),Sh.prototype.tb=function(t,e,n){return e.type==Bo?Ch(this,t,e,n):kh(this,t,e)},A(Ah,Sh),A(Nh,Ah),A(Ph,dn),t=Rh.prototype,t.yc=function(t){Oh(this,xh(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new Vo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return vf(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Xu(r,Yu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=Y(e.b,(function(t){return t.uid!=n}));return Oh(e,r),vf(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:X(this.b,(function(t){return t.w()}))}}},Dh.prototype.start=function(){this.a=this.c,Mh(this,!0)},Dh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Fh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},Fh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Be(new P("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Vh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ve(null):Ve({accessToken:this.b.toString(),refreshToken:this.a})},Bh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},A(Hh,Un),Hh.prototype.xa=function(t){this.za=t,Ks(this.a,t)},Hh.prototype.la=function(){return this.za},Hh.prototype.Ga=function(){return it(this.aa)},Hh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Si(Hh.prototype,"providerId","firebase"),t=Hh.prototype,t.reload=function(){var t=this;return Ef(this,uf(this).then((function(){return df(t).then((function(){return rf(t)})).then(sf)})))},t.oc=function(t){return this.I(t).then((function(t){return new bh(t)}))},t.I=function(t){var e=this;return Ef(this,uf(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new P("internal-error");return t.accessToken!=e.Aa&&(ef(e,t.accessToken),e.dispatchEvent(new Ph("tokenChanged"))),ff(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(t=t.users,!t||!t.length)throw new P("internal-error");t=t[0],af(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=yf(t),n=0;n<e.length;n++)lf(this,e[n]);ff(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Ph("userReloaded",{hd:t}))},t.Lc=function(t){return Ti("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Ef(this,t.c(this.a,this.uid).then((function(t){return vf(e,t),n=bf(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Ti("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Ef(this,mf(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=bf(e,t,"link"),_f(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Ef(this,mf(this,"phone").then((function(){return mh(Xh(n),t,e,S(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Ef(this,Ve().then((function(){return mh(Xh(n),t,e,S(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Ef(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return vf(e,t),e.reload()})))},t.ed=function(t){var e=this;return Ef(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return vf(e,t),e.reload()})))},t.Db=function(t){var e=this;return Ef(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return vf(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return uf(this);var e=this;return Ef(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return vf(e,t),ff(e,"displayName",t.displayName||null),ff(e,"photoURL",t.photoUrl||null),Q(e.providerData,(function(t){"password"===t.providerId&&(Si(t,"displayName",e.displayName),Si(t,"photoURL",e.photoURL))})),rf(e)})).then(sf))},t.cd=function(t){var e=this;return Ef(this,df(this).then((function(n){return tt(cf(e),t)?lu(e.a,n,[t]).then((function(t){var n={};return Q(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),Q(cf(e),(function(t){n[t]||hf(e,t)})),n[ya.PROVIDER_ID]||Si(e,"phoneNumber",null),rf(e)})):rf(e).then((function(){throw new P("no-such-provider")}))})))},t.delete=function(){var t=this;return Ef(this,this.I().then((function(e){return Xu(t.a,Iu,{idToken:e})})).then((function(){t.dispatchEvent(new Ph("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");zh(t,null),Qh(t,null),Yh(t,null),t.N=[],t.J=!0,tf(t),Si(t,"refreshToken",null),t.b&&Yl(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?S(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?S(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?S(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?S(this.Mb,this):null},t.Ec=function(t){var e=this;return wf(this,"linkViaPopup",t,(function(){return mf(e,t.providerId).then((function(){return rf(e)}))}),!1)},t.Nc=function(t){return wf(this,"reauthViaPopup",t,(function(){return Ve()}),!0)},t.Fc=function(t){var e=this;return If(this,"linkViaRedirect",t,(function(){return mf(e,t.providerId)}),!1)},t.Oc=function(t){return If(this,"reauthViaRedirect",t,(function(){return Ve()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return vu(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=bf(i,t,"link"),_f(i,t)})).then((function(){return o})),Ef(this,n)},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,a=Ve().then((function(){return Ho(gu(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=bf(i,t,"reauthenticate"),vf(i,t),i.i=null,i.reload()})).then((function(){return o}));return Ef(this,a,!0)},t.vb=function(t){var e=this,n=null;return Ef(this,this.I().then((function(e){return n=e,"undefined"===typeof t||_t(t)?{}:mo(new so(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Ef(this,this.I().then((function(t){return r=t,"undefined"===typeof e||_t(e)?{}:mo(new so(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return t=Ho(Ve(t),n.uid).then((function(t){return e=bf(n,t,"reauthenticate"),vf(n,t),n.i=null,n.reload()})).then((function(){return e})),Ef(this,t,!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&Tt(t,this.metadata.w()),Q(this.providerData,(function(e){t.providerData.push(Ai(e))})),Tt(t,this.S.w()),t};var Pf={name:"redirectUser",F:"session"};function Rf(t){return hl(t.b,Pf,t.a)}function xf(t,e){return t.b.get(Pf,t.a).then((function(t){return t&&e&&(t.authDomain=e),Cf(t||{})}))}function Of(t){this.a=t,this.b=sl(),this.c=null,this.f=Lf(this),this.b.addListener(Ff("local"),this.a,S(this.g,this))}function Df(t,e){var n,r=[];for(n in il)il[n]!==e&&r.push(hl(t.b,Ff(il[n]),t.a));return r.push(hl(t.b,Mf,t.a)),We(r)}function Lf(t){var e=Ff("local"),n=Ff("session"),r=Ff("none");return ll(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Mf,t.a).then((function(t){return t?Ff(t):e}))}))}))})).then((function(e){return t.c=e,Df(t,e.F)})).o((function(){t.c||(t.c=e)}))}Of.prototype.g=function(){var t=this,e=Ff("local");Bf(this,(function(){return Ve().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Df(t,"local").then((function(){t.c=e}))}))}))};var Mf={name:"persistence",F:"session"};function Ff(t){return{name:"authUser",F:t}}function jf(t){return Bf(t,(function(){return t.b.set(Mf,t.c.F,t.a)}))}function Uf(t,e){return Bf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function qf(t){return Bf(t,(function(){return hl(t.b,t.c,t.a)}))}function Vf(t,e,n){return Bf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Cf(t||{})}))}))}function Bf(t,e){return t.f=t.f.then(e,e),t.f}function Kf(t){if(this.l=!1,Si(this,"settings",new gh),Si(this,"app",t),!ip(this).options||!ip(this).options.apiKey)throw new P("invalid-api-key");t=r["default"].SDK_VERSION?ti(r["default"].SDK_VERSION):null,this.a=new Ms(ip(this).options&&ip(this).options.apiKey,M(x),t),this.P=[],this.s=[],this.N=[],this.Pa=r["default"].INTERNAL.createSubscribe(S(this.zc,this)),this.W=void 0,this.ib=r["default"].INTERNAL.createSubscribe(S(this.Ac,this)),Zf(this,null),this.i=new Of(ip(this).options.apiKey+":"+ip(this).name),this.D=new Nf(ip(this).options.apiKey+":"+ip(this).name),this.$=cp(this,ep(this)),this.h=cp(this,np(this)),this.ba=!1,this.ja=S(this.Zc,this),this.Ba=S(this.da,this),this.qa=S(this.mc,this),this.za=S(this.wc,this),this.Aa=S(this.xc,this),this.b=null,Yf(this),this.INTERNAL={},this.INTERNAL["delete"]=S(this.delete,this),this.INTERNAL.logFramework=S(this.Gc,this),this.u=0,Un.call(this),Qf(this),this.J=[],this.R=null}function Wf(t){dn.call(this,"languageCodeChanged"),this.h=t}function Hf(t){dn.call(this,"emulatorConfigChanged"),this.c=t}function Gf(t){dn.call(this,"frameworkChanged"),this.f=t}function zf(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!t&&Br().then((function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}))}function Qf(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=ar(this.R.url);t=ki({protocol:t.c,host:t.a,port:t.g,options:ki({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}function $f(t){return t.Oa||Be(new P("auth-domain-config-required"))}function Yf(t){var e=ip(t).options.authDomain,n=ip(t).options.apiKey;e&&ii()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=oh(e,n,ip(t).name,t.R),$l(t.b,t),op(t)&&of(op(t)),t.m){of(t.m);var r=t.m;r.xa(t.la()),zh(r,t),r=t.m,$h(r,t.J),Yh(r,t),r=t.m,Gh(r,t.R),Qh(r,t),t.m=null}return t.b}})))}function Xf(t){if(!ii())return Be(new P("operation-not-supported-in-this-environment"));var e=$f(t).then((function(){return t.b.ra()})).then((function(t){return t?ki(t):null}));return cp(t,e)}function Jf(t,e){var n={};return n.apiKey=ip(t).options.apiKey,n.authDomain=ip(t).options.authDomain,n.appName=ip(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return kf(n,e,t.D,t.Ga())})).then((function(e){return op(t)&&e.uid==op(t).uid?(pf(op(t),e),t.da(e)):(Zf(t,e),of(e),t.da(e))})).then((function(){sp(t)}))}function Zf(t,e){op(t)&&(nf(op(t),t.Ba),Pn(op(t),"tokenChanged",t.qa),Pn(op(t),"userDeleted",t.za),Pn(op(t),"userInvalidated",t.Aa),tf(op(t))),e&&(e.W.push(t.Ba),Cn(e,"tokenChanged",t.qa),Cn(e,"userDeleted",t.za),Cn(e,"userInvalidated",t.Aa),0<t.u&&Zh(e)),Si(t,"currentUser",e),e&&(e.xa(t.la()),zh(e,t),$h(e,t.J),Yh(e,t),Gh(e,t.R),Qh(e,t))}function tp(t){var e=xf(t.D,ip(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Rf(t.D)}));return cp(t,e)}function ep(t){var e=ip(t).options.authDomain,n=tp(t).then((function(){return Vf(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Uf(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:qf(t.i)}))):null})).then((function(e){Zf(t,e||null)}));return cp(t,n)}function np(t){return t.$.then((function(){return Xf(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Ff("local"),e.a,t.ja)}}))}function rp(t,e){var n=null,r=null;return cp(t,e.then((function(e){return n=ba(e),r=Ro(e),Jf(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Eh(e.w(),t,S(t.kc,t))),n||e})).then((function(){return ki({user:op(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ip(t){return t.app}function op(t){return t.currentUser}function ap(t){return op(t)&&op(t)._lat||null}function sp(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](ap(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](ap(t))}}function up(t,e){t.N.push(e),cp(t,t.h.then((function(){!t.l&&tt(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(ap(t)))})))}function cp(t,e){return t.P.push(e),e.oa((function(){et(t.P,e)})),e}function lp(){}function hp(){this.a={},this.b=1e12}Of.prototype.yb=function(t){var e=null,n=this;return ol(t),Bf(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Df(n,t)})).then((function(){if(n.c=Ff(t),e)return n.b.set(n.c,e,n.a)})):Ve()}))},A(Kf,Un),A(Wf,dn),A(Hf,dn),A(Gf,dn),t=Kf.prototype,t.yb=function(t){return t=this.i.yb(t),cp(this,t)},t.xa=function(t){this.aa===t||this.l||(this.aa=t,Ks(this.a,this.aa),this.dispatchEvent(new Wf(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=l.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new P("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,zf(e),this.R={url:t,ec:e},this.settings.jb=!0,Ws(this.a,this.R),this.dispatchEvent(new Hf(this.R))}},t.Gc=function(t){this.J.push(t),Gs(this.a,r["default"].SDK_VERSION?ti(r["default"].SDK_VERSION,this.J):null),this.dispatchEvent(new Gf(this.J))},t.Ga=function(){return it(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ip(this).options.apiKey,authDomain:ip(this).options.authDomain,appName:ip(this).name,currentUser:op(this)&&op(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?S(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return rp(i,du(i.a,o))}))},t.Xc=function(t){if(!ii())return Be(new P("operation-not-supported-in-this-environment"));var e=this,n=Po(t.providerId),i=hi(),o=null;(!si()||Hr())&&ip(this).options.authDomain&&t.isOAuthProvider&&(o=gc(ip(this).options.authDomain,ip(this).options.apiKey,ip(this).name,"signInViaPopup",t,null,i,r["default"].SDK_VERSION||null,null,null,this.T(),this.R));var a=jr(o,n&&n.va,n&&n.ua);return n=$f(this).then((function(n){return Zl(n,a,"signInViaPopup",t,i,!!o,e.T())})).then((function(){return new De((function(t,n){e.na("signInViaPopup",null,new P("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=nh(e.b,e,"signInViaPopup",a,i)}))})).then((function(t){return a&&Fr(a),t?ki(t):null})).o((function(t){throw a&&Fr(a),t})),cp(this,n)},t.Yc=function(t){if(!ii())return Be(new P("operation-not-supported-in-this-environment"));var e=this,n=$f(this).then((function(){return jf(e.i)})).then((function(){return eh(e.b,"signInViaRedirect",t,void 0,e.T())}));return cp(this,n)},t.ra=function(){var t=this;return Xf(this).then((function(e){return t.b&&uh(t.b.b),e})).o((function(e){throw t.b&&uh(t.b.b),e}))},t.dd=function(t){if(!t)return Be(new P("null-user"));if(this.S!=t.tenantId)return Be(new P("tenant-id-mismatch"));var e=this,n={};n.apiKey=ip(this).options.apiKey,n.authDomain=ip(this).options.authDomain,n.appName=ip(this).name;var r=Af(t,n,e.D,e.Ga());return cp(this,this.h.then((function(){if(ip(e).options.apiKey!=t.l)return r.reload()})).then((function(){return op(e)&&t.uid==op(e).uid?(pf(op(e),t),e.da(t)):(Zf(e,r),of(r),e.da(r))})).then((function(){sp(e)})))},t.Bb=function(){var t=this,e=this.h.then((function(){return t.b&&uh(t.b.b),op(t)?(Zf(t,null),qf(t.i).then((function(){sp(t)}))):Ve()}));return cp(this,e)},t.Zc=function(){var t=this;return Vf(this.i,ip(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=op(t)&&e){n=op(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return pf(op(t),e),op(t).I();(op(t)||e)&&(Zf(t,e),e&&(of(e),e.ha=t.D),t.b&&$l(t.b,t),sp(t))}}))},t.da=function(t){return Uf(this.i,t)},t.mc=function(){sp(this),this.da(op(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return rp(e,Ve(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(op(e))}))},t.Ac=function(t){var e=this;up(this,(function(){t.next(op(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(op(r)):"function"===typeof t.next&&t.next(op(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(op(r)):"function"===typeof t.next&&t.next(op(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this,n=this.h.then((function(){return op(e)?op(e).I(t).then((function(t){return{accessToken:t}})):null}));return cp(this,n)},t.Tc=function(t){var e=this;return this.h.then((function(){return rp(e,Xu(e.a,Hu,{token:t}))})).then((function(t){var n=t.user;return ff(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return rp(n,Xu(n.a,Gu,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return rp(n,Xu(n.a,_u,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return rp(e,t.ka(e.a))}))},t.Sc=function(t){return Ti("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=op(t);if(e&&e.isAnonymous){var n=ki({providerId:null,isNewUser:!1});return ki({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return rp(t,t.a.Ab()).then((function(e){var n=e.user;return ff(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return op(this)&&op(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&op(this)&&Zh(op(this))},t.Pc=function(t){var e=this;Q(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&op(this)&&tf(op(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),cp(this,this.h.then((function(){e.l||tt(e.s,t)&&t(ap(e))})))},t.removeAuthTokenListener=function(t){nt(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i,t.b.removeListener(Ff("local"),t.a,this.ja)),this.b&&(Yl(this.b,this),uh(this.b.b)),Promise.resolve()},t.hc=function(t){return cp(this,eu(this.a,t))},t.Bc=function(t){return!!pa(t)},t.xb=function(t,e){var n=this;return cp(this,Ve().then((function(){var t=new so(e);if(!t.c)throw new P("argument-error",lo+" must be true when sending sign in link to email");return mo(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return cp(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return cp(this,this.a.Sa(t).then((function(t){return new ji(t)})))},t.kb=function(t){return cp(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return cp(this,Ve().then((function(){return"undefined"===typeof e||_t(e)?{}:mo(new so(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return cp(this,mh(this,t,e,S(this.ab,this)))},t.Vc=function(t,e){var n=this;return cp(this,Ve().then((function(){var r=e||xr(),i=fa(t,r);if(r=pa(r),!r)throw new P("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new P("tenant-id-mismatch");return n.ab(i)})))},lp.prototype.render=function(){},lp.prototype.reset=function(){},lp.prototype.getResponse=function(){},lp.prototype.execute=function(){};var fp=null;function pp(t,e){return(e=dp(e))&&t.a[e]||null}function dp(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function vp(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=be(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Cn(this.f,"click",this.i)}function gp(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function yp(){}function mp(){}hp.prototype.render=function(t,e){return this.a[this.b.toString()]=new vp(t,e),this.b++},hp.prototype.reset=function(t){var e=pp(this,t);t=dp(t),e&&t&&(e.delete(),delete this.a[t])},hp.prototype.getResponse=function(t){return(t=pp(this,t))?t.getResponse():null},hp.prototype.execute=function(t){(t=pp(this,t))&&t.execute()},vp.prototype.getResponse=function(){return gp(this),this.b},vp.prototype.execute=function(){gp(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=$r();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},vp.prototype.delete=function(){gp(this),this.g=!0,clearTimeout(this.a),this.a=null,Pn(this.f,"click",this.i)},Si(yp,"FACTOR_ID","phone"),mp.prototype.g=function(){return fp||(fp=new hp),Ve(fp)},mp.prototype.c=function(){};var bp=null;function _p(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var wp=new St(Nt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ip=new di(3e4,6e4);_p.prototype.g=function(t){var e=this;return new De((function(n,r){var i=setTimeout((function(){r(new P("network-request-failed"))}),Ip.get());if(!l.grecaptcha||t!==e.f&&!e.b){l[e.a]=function(){if(l.grecaptcha){e.f=t;var o=l.grecaptcha.render;l.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(l.grecaptcha)}else clearTimeout(i),r(new P("internal-error"));delete l[e.a]};var o=Ot(wp,{onload:e.a,hl:t||""});Ve(As(o)).o((function(){clearTimeout(i),r(new P("internal-error","Unable to load external reCAPTCHA dependencies!"))}))}else clearTimeout(i),n(l.grecaptcha)}))},_p.prototype.c=function(){this.b--};var Tp=null;function Ep(t,e,n,r,i,o,a){if(Si(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(bp||(bp=new mp),a=bp):(Tp||(Tp=new _p),a=Tp),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[kp])throw new P("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ap],!l.document)throw new P("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!be(e)||!this.i&&be(e).hasChildNodes())throw new P("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ms(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var u=this.a[Sp];this.a[Sp]=function(t){if(Np(s,t),"function"===typeof u)u(t);else if("string"===typeof u){var e=ni(u,l);"function"===typeof e&&e(t)}};var c=this.a[Cp];this.a[Cp]=function(){if(Np(s,null),"function"===typeof c)c();else if("string"===typeof c){var t=ni(c,l);"function"===typeof t&&t()}}}var Sp="callback",Cp="expired-callback",kp="sitekey",Ap="size";function Np(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Pp(t,e){nt(t.l,(function(t){return t==e}))}function Rp(t,e){return t.h.push(e),e.oa((function(){et(t.h,e)})),e}function xp(t){if(t.J)throw new P("internal-error","RecaptchaVerifier instance has been destroyed.")}function Op(t,e,n){var i=!1;try{this.b=n||r["default"].app()}catch(s){throw new P("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new P("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=r["default"].SDK_VERSION?ti(r["default"].SDK_VERSION,a):null,Ep.call(this,n,t,e,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),a,M(x),i)}function Dp(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new P("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Lp.length)throw new P("internal-error","Argument validator received an unsupported number of arguments.");n=Lp[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new P("argument-error",t+" failed: "+r)}t=Ep.prototype,t.Ia=function(){var t=this;return this.f?this.f:this.f=Rp(this,Ve().then((function(){if(oi()&&!Gr())return Br();throw new P("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,Xu(t.s,Du,{})})).then((function(e){t.a[kp]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){xp(this);var t=this;return Rp(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=be(e);e=Ee("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){xp(this);var t=this;return Rp(this,this.render().then((function(e){return new De((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(Pp(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){xp(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){xp(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=be(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},A(Op,Ep);var Lp="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Mp(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Fp(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function jp(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:m}}function Up(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function qp(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Vp(){return{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}}}function Bp(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Kf)}}}function Kp(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r["default"].app.App)}}}function Wp(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Hp(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}}function Gp(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function zp(t,e){return m(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function Qp(t){return m(t)&&"string"===typeof t.uid}function $p(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}}function Yp(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Xp(t,e){for(var n in e){var r=e[n].name;t[r]=td(r,t[n],e[n].j)}}function Jp(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:C((function(t){return this[t]}),n),set:C((function(t,e,n,r){Dp(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function Zp(t,e,n,r){t[e]=td(e,n,r)}function td(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Dp(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=ed(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}function ed(t){return t=t.split("."),t[t.length-1]}Xp(Kf.prototype,{kb:{name:"applyActionCode",j:[Mp("code")]},Sa:{name:"checkActionCode",j:[Mp("code")]},ob:{name:"confirmPasswordReset",j:[Mp("code"),Mp("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Mp("email"),Mp("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Mp("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Mp("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yp(jp(),Up(),"nextOrObserver"),Up("opt_error",!0),Up("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yp(jp(),Up(),"nextOrObserver"),Up("opt_error",!0),Up("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Mp("email"),Yp(jp("opt_actionCodeSettings",!0),qp(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Mp("email"),jp("actionCodeSettings")]},yb:{name:"setPersistence",j:[Mp("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Wp()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Wp()]},Tc:{name:"signInWithCustomToken",j:[Mp("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Mp("email"),Mp("password")]},Vc:{name:"signInWithEmailLink",j:[Mp("email"),Mp("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Mp("phoneNumber"),$p()]},Xc:{name:"signInWithPopup",j:[Gp()]},Yc:{name:"signInWithRedirect",j:[Gp()]},dd:{name:"updateCurrentUser",j:[Yp(function(t){return{name:"user",K:"an instance of Firebase User",optional:!!t,M:function(t){return!!(t&&t instanceof Hh)}}}(),qp(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Mp(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Mp("url"),jp("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Mp("code")]}}),Jp(Kf.prototype,{lc:{name:"languageCode",lb:Yp(Mp(),qp(),"languageCode")},ti:{name:"tenantId",lb:Yp(Mp(),qp(),"tenantId")}}),Kf.Persistence=il,Kf.Persistence.LOCAL="local",Kf.Persistence.SESSION="session",Kf.Persistence.NONE="none",Xp(Hh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Fp("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Fp("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Wp()]},rb:{name:"linkWithCredential",j:[Wp()]},Dc:{name:"linkWithPhoneNumber",j:[Mp("phoneNumber"),$p()]},Ec:{name:"linkWithPopup",j:[Gp()]},Fc:{name:"linkWithRedirect",j:[Gp()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wp()]},ub:{name:"reauthenticateWithCredential",j:[Wp()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Mp("phoneNumber"),$p()]},Nc:{name:"reauthenticateWithPopup",j:[Gp()]},Oc:{name:"reauthenticateWithRedirect",j:[Gp()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Yp(jp("opt_actionCodeSettings",!0),qp(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Mp(null,!0)]},cd:{name:"unlink",j:[Mp("provider")]},Cb:{name:"updateEmail",j:[Mp("email")]},Db:{name:"updatePassword",j:[Mp("password")]},ed:{name:"updatePhoneNumber",j:[Wp("phone")]},Eb:{name:"updateProfile",j:[jp("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Mp("email"),Yp(jp("opt_actionCodeSettings",!0),qp(null,!0),"opt_actionCodeSettings",!0)]}}),Xp(hp.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xp(lp.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xp(De.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Jp(gh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Fp("appVerificationDisabledForTesting")}}),Xp(yh.prototype,{confirm:{name:"confirm",j:[Mp("verificationCode")]}}),Zp(Wo,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[Xo,la,va,Qo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Yp(Mp(),jp(),"json")]),Zp(ha,"credential",(function(t,e){return new ca(t,e)}),[Mp("email"),Mp("password")]),Xp(ca.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Xp(ea.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},Ka:{name:"setCustomParameters",j:[jp("customOAuthParameters")]}}),Zp(ea,"credential",na,[Yp(Mp(),jp(),"token")]),Zp(ha,"credentialWithLink",fa,[Mp("email"),Mp("emailLink")]),Xp(ra.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},Ka:{name:"setCustomParameters",j:[jp("customOAuthParameters")]}}),Zp(ra,"credential",ia,[Yp(Mp(),jp(),"token")]),Xp(oa.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},Ka:{name:"setCustomParameters",j:[jp("customOAuthParameters")]}}),Zp(oa,"credential",aa,[Yp(Mp(),Yp(jp(),qp()),"idToken"),Yp(Mp(),qp(),"accessToken",!0)]),Xp(sa.prototype,{Ka:{name:"setCustomParameters",j:[jp("customOAuthParameters")]}}),Zp(sa,"credential",ua,[Yp(Mp(),jp(),"token"),Mp("secret",!0)]),Xp(ta.prototype,{Ca:{name:"addScope",j:[Mp("scope")]},credential:{name:"credential",j:[Yp(Mp(),Yp(jp(),qp()),"optionsOrIdToken"),Yp(Mp(),qp(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[jp("customOAuthParameters")]}}),Xp($o.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Xp(Go.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Zp(ya,"credential",ma,[Mp("verificationId"),Mp("verificationCode")]),Xp(ya.prototype,{gb:{name:"verifyPhoneNumber",j:[Yp(Mp(),function(t,e){return{name:t||"phoneInfoOptions",K:"valid phone info options",optional:!!e,M:function(t){return!!t&&(t.session&&t.phoneNumber?zp(t.session,Bo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?zp(t.session,Ko)&&Qp(t.multiFactorHint):t.session&&t.multiFactorUid?zp(t.session,Ko)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}}}(),"phoneInfoOptions"),$p()]}}),Xp(da.prototype,{w:{name:"toJSON",j:[Mp(null,!0)]}}),Xp(P.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Xp(Aa.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Xp(ka.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Xp(Th.prototype,{toJSON:{name:"toJSON",j:[Mp(null,!0)]}}),Xp(_h.prototype,{Rc:{name:"resolveSignIn",j:[Hp()]}}),Xp(Rh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Hp(),Mp("displayName",!0)]},bd:{name:"unenroll",j:[Yp({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Qp},Mp(),"multiFactorInfoIdentifier")]}}),Xp(Op.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zp(Ji,"parseLink",ao,[Mp("link")]),Zp(yp,"assertion",(function(t){return new Nh(t)}),[Wp("phone")]),function(){if("undefined"===typeof r["default"]||!r["default"].INTERNAL||!r["default"].INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Ui,VERIFY_AND_CHANGE_EMAIL:Vi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Kf,AuthCredential:Wo,Error:P};Zp(t,"EmailAuthProvider",ha,[]),Zp(t,"FacebookAuthProvider",ea,[]),Zp(t,"GithubAuthProvider",ra,[]),Zp(t,"GoogleAuthProvider",oa,[]),Zp(t,"TwitterAuthProvider",sa,[]),Zp(t,"OAuthProvider",ta,[Mp("providerId")]),Zp(t,"SAMLAuthProvider",Zo,[Mp("providerId")]),Zp(t,"PhoneAuthProvider",ya,[Bp()]),Zp(t,"RecaptchaVerifier",Op,[Yp(Mp(),Vp(),"recaptchaContainer"),jp("recaptchaParameters",!0),Kp()]),Zp(t,"ActionCodeURL",Ji,[]),Zp(t,"PhoneMultiFactorGenerator",yp,[]),r["default"].INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return t=t.getProvider("app").getImmediate(),new Kf(t)},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),r["default"].INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return t=t.getProvider("auth").getImmediate(),{getUid:S(t.getUid,t),getToken:S(t.nc,t),addAuthTokenListener:S(t.cc,t),removeAuthTokenListener:S(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r["default"].registerVersion("@firebase/auth","0.16.8"),r["default"].INTERNAL.extendNamespace({User:Hh})}()}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});n(921);var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;function u(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var c=n(783),l=n(594),h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},h(t,e)};function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function p(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var d,v="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},g=g||{},y=v||self;function m(){}function b(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function _(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function w(t){return Object.prototype.hasOwnProperty.call(t,I)&&t[I]||(t[I]=++T)}var I="closure_uid_"+(1e9*Math.random()>>>0),T=0;function E(t,e,n){return t.call.apply(t.bind,arguments)}function S(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function C(t,e,n){return C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:S,C.apply(null,arguments)}function k(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function A(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function N(){this.s=this.s,this.o=this.o}var P=0,R={};N.prototype.s=!1,N.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0!=P)){var t=w(this);delete R[t]}},N.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var x=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},O=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function D(t){t:{for(var e=Jn,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function L(t){return Array.prototype.concat.apply([],arguments)}function M(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function F(t){return/^[\s\xa0]*$/.test(t)}var j,U=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function q(t,e){return-1!=t.indexOf(e)}function V(t,e){return t<e?-1:t>e?1:0}t:{var B=y.navigator;if(B){var K=B.userAgent;if(K){j=K;break t}}j=""}function W(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function H(t){var e={};for(var n in t)e[n]=t[n];return e}var G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<G.length;o++)n=G[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Q(t){return Q[" "](t),t}function $(t){var e=ut;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}Q[" "]=m;var Y,X=q(j,"Opera"),J=q(j,"Trident")||q(j,"MSIE"),Z=q(j,"Edge"),tt=Z||J,et=q(j,"Gecko")&&!(q(j.toLowerCase(),"webkit")&&!q(j,"Edge"))&&!(q(j,"Trident")||q(j,"MSIE"))&&!q(j,"Edge"),nt=q(j.toLowerCase(),"webkit")&&!q(j,"Edge");function rt(){var t=y.document;return t?t.documentMode:void 0}t:{var it="",ot=function(){var t=j;return et?/rv:([^\);]+)(\)|;)/.exec(t):Z?/Edge\/([\d\.]+)/.exec(t):J?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):nt?/WebKit\/(\S+)/.exec(t):X?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ot&&(it=ot?ot[1]:""),J){var at=rt();if(null!=at&&at>parseFloat(it)){Y=String(at);break t}}Y=it}var st,ut={};function ct(){return $((function(){for(var t=0,e=U(String(Y)).split("."),n=U("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=V(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||V(0==o[2].length,0==a[2].length)||V(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(y.document&&J){var lt=rt();st=lt||(parseInt(Y,10)||void 0)}else st=void 0;var ht=st,ft=function(){if(!y.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{y.addEventListener("test",m,e),y.removeEventListener("test",m,e)}catch(n){}return t}();function pt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function dt(t,e){if(pt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(et){t:{try{Q(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:vt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&dt.Z.h.call(this)}}pt.prototype.h=function(){this.defaultPrevented=!0},A(dt,pt);var vt={2:"touch",3:"pen",4:"mouse"};dt.prototype.h=function(){dt.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),yt=0;function mt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++yt,this.ca=this.fa=!1}function bt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function _t(t){this.src=t,this.g={},this.h=0}function wt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=x(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(bt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function It(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}_t.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var a=It(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):(e=new mt(e,this.src,o,!!r,i),e.fa=n,t.push(e)),e};var Tt="closure_lm_"+(1e6*Math.random()|0),Et={};function St(t,e,n,r,i){if(r&&r.once)return At(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)St(t,e[o],n,r,i);return null}return n=Lt(n),t&&t[gt]?t.N(e,n,_(r)?!!r.capture:!!r,i):Ct(t,e,n,!1,r,i)}function Ct(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=_(i)?!!i.capture:!!i,s=Ot(t);if(s||(t[Tt]=s=new _t(t)),n=s.add(e,n,r,a,o),n.proxy)return n;if(r=kt(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ft||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Rt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function kt(){function t(n){return e.call(t.src,t.listener,n)}var e=xt;return t}function At(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)At(t,e[o],n,r,i);return null}return n=Lt(n),t&&t[gt]?t.O(e,n,_(r)?!!r.capture:!!r,i):Ct(t,e,n,!0,r,i)}function Nt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Nt(t,e[o],n,r,i);else r=_(r)?!!r.capture:!!r,n=Lt(n),t&&t[gt]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=It(o,n,r,i),-1<n&&(bt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Ot(t))&&(e=t.g[e.toString()],t=-1,e&&(t=It(e,n,r,i)),(n=-1<t?e[t]:null)&&Pt(n))}function Pt(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[gt])wt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Rt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ot(e))?(wt(n,t),0==n.h&&(n.src=null,e[Tt]=null)):bt(t)}}}function Rt(t){return t in Et?Et[t]:Et[t]="on"+t}function xt(t,e){if(t.ca)t=!0;else{e=new dt(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Pt(t),t=n.call(r,e)}return t}function Ot(t){return t=t[Tt],t instanceof _t?t:null}var Dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lt(t){return"function"===typeof t?t:(t[Dt]||(t[Dt]=function(e){return t.handleEvent(e)}),t[Dt])}function Mt(){N.call(this),this.i=new _t(this),this.P=this,this.I=null}function Ft(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new pt(e,t);else if(e instanceof pt)e.target=e.target||t;else{var i=e;e=new pt(r,t),z(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=jt(a,r,!0,e)&&i}if(a=e.g=t,i=jt(a,r,!0,e)&&i,i=jt(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)a=e.g=n[o],i=jt(a,r,!1,e)&&i}function jt(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&wt(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}A(Mt,N),Mt.prototype[gt]=!0,Mt.prototype.removeEventListener=function(t,e,n,r){Nt(this,t,e,n,r)},Mt.prototype.M=function(){if(Mt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)bt(n[r]);delete e.g[t],e.h--}}this.I=null},Mt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Mt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ut=y.JSON.stringify;function qt(){var t=$t,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Vt,Bt=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Kt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Kt=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Wt}),(function(t){return t.reset()})),Wt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Ht(t){y.setTimeout((function(){throw t}),0)}function Gt(t,e){Vt||zt(),Qt||(Vt(),Qt=!0),$t.add(t,e)}function zt(){var t=y.Promise.resolve(void 0);Vt=function(){t.then(Yt)}}var Qt=!1,$t=new Bt;function Yt(){for(var t;t=qt();){try{t.h.call(t.g)}catch(n){Ht(n)}var e=Kt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Qt=!1}function Xt(t,e){Mt.call(this),this.h=t||1,this.g=e||y,this.j=C(this.kb,this),this.l=Date.now()}function Jt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Zt(t,e,n){if("function"===typeof t)n&&(t=C(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=C(t.handleEvent,t)}return 2147483647<Number(e)?-1:y.setTimeout(t,e||0)}function te(t){t.g=Zt((function(){t.g=null,t.i&&(t.i=!1,te(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}A(Xt,Mt),d=Xt.prototype,d.da=!1,d.S=null,d.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ft(this,"tick"),this.da&&(Jt(this),this.start()))}},d.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},d.M=function(){Xt.Z.M.call(this),Jt(this),delete this.g};var ee=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return f(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:te(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(N);function ne(t){N.call(this),this.h=t,this.g={}}A(ne,N);var re=[];function ie(t,e,n,r){Array.isArray(n)||(n&&(re[0]=n.toString()),n=re);for(var i=0;i<n.length;i++){var o=St(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function oe(t){W(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Pt(t)}),t),t.g={}}function ae(){this.g=!0}function se(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}function ue(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}function ce(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+he(t,n)+(r?" "+r:"")}))}function le(t,e){t.info((function(){return"TIMEOUT: "+e}))}function he(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ut(n)}catch(s){return e}}ne.prototype.M=function(){ne.Z.M.call(this),oe(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ae.prototype.Aa=function(){this.g=!1},ae.prototype.info=function(){};var fe={},pe=null;function de(){return pe=pe||new Mt}function ve(t){pt.call(this,fe.Ma,t)}function ge(t){var e=de();Ft(e,new ve(e,t))}function ye(t,e){pt.call(this,fe.STAT_EVENT,t),this.stat=e}function me(t){var e=de();Ft(e,new ye(e,t))}function be(t,e){pt.call(this,fe.Na,t),this.size=e}function _e(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return y.setTimeout((function(){t()}),e)}fe.Ma="serverreachability",A(ve,pt),fe.STAT_EVENT="statevent",A(ye,pt),fe.Na="timingevent",A(be,pt);var we={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ie={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Te(){}function Ee(t){return t.h||(t.h=t.i())}function Se(){}Te.prototype.h=null;var Ce,ke={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ae(){pt.call(this,"d")}function Ne(){pt.call(this,"c")}function Pe(){}function Re(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ne(this),this.P=Oe,t=tt?125:void 0,this.W=new Xt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}A(Ae,pt),A(Ne,pt),A(Pe,Te),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Ce=new Pe;var Oe=45e3,De={},Le={};function Me(t,e,n){t.K=1,t.v=un(en(e)),t.s=n,t.U=!0,Fe(t,null)}function Fe(t,e){t.F=Date.now(),Ve(t),t.A=en(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Tn(n.h,"t",r),t.C=0,n=t.l.H,t.h=new xe,t.g=Nr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new ee(C(t.Ia,t,t.g),t.O)),ie(t.V,t.g,"readystatechange",t.gb),e=t.H?H(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ge(1),se(t.j,t.u,t.A,t.m,t.X,t.s)}function je(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Ue(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if(r=qe(t,n),r==Le){4==e&&(t.o=4,me(14),i=!1),ce(t.j,t.m,null,"[Incomplete Response]");break}if(r==De){t.o=4,me(15),ce(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ce(t.j,t.m,r,null),Ge(t,r)}je(t)&&r!=Le&&r!=De&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,me(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),wr(e),e.L=!0,me(11))):(ce(t.j,t.m,n,"[Invalid Chunked Response]"),He(t),We(t))}function qe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Le:(n=Number(e.substring(n,r)),isNaN(n)?De:(r+=1,r+n>e.length?Le:(e=e.substr(r,n),t.C=r+n,e)))}function Ve(t){t.Y=Date.now()+t.P,Be(t,t.P)}function Be(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=_e(C(t.eb,t),e)}function Ke(t){t.B&&(y.clearTimeout(t.B),t.B=null)}function We(t){0==t.l.G||t.I||Er(t.l,t)}function He(t){Ke(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Jt(t.W),oe(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ge(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Rn(n.i,t)))if(n.I=t.N,!t.J&&Rn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Tr(n),hr(n)}_r(n),me(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=_e(C(n.ab,n),6e3));if(1>=Pn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Cr(n,11)}else if((t.J||n.g==t)&&Tr(n),!F(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(q(l,"spdy")||q(l,"quic")||q(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(xn(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,sn(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var p=t;if(r.oa=Ar(r,r.H?r.la:null,r.W),p.J){On(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(Ke(d),Ve(d)),r.g=p}else br(r);0<n.l.length&&dr(n)}else"stop"!=o[0]&&"close"!=o[0]||Cr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Cr(n,7):lr(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ge(4)}catch(o){}}function ze(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(b(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Qe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(b(t)||"string"===typeof t)O(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(b(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=ze(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function $e(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof $e)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ye(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Xe(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],Xe(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Xe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}d=Re.prototype,d.setTimeout=function(t){this.P=t},d.gb=function(t){t=t.target;var e=this.L;e&&3==ir(t)?e.l():this.Ia(t)},d.Ia=function(t){try{if(t==this.g)t:{var e=ir(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||tt||this.g&&(this.h.h||this.g.ga()||or(this.g)))){this.I||4!=e||7==n||ge(8==n||0>=r?3:2),Ke(this);var i=this.g.ba();this.N=i;e:if(je(this)){var o=or(this.g);t="";var a=o.length,s=4==ir(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){He(this),We(this);var u="";break e}this.h.i=new y.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,ue(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,me(12),He(this),We(this);break t}ce(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ge(this,i)}this.U?(Ue(this,e,u),tt&&this.i&&3==e&&(ie(this.V,this.W,"tick",this.fb),this.W.start())):(ce(this.j,this.m,u,null),Ge(this,u)),4==e&&He(this),this.i&&!this.I&&(4==e?Er(this.l,this):(this.i=!1,Ve(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,me(12)):(this.o=0,me(13)),He(this),We(this)}}}catch(e){}},d.fb=function(){if(this.g){var t=ir(this.g),e=this.g.ga();this.C<e.length&&(Ke(this),Ue(this,t,e),this.i&&4!=t&&Ve(this))}},d.cancel=function(){this.I=!0,He(this)},d.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(le(this.j,this.A),2!=this.K&&(ge(3),me(17)),He(this),this.o=2,We(this)):Be(this,this.Y-t)},d=$e.prototype,d.R=function(){Ye(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},d.T=function(){return Ye(this),this.g.concat()},d.get=function(t,e){return Xe(this.h,t)?this.h[t]:e},d.set=function(t,e){Xe(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},d.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Je=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ze(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function tn(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof tn){this.g=void 0!==e?e:t.g,nn(this,t.j),this.s=t.s,rn(this,t.i),on(this,t.m),this.l=t.l,e=t.h;var n=new bn;n.i=e.i,e.g&&(n.g=new $e(e.g),n.h=e.h),an(this,n),this.o=t.o}else t&&(n=String(t).match(Je))?(this.g=!!e,nn(this,n[1]||"",!0),this.s=hn(n[2]||""),rn(this,n[3]||"",!0),on(this,n[4]),this.l=hn(n[5]||"",!0),an(this,n[6]||"",!0),this.o=hn(n[7]||"")):(this.g=!!e,this.h=new bn(null,this.g))}function en(t){return new tn(t)}function nn(t,e,n){t.j=n?hn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function rn(t,e,n){t.i=n?hn(e,!0):e}function on(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function an(t,e,n){e instanceof bn?(t.h=e,Sn(t.h,t.g)):(n||(e=fn(e,yn)),t.h=new bn(e,t.g))}function sn(t,e,n){t.h.set(e,n)}function un(t){return sn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function cn(t){return t instanceof tn?en(t):new tn(t,void 0)}function ln(t,e,n,r){var i=new tn(null,void 0);return t&&nn(i,t),e&&rn(i,e),n&&on(i,n),r&&(i.l=r),i}function hn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,pn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function pn(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}tn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fn(e,dn,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(fn(e,dn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(fn(n,"/"==n.charAt(0)?gn:vn,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",fn(n,mn)),t.join("")};var dn=/[#\/\?@]/g,vn=/[#\?:]/g,gn=/[#\?]/g,yn=/[#\?@]/g,mn=/#/g;function bn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _n(t){t.g||(t.g=new $e,t.h=0,t.i&&Ze(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function wn(t,e){_n(t),e=En(t,e),Xe(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Xe(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Ye(t)))}function In(t,e){return _n(t),e=En(t,e),Xe(t.g.h,e)}function Tn(t,e,n){wn(t,e),0<n.length&&(t.i=null,t.g.set(En(t,e),M(n)),t.h+=n.length)}function En(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Sn(t,e){e&&!t.j&&(_n(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(wn(this,e),Tn(this,n,t))}),t)),t.j=e}d=bn.prototype,d.add=function(t,e){_n(this),this.i=null,t=En(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},d.forEach=function(t,e){_n(this),this.g.forEach((function(n,r){O(n,(function(n){t.call(e,n,r,this)}),this)}),this)},d.T=function(){_n(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},d.R=function(t){_n(this);var e=[];if("string"===typeof t)In(this,t)&&(e=L(e,this.g.get(En(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=L(e,t[n])}return e},d.set=function(t,e){return _n(this),this.i=null,t=En(this,t),In(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},d.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e},d.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var Cn=function(){function t(t,e){this.h=t,this.g=e}return t}();function kn(t){this.l=t||An,y.PerformanceNavigationTiming?(t=y.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(y.g&&y.g.Ea&&y.g.Ea()&&y.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var An=10;function Nn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Pn(t){return t.h?1:t.g?t.g.size:0}function Rn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function xn(t,e){t.g?t.g.add(e):t.h=e}function On(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Dn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=p(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return M(t.i)}function Ln(){}function Mn(){this.g=new Ln}function Fn(t,e,n){var r=n||"";try{Qe(t,(function(t,n){var i=t;_(t)&&(i=Ut(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function jn(t,e){var n=new ae;if(y.Image){var r=new Image;r.onload=k(Un,n,r,"TestLoadImage: loaded",!0,e),r.onerror=k(Un,n,r,"TestLoadImage: error",!1,e),r.onabort=k(Un,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=k(Un,n,r,"TestLoadImage: timeout",!1,e),y.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function Un(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function qn(t){this.l=t.$b||null,this.j=t.ib||!1}function Vn(t,e){Mt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Bn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kn.prototype.cancel=function(){var t,e;if(this.i=Dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=p(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Ln.prototype.stringify=function(t){return y.JSON.stringify(t,void 0)},Ln.prototype.parse=function(t){return y.JSON.parse(t,void 0)},A(qn,Te),qn.prototype.g=function(){return new Vn(this.l,this.j)},qn.prototype.i=function(t){return function(){return t}}({}),A(Vn,Mt);var Bn=0;function Kn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Wn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Hn(t)}function Hn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}d=Vn.prototype,d.open=function(t,e){if(this.readyState!=Bn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Hn(this)},d.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||y).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},d.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wn(this)),this.readyState=Bn},d.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Hn(this)),this.g&&(this.readyState=3,Hn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof y.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},d.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Wn(this):Hn(this),3==this.readyState&&Kn(this)}},d.Ua=function(t){this.g&&(this.response=this.responseText=t,Wn(this))},d.Ta=function(t){this.g&&(this.response=t,Wn(this))},d.ha=function(){this.g&&Wn(this)},d.setRequestHeader=function(t,e){this.v.append(t,e)},d.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},d.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Vn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Gn=y.JSON.parse;function zn(t){Mt.call(this),this.headers=new $e,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Qn,this.K=this.L=!1}A(zn,Mt);var Qn="",$n=/^https?$/i,Yn=["POST","PUT"];function Xn(t){return J&&ct()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function Jn(t){return"content-type"==t.toLowerCase()}function Zn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,tr(t),nr(t)}function tr(t){t.D||(t.D=!0,Ft(t,"complete"),Ft(t,"error"))}function er(t){if(t.h&&"undefined"!=typeof g&&(!t.C[1]||4!=ir(t)||2!=t.ba()))if(t.v&&4==ir(t))Zt(t.Fa,0,t);else if(Ft(t,"readystatechange"),4==ir(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Je)[1]||null;if(!o&&y.self&&y.self.location){var a=y.self.location.protocol;o=a.substr(0,a.length-1)}i=!$n.test(o?o.toLowerCase():"")}e=i}if(e)Ft(t,"complete"),Ft(t,"success");else{t.m=6;try{var s=2<ir(t)?t.g.statusText:""}catch(u){s=""}t.j=s+" ["+t.ba()+"]",tr(t)}}finally{nr(t)}}}function nr(t,e){if(t.g){rr(t);var n=t.g,r=t.C[0]?m:null;t.g=null,t.C=null,e||Ft(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function rr(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(y.clearTimeout(t.A),t.A=null)}function ir(t){return t.g?t.g.readyState:0}function or(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Qn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ar(t){var e="";return W(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function sr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=ar(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):sn(t,e,n))}function ur(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function cr(t){this.za=0,this.l=[],this.h=new ae,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ur("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ur("baseRetryDelayMs",5e3,t),this.$a=ur("retryDelaySeedMs",1e4,t),this.Ya=ur("forwardChannelMaxRetries",2,t),this.ra=ur("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new kn(t&&t.concurrentRequestLimit),this.Ca=new Mn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function lr(t){if(fr(t),3==t.G){var e=t.V++,n=en(t.F);sn(n,"SID",t.J),sn(n,"RID",e),sn(n,"TYPE","terminate"),yr(t,n),e=new Re(t,t.h,e,void 0),e.K=2,e.v=un(en(n)),n=!1,y.navigator&&y.navigator.sendBeacon&&(n=y.navigator.sendBeacon(e.v.toString(),"")),!n&&y.Image&&((new Image).src=e.v,n=!0),n||(e.g=Nr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ve(e)}kr(t)}function hr(t){t.g&&(wr(t),t.g.cancel(),t.g=null)}function fr(t){hr(t),t.u&&(y.clearTimeout(t.u),t.u=null),Tr(t),t.i.cancel(),t.m&&("number"===typeof t.m&&y.clearTimeout(t.m),t.m=null)}function pr(t,e){t.l.push(new Cn(t.Za++,e)),3==t.G&&dr(t)}function dr(t){Nn(t.i)||t.m||(t.m=!0,Gt(t.Ha,t),t.C=0)}function vr(t,e){return!(Pn(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=_e(C(t.Ha,t,e),Sr(t,t.C)),t.C++,!0))}function gr(t,e){var n;n=e?e.m:t.V++;var r=en(t.F);sn(r,"SID",t.J),sn(r,"RID",n),sn(r,"AID",t.U),yr(t,r),t.o&&t.s&&sr(r,t.o,t.s),n=new Re(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=mr(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),xn(t.i,n),Me(n,r,e)}function yr(t,e){t.j&&Qe({},(function(t,n){sn(e,n,t)}))}function mr(t,e,n){n=Math.min(t.l.length,n);var r=t.j?C(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(c-=o,0>c)o=Math.max(0,i[u].h-100),s=!1;else try{Fn(l,a,"req"+c+"_")}catch(li){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function br(t){t.g||t.u||(t.Y=1,Gt(t.Ga,t),t.A=0)}function _r(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=_e(C(t.Ga,t),Sr(t,t.A)),t.A++,!0)}function wr(t){null!=t.B&&(y.clearTimeout(t.B),t.B=null)}function Ir(t){t.g=new Re(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=en(t.oa);sn(e,"RID","rpc"),sn(e,"SID",t.J),sn(e,"CI",t.N?"0":"1"),sn(e,"AID",t.U),yr(t,e),sn(e,"TYPE","xmlhttp"),t.o&&t.s&&sr(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=un(en(e)),n.s=null,n.U=!0,Fe(n,t)}function Tr(t){null!=t.v&&(y.clearTimeout(t.v),t.v=null)}function Er(t,e){var n=null;if(t.g==e){Tr(t),wr(t),t.g=null;var r=2}else{if(!Rn(t.i,e))return;n=e.D,On(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=de(),Ft(r,new be(r,n,e,i)),dr(t)}else br(t);else if(i=e.o,3==i||0==i&&0<t.I||!(1==r&&vr(t,e)||2==r&&_r(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Cr(t,5);break;case 4:Cr(t,10);break;case 3:Cr(t,6);break;default:Cr(t,2)}}function Sr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Cr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=C(t.jb,t);n||(n=new tn("//www.google.com/images/cleardot.gif"),y.location&&"http"==y.location.protocol||nn(n,"https"),un(n)),jn(n.toString(),r)}else me(2);t.G=0,t.j&&t.j.va(e),kr(t),fr(t)}function kr(t){t.G=0,t.I=-1,t.j&&(0==Dn(t.i).length&&0==t.l.length||(t.i.i.length=0,M(t.l),t.l.length=0),t.j.ua())}function Ar(t,e,n){var r=cn(n);if(""!=r.i)e&&rn(r,e+"."+r.i),on(r,r.m);else{var i=y.location;r=ln(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&W(t.aa,(function(t,e){sn(r,e,t)})),e=t.D,n=t.sa,e&&n&&sn(r,e,n),sn(r,"VER",t.ma),yr(t,r),r}function Nr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new zn(new qn({ib:!0})):new zn(t.qa),e.L=t.H,e}function Pr(){}function Rr(){if(J&&!(10<=Number(ht)))throw Error("Environmental error: no available transport.")}function xr(t,e){Mt.call(this),this.g=new cr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!F(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!F(e)&&(this.g.D=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Lr(this)}function Or(t){Ae.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Dr(){Ne.call(this),this.status=1}function Lr(t){this.g=t}d=zn.prototype,d.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ce.g(),this.C=this.u?Ee(this.u):Ee(Ce),this.g.onreadystatechange=C(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Zn(this,o)}t=n||"";var i=new $e(this.headers);r&&Qe(r,(function(t,e){i.set(e,t)})),r=D(i.T()),n=y.FormData&&t instanceof y.FormData,!(0<=x(Yn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rr(this),0<this.B&&((this.K=Xn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=C(this.pa,this)):this.A=Zt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Zn(this,o)}},d.pa=function(){"undefined"!=typeof g&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ft(this,"timeout"),this.abort(8))},d.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ft(this,"complete"),Ft(this,"abort"),nr(this))},d.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nr(this,!0)),zn.Z.M.call(this)},d.Fa=function(){this.s||(this.F||this.v||this.l?er(this):this.cb())},d.cb=function(){er(this)},d.ba=function(){try{return 2<ir(this)?this.g.status:-1}catch(t){return-1}},d.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},d.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Gn(e)}},d.Da=function(){return this.m},d.La=function(){return"string"===typeof this.j?this.j:String(this.j)},d=cr.prototype,d.ma=8,d.G=1,d.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},d.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Re(this,this.h,t,void 0),n=this.s;if(this.P&&(n?(n=H(n),z(n,this.P)):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(o="__data__"in o.g&&(o=o.g.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(r+=o,4096<r){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=mr(this,e,r),i=en(this.F),sn(i,"RID",t),sn(i,"CVER",22),this.D&&sn(i,"X-HTTP-Session-Id",this.D),yr(this,i),this.o&&n&&sr(i,this.o,n),xn(this.i,e),this.Ra&&sn(i,"TYPE","init"),this.ja?(sn(i,"$req",r),sn(i,"SID","null"),e.$=!0,Me(e,i,null)):Me(e,i,r),this.G=2}}else 3==this.G&&(t?gr(this,t):0==this.l.length||Nn(this.i)||gr(this))},d.Ga=function(){if(this.u=null,Ir(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=_e(C(this.bb,this),t)}},d.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,me(10),hr(this),Ir(this))},d.ab=function(){null!=this.v&&(this.v=null,hr(this),_r(this),me(19))},d.jb=function(t){t?(this.h.info("Successfully pinged google.com"),me(2)):(this.h.info("Failed to ping google.com"),me(1))},d=Pr.prototype,d.xa=function(){},d.wa=function(){},d.va=function(){},d.ua=function(){},d.Oa=function(){},Rr.prototype.g=function(t,e){return new xr(t,e)},A(xr,Mt),xr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Gt(C(t.hb,t,e))),me(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Ar(t,null,t.W),dr(t)},xr.prototype.close=function(){lr(this.g)},xr.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,pr(this.g,e)}else this.v?(e={},e.__data__=Ut(t),pr(this.g,e)):pr(this.g,t)},xr.prototype.M=function(){this.g.j=null,delete this.j,lr(this.g),delete this.g,xr.Z.M.call(this)},A(Or,Ae),A(Dr,Ne),A(Lr,Pr),Lr.prototype.xa=function(){Ft(this.g,"a")},Lr.prototype.wa=function(t){Ft(this.g,new Or(t))},Lr.prototype.va=function(t){Ft(this.g,new Dr(t))},Lr.prototype.ua=function(){Ft(this.g,"b")},Rr.prototype.createWebChannel=Rr.prototype.g,xr.prototype.send=xr.prototype.u,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,Ie.COMPLETE="complete",Se.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",Mt.prototype.listen=Mt.prototype.N,zn.prototype.listenOnce=zn.prototype.O,zn.prototype.getLastError=zn.prototype.La,zn.prototype.getLastErrorCode=zn.prototype.Da,zn.prototype.getStatus=zn.prototype.ba,zn.prototype.getResponseJson=zn.prototype.Qa,zn.prototype.getResponseText=zn.prototype.ga,zn.prototype.send=zn.prototype.ea;var Mr=function(){return new Rr},Fr=function(){return de()},jr=we,Ur=Ie,qr=fe,Vr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Br=qn,Kr=Se,Wr=zn,Hr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Hr.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Gr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},zr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o(e,t),e}(Error),Qr=new l.Logger("@firebase/firestore");function $r(){return Qr.logLevel}function Yr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qr.logLevel<=l.LogLevel.DEBUG){var r=e.map(Zr);Qr.debug.apply(Qr,u(["Firestore (8.10.1): "+t],r))}}function Xr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qr.logLevel<=l.LogLevel.ERROR){var r=e.map(Zr);Qr.error.apply(Qr,u(["Firestore (8.10.1): "+t],r))}}function Jr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Qr.logLevel<=l.LogLevel.WARN){var r=e.map(Zr);Qr.warn.apply(Qr,u(["Firestore (8.10.1): "+t],r))}}function Zr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw Xr(e),new Error(e)}function ei(t,e){t||ti()}function ni(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ri(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function oi(t,e){return t<e?-1:t>e?1:0}function ai(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function si(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new zr(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new zr(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new zr(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new zr(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?oi(this.nanoseconds,t.nanoseconds):oi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ci=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ui(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ti(),void 0===n?n=t.length-e:n>t.length-e&&ti(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),di=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new zr(Gr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(pi),vi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return vi.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new zr(Gr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new zr(Gr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new zr(Gr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new zr(Gr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(pi),yi=function(){function t(t){this.fields=t,t.sort(gi.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ai(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),mi=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return oi(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();mi.EMPTY_BYTE_STRING=new mi("");var bi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(t){if(ei(!!t),"string"==typeof t){var e=0,n=bi.exec(t);if(ei(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wi(t.seconds),nanos:wi(t.nanos)}}function wi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ii(t){return"string"==typeof t?mi.fromBase64String(t):mi.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ei(t){var e=t.mapValue.fields.__previous_value__;return Ti(e)?Ei(e):e}function Si(t){var e=_i(t.mapValue.fields.__local_write_time__.timestampValue);return new ui(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t){return null==t}function ki(t){return 0===t&&1/t==-1/0}function Ai(t){return"number"==typeof t&&Number.isInteger(t)&&!ki(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(di.fromString(e))},t.fromName=function(e){return new t(di.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===di.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return di.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new di(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ti(t)?4:10:ti()}function Ri(t,e){var n=Pi(t);if(n!==Pi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Si(t).isEqual(Si(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=_i(t.timestampValue),r=_i(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ii(t.bytesValue).isEqual(Ii(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return wi(t.geoPointValue.latitude)===wi(e.geoPointValue.latitude)&&wi(t.geoPointValue.longitude)===wi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return wi(t.integerValue)===wi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=wi(t.doubleValue),r=wi(e.doubleValue);return n===r?ki(n)===ki(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ai(t.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(li(n)!==li(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ri(n[i],r[i])))return!1;return!0}(t,e);default:return ti()}}function xi(t,e){return void 0!==(t.values||[]).find((function(t){return Ri(t,e)}))}function Oi(t,e){var n=Pi(t),r=Pi(e);if(n!==r)return oi(n,r);switch(n){case 0:return 0;case 1:return oi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=wi(t.integerValue||t.doubleValue),r=wi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Di(t.timestampValue,e.timestampValue);case 4:return Di(Si(t),Si(e));case 5:return oi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ii(t),r=Ii(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=oi(n[i],r[i]);if(0!==o)return o}return oi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=oi(wi(t.latitude),wi(e.latitude));return 0!==n?n:oi(wi(t.longitude),wi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Oi(n[i],r[i]);if(o)return o}return oi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=oi(r[a],o[a]);if(0!==s)return s;var u=Oi(n[r[a]],i[o[a]]);if(0!==u)return u}return oi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ti()}}function Di(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oi(t,e);var n=_i(t),r=_i(e),i=oi(n.seconds,r.seconds);return 0!==i?i:oi(n.nanos,r.nanos)}function Li(t){return Mi(t)}function Mi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=_i(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ii(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ni.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Mi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Mi(t.fields[o])}return e+"}"}(t.mapValue):ti();var e,n}function Fi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ji(t){return!!t&&"integerValue"in t}function Ui(t){return!!t&&"arrayValue"in t}function qi(t){return!!t&&"nullValue"in t}function Vi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bi(t){return!!t&&"mapValue"in t}function Ki(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return hi(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Ki(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ki(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wi=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Bi(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ki(e)},t.prototype.setAll=function(t){var e=this,n=gi.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Ki(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Bi(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Ri(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Bi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){hi(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Ki(this.value))},t}();function Hi(t){var e=[];return hi(t.fields,(function(t,n){var r=new gi([t]);if(Bi(n)){var i=Hi(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new yi(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Gi=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ci.min(),Wi.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Wi.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Wi.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Wi.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Wi.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),zi=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new zi(t,e,n,r,i,o,a)}function $i(t){var e=ni(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Li(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Ci(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=uo(e.startAt)),e.endAt&&(n+="|ub:",n+=uo(e.endAt)),e.h=n}return e.h}function Yi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!lo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Ri(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fo(t.startAt,e.startAt)&&fo(t.endAt,e.endAt)}function Xi(t){return Ni.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ji=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return o(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Zi(t,n,r):"array-contains"===n?new ro(t,r):"in"===n?new io(t,r):"not-in"===n?new oo(t,r):"array-contains-any"===n?new ao(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new to(t,n):new eo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Oi(e,this.value)):null!==e&&Pi(this.value)===Pi(e)&&this.m(Oi(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ti()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Zi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ni.fromName(r.referenceValue),i}return o(e,t),e.prototype.matches=function(t){var e=Ni.comparator(t.key,this.key);return this.m(e)},e}(Ji),to=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=no("in",n),r}return o(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ji),eo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=no("not-in",n),r}return o(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ji);function no(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ni.fromName(t.referenceValue)}))}var ro=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return o(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Ui(e)&&xi(e.arrayValue,this.value)},e}(Ji),io=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return o(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&xi(this.value.arrayValue,e)},e}(Ji),oo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return o(e,t),e.prototype.matches=function(t){if(xi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!xi(this.value.arrayValue,e)},e}(Ji),ao=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return o(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Ui(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return xi(e.value.arrayValue,t)}))},e}(Ji),so=function(t,e){this.position=t,this.before=e};function uo(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Li(t)})).join(",")}var co=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function lo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ho(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Ni.comparator(Ni.fromName(a.referenceValue),n.key):Oi(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function fo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ri(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var po=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function vo(t,e,n,r,i,o,a,s){return new po(t,e,n,r,i,o,a,s)}function go(t){return new po(t)}function yo(t){return!Ci(t.limit)&&"F"===t.limitType}function mo(t){return!Ci(t.limit)&&"L"===t.limitType}function bo(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function _o(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function wo(t){return null!==t.collectionGroup}function Io(t){var e=ni(t);if(null===e.p){e.p=[];var n=_o(e),r=bo(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new co(n)),e.p.push(new co(gi.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new co(gi.keyField(),u))}}}return e.p}function To(t){var e=ni(t);if(!e.T)if("F"===e.limitType)e.T=Qi(e.path,e.collectionGroup,Io(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Io(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new co(o.field,a))}var s=e.endAt?new so(e.endAt.position,!e.endAt.before):null,u=e.startAt?new so(e.startAt.position,!e.startAt.before):null;e.T=Qi(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Eo(t,e,n){return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function So(t,e){return Yi(To(t),To(e))&&t.limitType===e.limitType}function Co(t){return $i(To(t))+"|lt:"+t.limitType}function ko(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Li(e.value);var e})).join(", ")+"]"),Ci(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+uo(t.startAt)),t.endAt&&(e+=", endAt: "+uo(t.endAt)),"Target("+e+")"}(To(t))+"; limitType="+t.limitType+")"}function Ao(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ni.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ho(t.startAt,Io(t),e))&&(!t.endAt||!ho(t.endAt,Io(t),e))}(t,e)}function No(t){return function(e,n){for(var r=!1,i=0,o=Io(t);i<o.length;i++){var a=o[i],s=Po(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Po(t,e,n){var r=t.field.isKeyField()?Ni.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Oi(r,i):ti()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ti()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ki(e)?"-0":e}}function xo(t){return{integerValue:""+t}}function Oo(t,e){return Ai(e)?xo(e):Ro(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Do=function(){this._=void 0};function Lo(t,e,n){return t instanceof jo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Uo?qo(t,e):t instanceof Vo?Bo(t,e):function(t,e){var n=Fo(t,e),r=Wo(n)+Wo(t.A);return ji(n)&&ji(t.A)?xo(r):Ro(t.R,r)}(t,e)}function Mo(t,e,n){return t instanceof Uo?qo(t,e):t instanceof Vo?Bo(t,e):n}function Fo(t,e){return t instanceof Ko?ji(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Do),Uo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o(e,t),e}(Do);function qo(t,e){for(var n=Ho(e),r=function(t){n.some((function(e){return Ri(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o(e,t),e}(Do);function Bo(t,e){for(var n=Ho(e),r=function(t){n=n.filter((function(e){return!Ri(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ko=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return o(e,t),e}(Do);function Wo(t){return wi(t.integerValue||t.doubleValue)}function Ho(t){return Ui(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Go=function(t,e){this.field=t,this.transform=e},zo=function(t,e){this.version=t,this.transformResults=e},Qo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function $o(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Yo=function(){};function Xo(t,e,n){t instanceof na?function(t,e,n){var r=t.value.clone(),i=oa(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ra?function(t,e,n){if($o(t.precondition,e)){var r=oa(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ia(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Jo(t,e,n){t instanceof na?function(t,e,n){if($o(t.precondition,e)){var r=t.value.clone(),i=aa(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ea(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ra?function(t,e,n){if($o(t.precondition,e)){var r=aa(t.fieldTransforms,n,e),i=e.data;i.setAll(ia(t)),i.setAll(r),e.convertToFoundDocument(ea(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){$o(t.precondition,e)&&e.convertToNoDocument(ci.min())}(t,e)}function Zo(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Fo(o.transform,a||null);null!=s&&(null==n&&(n=Wi.empty()),n.set(o.field,s))}return n||null}function ta(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ai(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Uo&&e instanceof Uo||t instanceof Vo&&e instanceof Vo?ai(t.elements,e.elements,Ri):t instanceof Ko&&e instanceof Ko?Ri(t.A,e.A):t instanceof jo&&e instanceof jo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ea(t){return t.isFoundDocument()?t.version:ci.min()}var na=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return o(e,t),e}(Yo),ra=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return o(e,t),e}(Yo);function ia(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function oa(t,e,n){var r=new Map;ei(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Mo(a,s,n[i]))}return r}function aa(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Lo(s,u,e))}return r}var sa,ua,ca=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return o(e,t),e}(Yo),la=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return o(e,t),e}(Yo),ha=function(t){this.count=t};function fa(t){switch(t){case Gr.OK:return ti();case Gr.CANCELLED:case Gr.UNKNOWN:case Gr.DEADLINE_EXCEEDED:case Gr.RESOURCE_EXHAUSTED:case Gr.INTERNAL:case Gr.UNAVAILABLE:case Gr.UNAUTHENTICATED:return!1;case Gr.INVALID_ARGUMENT:case Gr.NOT_FOUND:case Gr.ALREADY_EXISTS:case Gr.PERMISSION_DENIED:case Gr.FAILED_PRECONDITION:case Gr.ABORTED:case Gr.OUT_OF_RANGE:case Gr.UNIMPLEMENTED:case Gr.DATA_LOSS:return!0;default:return ti()}}function pa(t){if(void 0===t)return Xr("GRPC error has no .code"),Gr.UNKNOWN;switch(t){case sa.OK:return Gr.OK;case sa.CANCELLED:return Gr.CANCELLED;case sa.UNKNOWN:return Gr.UNKNOWN;case sa.DEADLINE_EXCEEDED:return Gr.DEADLINE_EXCEEDED;case sa.RESOURCE_EXHAUSTED:return Gr.RESOURCE_EXHAUSTED;case sa.INTERNAL:return Gr.INTERNAL;case sa.UNAVAILABLE:return Gr.UNAVAILABLE;case sa.UNAUTHENTICATED:return Gr.UNAUTHENTICATED;case sa.INVALID_ARGUMENT:return Gr.INVALID_ARGUMENT;case sa.NOT_FOUND:return Gr.NOT_FOUND;case sa.ALREADY_EXISTS:return Gr.ALREADY_EXISTS;case sa.PERMISSION_DENIED:return Gr.PERMISSION_DENIED;case sa.FAILED_PRECONDITION:return Gr.FAILED_PRECONDITION;case sa.ABORTED:return Gr.ABORTED;case sa.OUT_OF_RANGE:return Gr.OUT_OF_RANGE;case sa.UNIMPLEMENTED:return Gr.UNIMPLEMENTED;case sa.DATA_LOSS:return Gr.DATA_LOSS;default:return ti()}}(ua=sa||(sa={}))[ua.OK=0]="OK",ua[ua.CANCELLED=1]="CANCELLED",ua[ua.UNKNOWN=2]="UNKNOWN",ua[ua.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ua[ua.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ua[ua.NOT_FOUND=5]="NOT_FOUND",ua[ua.ALREADY_EXISTS=6]="ALREADY_EXISTS",ua[ua.PERMISSION_DENIED=7]="PERMISSION_DENIED",ua[ua.UNAUTHENTICATED=16]="UNAUTHENTICATED",ua[ua.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ua[ua.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ua[ua.ABORTED=10]="ABORTED",ua[ua.OUT_OF_RANGE=11]="OUT_OF_RANGE",ua[ua.UNIMPLEMENTED=12]="UNIMPLEMENTED",ua[ua.INTERNAL=13]="INTERNAL",ua[ua.UNAVAILABLE=14]="UNAVAILABLE",ua[ua.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var da=function(){function t(t,e){this.comparator=t,this.root=e||ga.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ga.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ga.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new va(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new va(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new va(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new va(this.root,t,this.comparator,!0)},t}(),va=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ga=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw ti();if(this.right.isRed())throw ti();var t=this.left.check();if(t!==this.right.check())throw ti();return t+(this.isRed()?0:1)},t}();ga.EMPTY=null,ga.RED=!0,ga.BLACK=!1,ga.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ti()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ti()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ti()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ti()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ti()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ga(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ya=function(){function t(t){this.comparator=t,this.data=new da(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ma(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ma(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ma=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ba=new da(Ni.comparator);function _a(){return ba}var wa=new da(Ni.comparator);function Ia(){return wa}var Ta=new da(Ni.comparator);function Ea(){return Ta}var Sa=new ya(Ni.comparator);function Ca(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Sa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ka=new ya(oi);function Aa(){return ka}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Na=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Pa.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ci.min(),r,Aa(),_a(),Ca())},t}(),Pa=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(mi.EMPTY_BYTE_STRING,n,Ca(),Ca(),Ca())},t}(),Ra=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},xa=function(t,e){this.targetId=t,this.V=e},Oa=function(t,e,n,r){void 0===n&&(n=mi.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Da=function(){function t(){this.S=0,this.D=Fa(),this.C=mi.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=Ca(),e=Ca(),n=Ca();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ti()}})),new Pa(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=Fa()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),La=function(){function t(t){this.W=t,this.G=new Map,this.H=_a(),this.J=Ma(),this.Y=new ya(oi)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:ti()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Xi(i))if(0===n){var o=new Ni(i.path);this.tt(e,o,Gi.newNoDocument(o,ci.min()))}else ei(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Xi(o.target)){var a=new Ni(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Gi.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Ca();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Na(t,n,this.Y,this.H,r);return this.H=_a(),this.J=Ma(),this.Y=new ya(oi),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Da,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new ya(oi),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Yr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Da),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ma(){return new da(Ni.comparator)}function Fa(){return new da(Ni.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ja={asc:"ASCENDING",desc:"DESCENDING"},Ua={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qa=function(t,e){this.databaseId=t,this.I=e};function Va(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ba(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ka(t,e){return Va(t,e.toTimestamp())}function Wa(t){return ei(!!t),ci.fromTimestamp(function(t){var e=_i(t);return new ui(e.seconds,e.nanos)}(t))}function Ha(t,e){return function(t){return new di(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ga(t){var e=di.fromString(t);return ei(gs(e)),e}function za(t,e){return Ha(t.databaseId,e.path)}function Qa(t,e){var n=Ga(e);if(n.get(1)!==t.databaseId.projectId)throw new zr(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new zr(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ni(Ja(n))}function $a(t,e){return Ha(t.databaseId,e)}function Ya(t){var e=Ga(t);return 4===e.length?di.emptyPath():Ja(e)}function Xa(t){return new di(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ja(t){return ei(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Za(t,e,n){return{name:za(t,e),fields:n.value.mapValue.fields}}function ts(t,e,n){var r=Qa(t,e.name),i=Wa(e.updateTime),o=new Wi({mapValue:{fields:e.fields}}),a=Gi.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function es(t,e){var n;if(e instanceof na)n={update:Za(t,e.key,e.value)};else if(e instanceof ca)n={delete:za(t,e.key)};else if(e instanceof ra)n={update:Za(t,e.key,e.data),updateMask:vs(e.fieldMask)};else{if(!(e instanceof la))return ti();n={verify:za(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof jo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Uo)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ko)return{fieldPath:e.field.canonicalString(),increment:n.A};throw ti()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ka(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ti()}(t,e.precondition)),n}function ns(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Qo.updateTime(Wa(t.updateTime)):void 0!==t.exists?Qo.exists(t.exists):Qo.none()}(e.currentDocument):Qo.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)ei("REQUEST_TIME"===e.setToServerValue),n=new jo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Uo(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Vo(i)}else"increment"in e?n=new Ko(t,e.increment):ti();var o=gi.fromServerFormat(e.fieldPath);return new Go(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Qa(t,e.update.name),o=new Wi({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new yi(e.map((function(t){return gi.fromServerFormat(t)})))}(e.updateMask);return new ra(i,o,a,n,r)}return new na(i,o,n,r)}if(e.delete){var s=Qa(t,e.delete);return new ca(s,n)}if(e.verify){var u=Qa(t,e.verify);return new la(u,n)}return ti()}function rs(t,e){return{documents:[$a(t,e.path)]}}function is(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=$a(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=$a(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Vi(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NAN"}};if(qi(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Vi(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NOT_NAN"}};if(qi(t.value))return{unaryFilter:{field:hs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hs(t.field),op:ls(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:hs(t.field),direction:cs(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||Ci(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=ss(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ss(e.endAt)),n}function os(t){var e=Ya(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ei(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=as(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new co(fs(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Ci(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=us(n.startAt));var l=null;return n.endAt&&(l=us(n.endAt)),vo(e,i,s,a,u,"F",c,l)}function as(t){return t?void 0!==t.unaryFilter?[ds(t)]:void 0!==t.fieldFilter?[ps(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return as(t)})).reduce((function(t,e){return t.concat(e)})):ti():[]}function ss(t){return{before:t.before,values:t.position}}function us(t){var e=!!t.before,n=t.values||[];return new so(n,e)}function cs(t){return ja[t]}function ls(t){return Ua[t]}function hs(t){return{fieldPath:t.canonicalString()}}function fs(t){return gi.fromServerFormat(t.fieldPath)}function ps(t){return Ji.create(fs(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ti()}}(t.fieldFilter.op),t.fieldFilter.value)}function ds(t){switch(t.unaryFilter.op){case"IS_NAN":var e=fs(t.unaryFilter.field);return Ji.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=fs(t.unaryFilter.field);return Ji.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=fs(t.unaryFilter.field);return Ji.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=fs(t.unaryFilter.field);return Ji.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ti()}}function vs(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function gs(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=bs(e)),e=ms(t.get(n),e);return bs(e)}function ms(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function bs(t){return t+""}function _s(t){var e=t.length;if(ei(e>=2),2===e)return ei(""===t.charAt(0)&&""===t.charAt(1)),di.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&ti(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:ti()}o=a+2}return new di(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ws=function(t,e){this.seconds=t,this.nanoseconds=e},Is=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Is.store="owner",Is.key="owner";var Ts=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ts.store="mutationQueues",Ts.keyPath="userId";var Es=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Es.store="mutations",Es.keyPath="batchId",Es.userMutationsIndex="userMutationsIndex",Es.userMutationsKeyPath=["userId","batchId"];var Ss=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ys(e)]},t.key=function(t,e,n){return[t,ys(e),n]},t}();Ss.store="documentMutations",Ss.PLACEHOLDER=new Ss;var Cs=function(t,e){this.path=t,this.readTime=e},ks=function(t,e){this.path=t,this.version=e},As=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};As.store="remoteDocuments",As.readTimeIndex="readTimeIndex",As.readTimeIndexPath="readTime",As.collectionReadTimeIndex="collectionReadTimeIndex",As.collectionReadTimeIndexPath=["parentPath","readTime"];var Ns=function(t){this.byteSize=t};Ns.store="remoteDocumentGlobal",Ns.key="remoteDocumentGlobalKey";var Ps=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Ps.store="targets",Ps.keyPath="targetId",Ps.queryTargetsIndexName="queryTargetsIndex",Ps.queryTargetsKeyPath=["canonicalId","targetId"];var Rs=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Rs.store="targetDocuments",Rs.keyPath=["targetId","path"],Rs.documentTargetsIndex="documentTargetsIndex",Rs.documentTargetsKeyPath=["path","targetId"];var xs=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};xs.key="targetGlobalKey",xs.store="targetGlobal";var Os=function(t,e){this.collectionId=t,this.parent=e};Os.store="collectionParents",Os.keyPath=["collectionId","parent"];var Ds=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ds.store="clientMetadata",Ds.keyPath="clientId";var Ls=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ls.store="bundles",Ls.keyPath="bundleId";var Ms=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ms.store="namedQueries",Ms.keyPath="name";var Fs=u(u([],u(u([],u(u([],u(u([],[Ts.store,Es.store,Ss.store,As.store,Ps.store,Is.store,xs.store,Rs.store]),[Ds.store])),[Ns.store])),[Os.store])),[Ls.store,Ms.store]),js="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Us=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),qs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Vs=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&ti(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Bs=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new qs,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Hs(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Ys(e.target.error);n.ft.reject(new Hs(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Hs(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Yr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new zs(e)},t}(),Ks=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,c.getUA)())&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Yr("SimpleDb","Removing database:",t),Qs(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,c.getUA)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={NODE_ENV:"production",BASE_URL:"/"})||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return s(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Yr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Hs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new zr(Gr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Hs(t,n))},i.onupgradeneeded=function(t){Yr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Yr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,a,u,c;return s(this,(function(l){switch(l.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,c,l,h;return s(this,(function(s){switch(s.label){case 0:++o,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=s.sent(),e=Bs.open(u.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Vs.reject(t)})).toPromise(),c={},a.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(s.sent(),a),c)];case 4:return l=s.sent(),h="FirebaseError"!==l.name&&o<3,Yr("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ws=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Qs(this.Pt.delete())},t}(),Hs=function(t){function e(e,n){var r=this;return(r=t.call(this,Gr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return o(e,t),e}(zr);function Gs(t){return"IndexedDbTransactionError"===t.name}var zs=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Yr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Yr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Qs(n)},t.prototype.add=function(t){return Yr("SimpleDb","ADD",this.store.name,t,t),Qs(this.store.add(t))},t.prototype.get=function(t){var e=this;return Qs(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Yr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Yr("SimpleDb","DELETE",this.store.name,t),Qs(this.store.delete(t))},t.prototype.count=function(){return Yr("SimpleDb","COUNT",this.store.name),Qs(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Yr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Vs((function(n,r){e.onerror=function(t){var e=Ys(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Vs((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ws(i),a=e(i.primaryKey,i.value,o);if(a instanceof Vs){var s=a.catch((function(t){return o.done(),Vs.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Vs.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Qs(t){return new Vs((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ys(t.target.error);n(e)}}))}var $s=!1;function Ys(t){var e=Ks._t((0,c.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new zr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return $s||($s=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return o(e,t),e}(Us);function Js(t,e){var n=ni(t);return Ks.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zs=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Xo(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Jo(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Jo(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ci.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ca())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ai(this.mutations,t.mutations,(function(t,e){return ta(t,e)}))&&ai(this.baseMutations,t.baseMutations,(function(t,e){return ta(t,e)}))},t}(),tu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){ei(e.mutations.length===r.length);for(var i=Ea(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),eu=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=ci.min()),void 0===o&&(o=ci.min()),void 0===a&&(a=mi.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),nu=function(t){this.Lt=t};function ru(t,e){if(e.document)return ts(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ni.fromSegments(e.noDocument.path),r=uu(e.noDocument.readTime),i=Gi.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ni.fromSegments(e.unknownDocument.path);return r=uu(e.unknownDocument.version),Gi.newUnknownDocument(o,r)}return ti()}function iu(t,e,n){var r=ou(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:za(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Va(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new As(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=su(e.version);return a=e.hasCommittedMutations,new As(null,new Cs(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=su(e.version);return new As(new ks(c,l),null,null,!0,r,i)}return ti()}function ou(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function au(t){var e=new ui(t[0],t[1]);return ci.fromTimestamp(e)}function su(t){var e=t.toTimestamp();return new ws(e.seconds,e.nanoseconds)}function uu(t){var e=new ui(t.seconds,t.nanoseconds);return ci.fromTimestamp(e)}function cu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return ns(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return ns(t.Lt,e)})),s=ui.fromMillis(e.localWriteTimeMs);return new Zs(e.batchId,s,n,a)}function lu(t){var e,n,r=uu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?uu(t.lastLimboFreeSnapshotVersion):ci.min();return void 0!==t.query.documents?(ei(1===(n=t.query).documents.length),e=To(go(Ya(n.documents[0])))):e=function(t){return To(os(t))}(t.query),new eu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,mi.fromBase64String(t.resumeToken))}function hu(t,e){var n,r=su(e.snapshotVersion),i=su(e.lastLimboFreeSnapshotVersion);n=Xi(e.target)?rs(t.Lt,e.target):is(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Ps(e.targetId,$i(e.target),r,o,e.sequenceNumber,i,n)}function fu(t){var e=os({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Eo(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pu=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return du(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:uu(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return du(t).put({bundleId:(n=e).id,createTime:su(Wa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return vu(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:fu(e.bundledQuery),readTime:uu(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return vu(t).put(function(t){return{name:t.name,readTime:su(Wa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function du(t){return Js(t,Ls.store)}function vu(t){return Js(t,Ms.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gu=function(){function t(){this.Bt=new yu}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Vs.resolve()},t.prototype.getCollectionParents=function(t,e){return Vs.resolve(this.Bt.getEntries(e))},t}(),yu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ya(di.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ya(di.comparator)).toArray()},t}(),mu=function(){function t(){this.qt=new yu}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:ys(i)};return bu(t).put(o)}return Vs.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[si(e),""],!1,!0);return bu(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(_s(o.parent))}return n}))},t}();function bu(t){return Js(t,Os.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _u={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t,e,n){var r=t.store(Es.store),i=t.store(Ss.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){ei(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Ss.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Vs.waitFor(o).next((function(){return c}))}function Tu(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ti();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wu.DEFAULT_COLLECTION_PERCENTILE=10,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wu.DEFAULT=new wu(41943040,wu.DEFAULT_COLLECTION_PERCENTILE,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wu.DISABLED=new wu(-1,0,0);var Eu=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return ei(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cu(t).$t({index:Es.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=ku(t),a=Cu(t);return a.add({}).next((function(s){ei("number"==typeof s);for(var u=new Zs(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return es(t.Lt,e)})),i=n.mutations.map((function(e){return es(t.Lt,e)}));return new Es(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new ya((function(t,e){return oi(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Ss.key(i.userId,d.key.path,s);h=h.add(d.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,Ss.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),Vs.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Cu(t).get(e).next((function(t){return t?(ei(t.userId===n.userId),cu(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Vs.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Cu(t).$t({index:Es.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ei(e.batchId>=r),o=cu(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Cu(t).$t({index:Es.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cu(t).Nt(Es.userMutationsIndex,n).next((function(t){return t.map((function(t){return cu(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Ss.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ku(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=_s(u);if(s===n.userId&&e.path.isEqual(l))return Cu(t).get(c).next((function(t){if(!t)throw ti();ei(t.userId===n.userId),o.push(cu(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ya(oi),i=[];return e.forEach((function(e){var o=Ss.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=ku(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=_s(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Vs.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ss.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ya(oi);return ku(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=_s(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Cu(t).get(e).next((function(t){if(null===t)throw ti();ei(t.userId===n.userId),r.push(cu(n.R,t))})))})),Vs.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Iu(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Vs.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Vs.resolve();var r=IDBKeyRange.lowerBound(Ss.prefixForUser(e.userId)),i=[];return ku(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=_s(t[1]);i.push(o)}else r.done()})).next((function(){ei(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Su(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Au(t).get(this.userId).next((function(t){return t||new Ts(e.userId,-1,"")}))},t}();function Su(t,e,n){var r=Ss.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return ku(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Cu(t){return Js(t,Es.store)}function ku(t){return Js(t,Ss.store)}function Au(t){return Js(t,Ts.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Pu=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Nu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return ci.fromTimestamp(new ui(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Ru(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return ei(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Ru(t).$t((function(a,s){var u=lu(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Vs.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Ru(t).$t((function(t,n){var r=lu(n);e(r)}))},t.prototype.Xt=function(t){return xu(t).get(xs.key).next((function(t){return ei(null!==t),t}))},t.prototype.Zt=function(t,e){return xu(t).put(xs.key,e)},t.prototype.te=function(t,e){return Ru(t).put(hu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=$i(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ru(t).$t({range:r,index:Ps.queryTargetsIndexName},(function(t,n,r){var o=lu(n);Yi(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Ou(t);return e.forEach((function(e){var a=ys(e.path);i.push(o.put(new Rs(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Vs.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ou(t);return Vs.forEach(e,(function(e){var o=ys(e.path);return Vs.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ou(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ou(t),i=Ca();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=_s(t[1]),o=new Ni(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=ys(e.path),r=IDBKeyRange.bound([n],[si(n)],!1,!0),i=0;return Ou(t).$t({index:Rs.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Ru(t).get(e).next((function(t){return t?lu(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){return Js(t,Ps.store)}function xu(t){return Js(t,xs.store)}function Ou(t){return Js(t,Rs.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){if(t.code!==Gr.FAILED_PRECONDITION||t.message!==js)throw t;return Yr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=oi(n,i);return 0===a?oi(r,o):a}var Mu=function(){function t(t){this.ne=t,this.buffer=new ya(Lu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Lu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Fu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Yr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return a(e,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Gs(e=n.sent())?(Yr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Du(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ju=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Vs.resolve(Hr.o);var r=new Mu(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Yr("LruGarbageCollector","Garbage collection skipped; disabled"),Vs.resolve(_u)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Yr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),_u):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Yr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),$r()<=l.LogLevel.DEBUG&&Yr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),Vs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Uu=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ju(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return qu(t,n)},t.prototype.removeReference=function(t,e,n){return qu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return qu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Au(t).Ot((function(r){return Su(t,r,e).next((function(t){return t&&(n=!0),Vs.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Ou(t).delete([0,ys(a.path)])}))}));i.push(u)}})).next((function(){return Vs.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return qu(t,e)},t.prototype.we=function(t,e){var n,r=Ou(t),i=Hr.o;return r.$t({index:Rs.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Hr.o&&e(new Ni(_s(n)),i),i=s,n=a):i=Hr.o})).next((function(){i!==Hr.o&&e(new Ni(_s(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function qu(t,e){return Ou(t).put(function(t,e){return new Rs(0,ys(t.path),e)}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){hi(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return fi(this.inner)},t}(),Bu=function(){function t(){this.changes=new Vu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ci.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Gi.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Vs.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Ku=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Gu(t).put(zu(e),n)},t.prototype.removeEntry=function(t,e){var n=Gu(t),r=zu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Gu(t).get(zu(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Gu(t).get(zu(e)).next((function(t){return{document:n.ye(e,t),size:Tu(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=_a();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=_a(),i=new da(Ni.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Tu(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Vs.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Gu(t).$t({range:r},(function(t,e,r){for(var a=Ni.fromSegments(t);o&&Ni.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=_a(),o=e.path.length+1,a={};if(n.isEqual(ci.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=ou(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=As.collectionReadTimeIndex}return Gu(t).$t(a,(function(t,n,a){if(t.length===o){var s=ru(r.R,n);e.path.isPrefixOf(s.key.path)?Ao(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Wu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Hu(t).get(Ns.key).next((function(t){return ei(!!t),t}))},t.prototype.me=function(t,e){return Hu(t).put(Ns.key,e)},t.prototype.ye=function(t,e){if(e){var n=ru(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ci.min()))return n}return Gi.newInvalidDocument(t)},t}(),Wu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Vu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return o(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ya((function(t,e){return oi(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=iu(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Tu(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=iu(e.Ie.R,Gi.newNoDocument(o,ci.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Vs.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Bu);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t){return Js(t,Ns.store)}function Gu(t){return Js(t,As.store)}function zu(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;ei(n<r&&n>=0&&r<=11);var o=new Bs("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Is.store)}(t),function(t){t.createObjectStore(Ts.store,{keyPath:Ts.keyPath}),t.createObjectStore(Es.store,{keyPath:Es.keyPath,autoIncrement:!0}).createIndex(Es.userMutationsIndex,Es.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ss.store)}(t),$u(t),function(t){t.createObjectStore(As.store)}(t));var a=Vs.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Rs.store),t.deleteObjectStore(Ps.store),t.deleteObjectStore(xs.store)}(t),$u(t)),a=a.next((function(){return function(t){var e=t.store(xs.store),n=new xs(0,0,ci.min().toTimestamp(),0);return e.put(xs.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Es.store).Nt().next((function(n){t.deleteObjectStore(Es.store),t.createObjectStore(Es.store,{keyPath:Es.keyPath,autoIncrement:!0}).createIndex(Es.userMutationsIndex,Es.userMutationsKeyPath,{unique:!0});var r=e.store(Es.store),i=n.map((function(t){return r.put(t)}));return Vs.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Ds.store,{keyPath:Ds.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Ns.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(As.store);e.createIndex(As.readTimeIndex,As.readTimeIndexPath,{unique:!1}),e.createIndex(As.collectionReadTimeIndex,As.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Ls.store,{keyPath:Ls.keyPath})}(t),function(t){t.createObjectStore(Ms.store,{keyPath:Ms.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(As.store).$t((function(t,n){e+=Tu(n)})).next((function(){var n=new Ns(e);return t.store(Ns.store).put(Ns.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Ts.store),r=t.store(Es.store);return n.Nt().next((function(n){return Vs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Es.userMutationsIndex,i).next((function(r){return Vs.forEach(r,(function(r){ei(r.userId===n.userId);var i=cu(e.R,r);return Iu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Rs.store),n=t.store(As.store);return t.store(xs.store).get(xs.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new di(n),a=function(t){return[0,ys(t)]}(o);r.push(e.get(a).next((function(n){return n?Vs.resolve():function(n){return e.put(new Rs(0,ys(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Vs.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Os.store,{keyPath:Os.keyPath});var n=e.store(Os.store),r=new yu,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:ys(i)})}};return e.store(As.store).$t({Ft:!0},(function(t,e){var n=new di(t);return i(n.popLast())})).next((function(){return e.store(Ss.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=_s(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Ps.store);return n.$t((function(t,r){var i=lu(r),o=hu(e.R,i);return n.put(o)}))},t}();function $u(t){t.createObjectStore(Rs.store,{keyPath:Rs.keyPath}).createIndex(Rs.documentTargetsIndex,Rs.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ps.store,{keyPath:Ps.keyPath}).createIndex(Ps.queryTargetsIndexName,Ps.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(xs.store)}var Yu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xu=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new zr(Gr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uu(this,i),this.Le=n+"main",this.R=new nu(u),this.Be=new Ks(this.Le,11,new Qu(this.R)),this.qe=new Pu(this.referenceDelegate,this.R),this.Ut=new mu,this.Ue=function(t,e){return new Ku(t,e)}(this.R,this.Ut),this.Ke=new pu,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new zr(Gr.FAILED_PRECONDITION,Yu);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Hr(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return a(e,void 0,void 0,(function(){return s(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return a(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return a(e,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Zu(e).put(new Ds(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Gs(e))return Yr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Yr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Ju(t).get(Is.key).next((function(t){return Vs.resolve(e.tn(t))}))},t.prototype.en=function(t){return Zu(t).delete(this.clientId)},t.prototype.nn=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i=this;return s(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Js(t,Ds.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Vs.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Vs.resolve(!0):Ju(t).get(Is.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new zr(Gr.FAILED_PRECONDITION,Yu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Zu(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Yr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return a(this,void 0,void 0,(function(){var t=this;return s(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Is.store,Ds.store],(function(e){var n=new Xs(e,Hr.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Zu(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Eu.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Yr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Fs,(function(o){return i=new Xs(o,r.Ne?r.Ne.next():Hr.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Xr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new zr(Gr.FAILED_PRECONDITION,js);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Ju(t).get(Is.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new zr(Gr.FAILED_PRECONDITION,Yu)}))},t.prototype.Ze=function(t){var e=new Is(this.clientId,this.allowTabSynchronization,Date.now());return Ju(t).put(Is.key,e)},t.yt=function(){return Ks.yt()},t.prototype.Xe=function(t){var e=this,n=Ju(t);return n.get(Is.key).next((function(t){return e.tn(t)?(Yr("IndexedDbPersistence","Releasing primary lease."),n.delete(Is.key)):Vs.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Xr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,c.isSafari)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Yr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Xr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Xr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ju(t){return Js(t,Is.store)}function Zu(t){return Js(t,Ds.store)}function tc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ec=function(t,e){this.progress=t,this.wn=e},nc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Ni.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):wo(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Ni(e)).next((function(t){var e=Ia();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Ia();return this.Ut.getCollectionParents(t,i).next((function(a){return Vs.forEach(a,(function(a){var s=function(t,e){return new po(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Gi.newInvalidDocument(c),r=r.insert(c,l)),Jo(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Ao(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Ca(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ra&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),rc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ca(),i=Ca(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ic=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ci.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(yo(e)||mo(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):($r()<=l.LogLevel.DEBUG&&Yr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ko(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new ya(No(t));return e.forEach((function(e,r){Ao(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return $r()<=l.LogLevel.DEBUG&&Yr("QueryEngine","Using full collection scan to execute query:",ko(e)),this.Sn.getDocumentsMatchingQuery(t,e,ci.min())},t}(),oc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new da(oi),this.Fn=new Vu((function(t){return $i(t)}),Yi),this.$n=ci.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new nc(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t,e,n,r){return new oc(t,e,n,r)}function sc(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o;return s(this,(function(a){switch(a.label){case 0:return n=ni(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new nc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Ca(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function uc(t,e){var n=ni(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Vs.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);ei(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function cc(t){var e=ni(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function lc(t,e){var n=ni(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return ei(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=_a();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(hc(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(ci.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Vs.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.kn=i,t}))}function hc(t,e,n,r,i){var o=Ca();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=_a();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(ci.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Yr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function fc(t,e){var n=ni(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function pc(t,e){var n=ni(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Vs.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new eu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function dc(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a;return s(this,(function(s){switch(s.label){case 0:r=ni(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Gs(a=s.sent()))throw a;return Yr("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function vc(t,e,n){var r=ni(t),i=ci.min(),o=Ca();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ni(t),i=r.Fn.get(n);return void 0!==i?Vs.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,To(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ci.min(),n?o:Ca())})).next((function(t){return{documents:t,Bn:o}}))}))}function gc(t,e){var n=ni(t),r=ni(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function yc(t){var e=ni(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ni(t),i=_a(),o=ou(n),a=Gu(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:As.readTimeIndex,range:s},(function(t,e){var n=ru(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:au(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function mc(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){return[2,(e=ni(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Gu(t),n=ci.min();return e.$t({index:As.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=au(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function bc(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,a,u,c,l,h,f,p,d;return s(this,(function(s){switch(s.label){case 0:for(i=ni(t),o=Ca(),a=_a(),u=Ea(),c=0,l=n;c<l.length;c++)h=l[c],f=e.qn(h.metadata.name),h.document&&(o=o.add(f)),a=a.insert(f,e.Un(h)),u=u.insert(f,e.Kn(h.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,pc(i,function(t){return To(go(di.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=s.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return hc(t,p,a,ci.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function _c(t,e,n){return void 0===n&&(n=Ca()),a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:return[4,pc(t,To(fu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ni(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Wa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(mi.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var wc=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Vs.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Wa(n.createTime)}),Vs.resolve()},t.prototype.getNamedQuery=function(t,e){return Vs.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:fu(t.bundledQuery),readTime:Wa(t.readTime)}}(e)),Vs.resolve()},t}(),Ic=function(){function t(){this.Wn=new ya(Tc.Gn),this.zn=new ya(Tc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Tc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Tc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Ni(new di([])),r=new Tc(n,t),i=new Tc(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ni(new di([])),n=new Tc(e,t),r=new Tc(e,t+1),i=Ca();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Tc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Tc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ni.comparator(t.key,e.key)||oi(t.ns,e.ns)},t.Hn=function(t,e){return oi(t.ns,e.ns)||Ni.comparator(t.key,e.key)},t}(),Ec=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new ya(Tc.Gn)}return t.prototype.checkEmpty=function(t){return Vs.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Zs(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Tc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Vs.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Vs.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Vs.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Vs.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Vs.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Tc(e,0),i=new Tc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Vs.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ya(oi);return e.forEach((function(t){var e=new Tc(t,0),i=new Tc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Vs.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ni.isDocumentKey(i)||(i=i.child(""));var o=new Tc(new Ni(i),0),a=new ya(oi);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Vs.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;ei(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Vs.forEach(e.mutations,(function(i){var o=new Tc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Tc(e,0),r=this.rs.firstAfterOrEqual(n);return Vs.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Vs.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Sc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new da(Ni.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Vs.resolve(n?n.document.clone():Gi.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=_a();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Gi.newInvalidDocument(t))})),Vs.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=_a(),i=new Ni(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Ao(e,c)&&(r=r.insert(c.key,c.clone()))}return Vs.resolve(r)},t.prototype.fs=function(t,e){return Vs.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Cc(this)},t.prototype.getSize=function(t){return Vs.resolve(this.size)},t}(),Cc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return o(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Vs.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Bu),kc=function(){function t(t){this.persistence=t,this.ds=new Vu((function(t){return $i(t)}),Yi),this.lastRemoteSnapshotVersion=ci.min(),this.highestTargetId=0,this.ws=0,this._s=new Ic,this.targetCount=0,this.ys=Nu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Vs.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Vs.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Vs.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Vs.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Vs.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Nu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Vs.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Vs.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Vs.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Vs.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Vs.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Vs.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Vs.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Vs.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Vs.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Vs.resolve(n)},t.prototype.containsKey=function(t,e){return Vs.resolve(this._s.containsKey(e))},t}(),Ac=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Hr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new kc(this),this.Ut=new gu,this.Ue=function(t,e){return new Sc(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new nu(e),this.Ke=new wc(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ec(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Yr("MemoryPersistence","Starting transaction:",t);var i=new Nc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Vs.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Nc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return o(e,t),e}(Us),Pc=function(){function t(t){this.persistence=t,this.As=new Ic,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw ti()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Vs.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Vs.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Vs.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Vs.forEach(this.vs,(function(r){var i=Ni.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Vs.or([function(){return Vs.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Rc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t,e){return"firestore_clients_"+t+"_"+e}function Oc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Dc(t,e){return"firestore_targets_"+t+"_"+e}Rc.UNAUTHENTICATED=new Rc(null),Rc.GOOGLE_CREDENTIALS=new Rc("google-credentials-uid"),Rc.FIRST_PARTY=new Rc("first-party-uid"),Rc.MOCK_USER=new Rc("mock-user");var Lc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new zr(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Xr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Mc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new zr(i.error.code,i.error.message)),o?new t(e,i.state,r):(Xr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Fc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Aa(),a=0;i&&a<r.activeTargetIds.length;++a)i=Ai(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Xr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),jc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Xr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Uc=function(){function t(){this.activeTargetIds=Aa()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),qc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new da(oi),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=xc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new Uc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,u,c,l,h,f=this;return s(this,(function(s){switch(s.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(xc(this.persistenceKey,r)))&&(o=Fc.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(u=this.js(a))&&this.Ws(u),c=0,l=this.$s;c<l.length;c++)h=l[c],this.ks(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Dc(this.persistenceKey,t));if(n){var r=Mc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Dc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Yr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Yr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Yr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Yr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return a(e,void 0,void 0,(function(){var t,e,r,i,o,a;return s(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Hr.o;if(null!=t)try{var n=JSON.parse(t);ei("number"==typeof n),e=n}catch(t){Xr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Hr.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Lc(this.currentUser,t,e,n),i=Oc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Oc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Dc(this.persistenceKey,t),i=new Mc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Fc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Lc.Vs(new Rc(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Mc.Vs(r,e)},t.prototype.js=function(t){return jc.Vs(t)},t.prototype.ii=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Yr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Aa();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Vc=function(){function t(){this.li=new Uc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Uc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Bc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Kc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Yr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Yr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Wc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Hc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Gc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return o(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var a=new Wr;a.listenOnce(Ur.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case jr.NO_ERROR:var e=a.getResponseJson();Yr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case jr.TIMEOUT:Yr("Connection",'RPC "'+t+'" timed out'),o(new zr(Gr.DEADLINE_EXCEEDED,"Request time out"));break;case jr.HTTP_ERROR:var n=a.getStatus();if(Yr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Gr).indexOf(e)>=0?e:Gr.UNKNOWN}(r.status);o(new zr(s,r.message))}else o(new zr(Gr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new zr(Gr.UNAVAILABLE,"Connection failed."));break;default:ti()}}finally{Yr("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Mr(),i=Fr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Br({})),this.ki(o.initMessageHeaders,e),(0,c.isMobileCordova)()||(0,c.isReactNative)()||(0,c.isElectron)()||(0,c.isIE)()||(0,c.isUWP)()||(0,c.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Yr("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,l=!1,h=new Hc({Ei:function(t){l?Yr("Connection","Not sending because WebChannel is closed:",t):(u||(Yr("Connection","Opening WebChannel transport."),s.open(),u=!0),Yr("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(s,Kr.EventType.OPEN,(function(){l||Yr("Connection","WebChannel transport opened.")})),f(s,Kr.EventType.CLOSE,(function(){l||(l=!0,Yr("Connection","WebChannel transport closed"),h.Vi())})),f(s,Kr.EventType.ERROR,(function(t){l||(l=!0,Jr("Connection","WebChannel transport errored:",t),h.Vi(new zr(Gr.UNAVAILABLE,"The operation could not be completed")))})),f(s,Kr.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];ei(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Yr("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=sa[t];if(void 0!==e)return pa(e)}(o),u=i.message;void 0===a&&(a=Gr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),l=!0,h.Vi(new zr(a,u)),s.close()}else Yr("Connection","WebChannel received:",n),h.Si(n)}})),f(i,qr.STAT_EVENT,(function(t){t.stat===Vr.PROXY?Yr("Connection","Detected buffering proxy"):t.stat===Vr.NOPROXY&&Yr("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Yr("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Yr("RestConnection","Received: ",t),t}),(function(e){throw Jr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Wc[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(){return"undefined"!=typeof window?window:null}function Qc(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){return new qa(t,!0)}var Yc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Yr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Xc=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Yc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Gr.RESOURCE_EXHAUSTED?(Xr(e.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Gr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new zr(Gr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return a(t,void 0,void 0,(function(){return s(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Yr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Yr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Jc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return o(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ti()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(ei(void 0===e||"string"==typeof e),mi.fromBase64String(e||"")):(ei(void 0===e||e instanceof Uint8Array),mi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Gr.UNKNOWN:pa(t.code);return new zr(e,t.message||"")}(s);n=new Oa(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Qa(t,r.document.name),o=Wa(r.document.updateTime);var s=new Wi({mapValue:{fields:r.document.fields}}),u=(a=Gi.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new Ra(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Qa(t,r.document),o=r.readTime?Wa(r.readTime):ci.min(),s=Gi.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Ra([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Qa(t,r.document),o=r.removedTargetIds||[],n=new Ra([],o,i,null);else{if(!("filter"in e))return ti();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new ha(r),o=l.targetId,n=new xa(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ci.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ci.min():e.readTime?Wa(e.readTime):ci.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Xa(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Xi(r)?{documents:rs(t,r)}:{query:is(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ba(t,e.resumeToken):e.snapshotVersion.compareTo(ci.min())>0&&(n.readTime=Va(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ti()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Xa(this.R),e.removeTarget=t,this.cr(e)},e}(Xc),Zc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return o(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(ei(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(ei(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Wa(t.updateTime):Wa(e);return n.isEqual(ci.min())&&(n=Wa(e)),new zo(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Wa(t.commitTime);return this.listener.Tr(n,e)}return ei(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Xa(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return es(e.R,t)}))};this.cr(n)},e}(Xc),tl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return o(e,t),e.prototype.br=function(){if(this.Rr)throw new zr(Gr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Gr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new zr(Gr.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Gr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new zr(Gr.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),el=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Xr(e),this.Vr=!1):Yr("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),nl=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return a(o,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return hl(this)?(Yr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return(e=ni(t)).Or.add(4),[4,il(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,rl(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new el(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:if(!hl(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function il(t){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ol(t,e){var n=ni(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),ll(n)?cl(n):Cl(n).er()&&sl(n,e))}function al(t,e){var n=ni(t),r=Cl(n);n.$r.delete(e),r.er()&&ul(n,e),0===n.$r.size&&(r.er()?r.ir():hl(n)&&n.Br.set("Unknown"))}function sl(t,e){t.qr.U(e.targetId),Cl(t).mr(e)}function ul(t,e){t.qr.U(e),Cl(t).yr(e)}function cl(t){t.qr=new La({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Cl(t).start(),t.Br.Sr()}function ll(t){return hl(t)&&!Cl(t).tr()&&t.$r.size>0}function hl(t){return 0===ni(t).Or.size}function fl(t){t.qr=void 0}function pl(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){return t.$r.forEach((function(e,n){sl(t,e)})),[2]}))}))}function dl(t,e){return a(this,void 0,void 0,(function(){return s(this,(function(n){return fl(t),ll(t)?(t.Br.Nr(e),cl(t)):t.Br.set("Unknown"),[2]}))}))}function vl(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o;return s(this,(function(u){switch(u.label){case 0:if(t.Br.set("Online"),!(e instanceof Oa&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o;return s(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),Yr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,gl(t,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ra?t.qr.X(e):e instanceof xa?t.qr.rt(e):t.qr.et(e),n.isEqual(ci.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,cc(t.localStore)];case 8:return i=u.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(mi.EMPTY_BYTE_STRING,n.snapshotVersion)),ul(t,e);var r=new eu(n.target,e,1,n.sequenceNumber);sl(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return Yr("RemoteStore","Failed to raise snapshot:",o=u.sent()),[4,gl(t,o)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function gl(t,e,n){return a(this,void 0,void 0,(function(){var r=this;return s(this,(function(i){switch(i.label){case 0:if(!Gs(e))throw e;return t.Or.add(1),[4,il(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return cc(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return a(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return Yr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,rl(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function yl(t,e){return e().catch((function(n){return gl(t,n,e)}))}function ml(t){return a(this,void 0,void 0,(function(){var e,n,r,i,o;return s(this,(function(a){switch(a.label){case 0:e=ni(t),n=kl(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return hl(t)&&t.Fr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,fc(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=kl(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,gl(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return bl(e)&&_l(e),[2]}}))}))}function bl(t){return hl(t)&&!kl(t).tr()&&t.Fr.length>0}function _l(t){kl(t).start()}function wl(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){return kl(t).Ar(),[2]}))}))}function Il(t){return a(this,void 0,void 0,(function(){var e,n,r,i;return s(this,(function(o){for(e=kl(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Tl(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=tu.from(r,e,n),[4,yl(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,ml(t)];case 2:return o.sent(),[2]}}))}))}function El(t,e){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return e&&kl(t).pr?[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return fa(r=e.code)&&r!==Gr.ABORTED?(n=t.Fr.shift(),kl(t).sr(),[4,yl(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,ml(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return bl(t)&&_l(t),[2]}}))}))}function Sl(t,e){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return n=ni(t),e?(n.Or.delete(2),[4,rl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,il(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Cl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ni(t);return r.br(),new Jc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:pl.bind(null,t),Ri:dl.bind(null,t),_r:vl.bind(null,t)}),t.Mr.push((function(n){return a(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),ll(t)?cl(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),fl(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function kl(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=ni(t);return r.br(),new Zc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:wl.bind(null,t),Ri:El.bind(null,t),Ir:Il.bind(null,t),Tr:Tl.bind(null,t)}),t.Mr.push((function(n){return a(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,ml(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Yr("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Al=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zr(Gr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Nl(t,e){if(Xr("AsyncQueue",e+": "+t),Gs(t))return new zr(Gr.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ni.comparator(e.key,n.key)}:function(t,e){return Ni.comparator(t.key,e.key)},this.keyedMap=Ia(),this.sortedSet=new da(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Rl=function(){function t(){this.Qr=new da(Ni.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):ti():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),xl=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Pl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&So(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ol=function(){this.Wr=void 0,this.listeners=[]},Dl=function(){this.queries=new Vu((function(t){return Co(t)}),So),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c;return s(this,(function(s){switch(s.label){case 0:if(n=ni(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Ol),!i)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=s.sent(),[3,4];case 3:return u=s.sent(),c=Nl(u,"Initialization of query '"+ko(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Ul(n),[2]}}))}))}function Ml(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a;return s(this,(function(s){return n=ni(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Fl(t,e){for(var n=ni(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&Ul(n)}function jl(t,e,n){var r=ni(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Ul(t){t.Gr.forEach((function(t){t.next()}))}var ql=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new xl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=xl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Vl=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Bl=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Qa(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?ts(this.R,t.document,!1):Gi.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Wa(t)},t}(),Kl=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Wl(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Bl(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||Ca()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i;return s(this,(function(o){switch(o.label){case 0:return[4,bc(this.localStore,new Bl(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,_c(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ec(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hl=function(t){this.key=t},Gl=function(t){this.key=t},zl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ca(),this.mutatedKeys=Ca(),this.lo=No(t),this.fo=new Pl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Rl,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=yo(this.query)&&i.size===this.query.limit?i.last():null,c=mo(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Ao(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),yo(this.query)||mo(this.query))for(;a.size>this.query.limit;){var l=yo(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ti()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new xl(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Rl,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ca(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Gl(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Hl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ca();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return xl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Ql=function(t,e,n){this.query=t,this.targetId=e,this.view=n},$l=function(t){this.key=t,this.bo=!1},Yl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Vu((function(t){return Co(t)}),So),this.Vo=new Map,this.So=new Set,this.Do=new da(Ni.comparator),this.Co=new Map,this.No=new Ic,this.xo={},this.ko=new Map,this.Fo=Nu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Xl(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u;return s(this,(function(s){switch(s.label){case 0:return n=Ch(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,pc(n.localStore,To(e))];case 2:return a=s.sent(),u=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Jl(n,e,r,"current"===u)];case 3:i=s.sent(),n.isPrimaryClient&&ol(n.remoteStore,a),s.label=4;case 4:return[2,i]}}))}))}function Jl(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,u,c,l,h;return s(this,(function(f){switch(f.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,a;return s(this,(function(s){switch(s.label){case 0:return i=e.view._o(n),i.Nn?[4,vc(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(hh(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,vc(t.localStore,e,!0)];case 1:return i=f.sent(),o=new zl(e,i.Bn),u=o._o(i.documents),c=Pa.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),l=o.applyChanges(u,t.isPrimaryClient,c),hh(t,n,l.To),h=new Ql(e,n,o),[2,(t.Po.set(e,h),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),l.snapshot)]}}))}))}function Zl(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:return n=ni(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!So(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,dc(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),al(n.remoteStore,r.targetId),ch(n,r.targetId)})).catch(Du)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ch(n,r.targetId),[4,dc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function th(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a;return s(this,(function(s){switch(s.label){case 0:r=kh(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=ni(t),i=ui.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ca());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=Zo(c,n.get(c.key));null!=l&&a.push(new ra(c.key,l,Hi(l.value.mapValue),Qo.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new da(oi)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,dh(r,i.changes)];case 3:return s.sent(),[4,ml(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=Nl(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function eh(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:n=ni(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,lc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(ei(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?ei(r.bo):t.removedDocuments.size>0&&(ei(r.bo),r.bo=!1))})),[4,dh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Du(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function nh(t,e,n){var r=ni(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ni(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Ul(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rh(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u,c;return s(this,(function(s){switch(s.label){case 0:return(r=ni(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new da(Ni.comparator)).insert(o,Gi.newNoDocument(o,ci.min())),u=Ca().add(o),c=new Na(ci.min(),new Map,new ya(oi),a,u),[4,eh(r,c)]):[3,2];case 1:return s.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),ph(r),[3,4];case 2:return[4,dc(r.localStore,e,!1).then((function(){return ch(r,e,n)})).catch(Du)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))}function ih(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:n=ni(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,uc(n.localStore,e)];case 2:return i=o.sent(),uh(n,r,null),sh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,dh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Du(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function oh(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:r=ni(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ni(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return ei(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),uh(r,e,n),sh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,dh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Du(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ah(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a;return s(this,(function(s){switch(s.label){case 0:hl((n=ni(t)).remoteStore)||Yr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=ni(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=s.sent(),a=Nl(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function sh(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function uh(t,e,n){var r=ni(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function ch(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||lh(t,e)}))}function lh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(al(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ph(t))}function hh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Hl?(t.No.addReference(o.key,e),fh(t,o)):o instanceof Gl?(Yr("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||lh(t,o.key)):ti()}}function fh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Yr("SyncEngine","New document in limbo: "+n),t.So.add(r),ph(t))}function ph(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ni(di.fromString(e)),r=t.Fo.next();t.Co.set(r,new $l(n)),t.Do=t.Do.insert(n,r),ol(t.remoteStore,new eu(To(go(n.path)),r,2,Hr.o))}}function dh(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,u;return s(this,(function(c){switch(c.label){case 0:return r=ni(t),i=[],o=[],u=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){u.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=rc.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(u)]);case 1:return c.sent(),r.vo._r(i),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,l,h;return s(this,(function(s){switch(s.label){case 0:n=ni(t),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Vs.forEach(e,(function(e){return Vs.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Vs.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return s.sent(),[3,4];case 3:if(!Gs(r=s.sent()))throw r;return Yr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],u=a.targetId,a.fromCache||(c=n.kn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.kn=n.kn.insert(u,h));return[2]}}))}))}(r.localStore,o)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function vh(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return(n=ni(t)).currentUser.isEqual(e)?[3,3]:(Yr("SyncEngine","User change. New user:",e.toKey()),[4,sc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new zr(Gr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,dh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function gh(t,e){var n=ni(t),r=n.Co.get(e);if(r&&r.bo)return Ca().add(r.key);var i=Ca(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function yh(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:return[4,vc((n=ni(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&hh(n,e.targetId,i.To),i)]}}))}))}function mh(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){return[2,yc((e=ni(t)).localStore).then((function(t){return dh(e,t)}))]}))}))}function bh(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o;return s(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=ni(t),r=ni(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Vs.resolve(null)}))}))}((i=ni(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,ml(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(uh(i,e,r||null),sh(i,e),function(t,e){ni(ni(t)._n).Gt(e)}(i.localStore,e)):ti(),a.label=4;case 4:return[4,dh(i,o)];case 5:return a.sent(),[3,7];case 6:Yr("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function _h(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,l;return s(this,(function(s){switch(s.label){case 0:return Ch(n=ni(t)),kh(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,wh(n,r.toArray())]);case 1:return i=s.sent(),n.$o=!0,[4,Sl(n.remoteStore,!0)];case 2:for(s.sent(),o=0,a=i;o<a.length;o++)u=a[o],ol(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):l=l.then((function(){return ch(n,e),dc(n.localStore,e,!0)})),al(n.remoteStore,e)})),[4,l]);case 4:return s.sent(),[4,wh(n,c)];case 5:return s.sent(),function(t){var e=ni(t);e.Co.forEach((function(t,n){al(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new da(Ni.comparator)}(n),n.$o=!1,[4,Sl(n.remoteStore,!1)];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))}function wh(t,e,n){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,l,h,f,p,d,v,g;return s(this,(function(s){switch(s.label){case 0:n=ni(t),r=[],i=[],o=0,a=e,s.label=1;case 1:return o<a.length?(u=a[o],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,pc(n.localStore,To(l[0]))]:[3,7]):[3,13];case 2:c=s.sent(),h=0,f=l,s.label=3;case 3:return h<f.length?(p=f[h],d=n.Po.get(p),[4,yh(n,d)]):[3,6];case 4:(v=s.sent()).snapshot&&i.push(v.snapshot),s.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,gc(n.localStore,u)];case 8:return g=s.sent(),[4,pc(n.localStore,g)];case 9:return c=s.sent(),[4,Jl(n,Ih(g),u,!1)];case 10:s.sent(),s.label=11;case 11:r.push(c),s.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Ih(t){return vo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Th(t){var e=ni(t);return ni(ni(e.localStore).persistence).fn()}function Eh(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,a;return s(this,(function(s){switch(s.label){case 0:return(i=ni(t)).$o?(Yr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,yc(i.localStore)];case 3:return o=s.sent(),a=Na.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,dh(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,dc(i.localStore,e,!0)];case 6:return s.sent(),ch(i,e,r),[3,8];case 7:ti(),s.label=8;case 8:return[2]}}))}))}function Sh(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u,c,l,h,f,p;return s(this,(function(d){switch(d.label){case 0:if(!(r=Ch(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(Yr("SyncEngine","Adding an already active target "+a),[3,5]):[4,gc(r.localStore,a)]):[3,6];case 2:return u=d.sent(),[4,pc(r.localStore,u)];case 3:return c=d.sent(),[4,Jl(r,Ih(u),c.targetId,!1)];case 4:d.sent(),ol(r.remoteStore,c),d.label=5;case 5:return i++,[3,1];case 6:l=function(t){return s(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,dc(r.localStore,t,!1).then((function(){al(r.remoteStore,t),ch(r,t)})).catch(Du)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,d.label=7;case 7:return h<f.length?(p=f[h],[5,l(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ch(t){var e=ni(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rh.bind(null,e),e.vo._r=Fl.bind(null,e.eventManager),e.vo.Mo=jl.bind(null,e.eventManager),e}function kh(t){var e=ni(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ih.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oh.bind(null,e),e}function Ah(t,e,n){var r=ni(t);(function(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u,c;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=s.sent(),[4,function(t,e){var n=ni(t),r=Wa(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Ke.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,r)];case 2:return s.sent()?[4,e.close()]:[3,4];case 3:return[2,(s.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(Wl(r)),i=new Kl(r,t.localStore,e.R),[4,e.Lo()];case 5:o=s.sent(),s.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=s.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=s.sent(),s.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return u=s.sent(),[4,dh(t,u.wn,void 0)];case 12:return s.sent(),[4,function(t,e){var n=ni(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return s.sent(),n._completeWith(u.progress),[3,15];case 14:return Jr("SyncEngine","Loading bundle failed with "+(c=s.sent())),n._failWith(c),[3,15];case 15:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Nh=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.R=$c(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return ac(this.persistence,new ic,t.initialUser,this.R)},t.prototype.qo=function(t){return new Ac(Pc.bs,this.R)},t.prototype.Bo=function(t){return new Vc},t.prototype.terminate=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Ph=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return o(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,mc(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,kh(this.Qo.syncEngine)];case 4:return r.sent(),[4,ml(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return ac(this.persistence,new ic,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Fu(e,t.asyncQueue)},e.prototype.qo=function(t){var e=tc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?wu.withCacheSize(this.cacheSizeBytes):wu.DEFAULT;return new Xu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,zc(),Qc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Vc},e}(Nh),Rh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return o(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){var n,r=this;return s(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof qc?(this.sharedClientState.syncEngine={ui:bh.bind(null,n),ai:Eh.bind(null,n),hi:Sh.bind(null,n),fn:Th.bind(null,n),ci:mh.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return a(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,_h(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=zc();if(!qc.yt(e))throw new zr(Gr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=tc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new qc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ph),xh=function(){function t(){}return t.prototype.initialize=function(t,e){return a(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return nh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=vh.bind(null,this.syncEngine),[4,Sl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Dl},t.prototype.createDatastore=function(t){var e,n=$c(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Gc(e));return function(t,e,n){return new tl(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return nh(a.syncEngine,t,0)},o=Kc.yt()?new Kc:new Bc,new nl(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Yl(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=ni(t),Yr("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,il(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return a(this,void 0,void 0,(function(){var r;return s(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dh=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Lh=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new qs,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return a(this,void 0,void 0,(function(){var t,e,n,r;return s(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Vl(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return a(this,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return a(this,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),Mh=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return s(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new zr(Gr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u;return s(this,(function(s){switch(s.label){case 0:return n=ni(t),r=Xa(n.R)+"/documents",i={documents:e.map((function(t){return za(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=s.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){ei(!!e.found),e.found.name,e.found.updateTime;var n=Qa(t,e.found.name),r=Wa(e.found.updateTime),i=new Wi({mapValue:{fields:e.found.fields}});return Gi.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){ei(!!e.missing),ei(!!e.readTime);var n=Qa(t,e.missing),r=Wa(e.readTime);return Gi.newNoDocument(n,r)}(t,e):ti()}(n.R,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());ei(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new ca(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return a(this,void 0,void 0,(function(){var t,e=this;return s(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ni.fromPath(n);e.mutations.push(new la(r,e.precondition(r)))})),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:return n=ni(t),r=Xa(n.R)+"/documents",i={writes:e.map((function(t){return es(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ti();e=ci.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new zr(Gr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Qo.updateTime(e):Qo.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ci.min()))throw new zr(Gr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qo.updateTime(e)}return Qo.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Fh=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Yc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return a(t,void 0,void 0,(function(){var t,e,n=this;return s(this,(function(r){return t=new Mh(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Ci(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!fa(e)}return!1},t}(),jh=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Rc.UNAUTHENTICATED,this.clientId=ii.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return a(r,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return Yr("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new zr(Gr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return a(t,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Nl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t,e){return a(this,void 0,void 0,(function(){var n,r,i=this;return s(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Yr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return a(i,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,sc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function qh(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Vh(t)];case 1:return n=i.sent(),Yr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return(n=ni(t)).asyncQueue.verifyOperationInProgress(),Yr("RemoteStore","RemoteStore received new credentials"),r=hl(n),n.Or.add(3),[4,il(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,rl(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Vh(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Yr("FirestoreClient","Using default OfflineComponentProvider"),[4,Uh(t,new Nh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Bh(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Yr("FirestoreClient","Using default OnlineComponentProvider"),[4,qh(t,new xh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Kh(t){return Vh(t).then((function(t){return t.persistence}))}function Wh(t){return Vh(t).then((function(t){return t.localStore}))}function Hh(t){return Bh(t).then((function(t){return t.remoteStore}))}function Gh(t){return Bh(t).then((function(t){return t.syncEngine}))}function zh(t){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,Bh(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Xl.bind(null,e.syncEngine),n.onUnlisten=Zl.bind(null,e.syncEngine),n)]}}))}))}function Qh(t,e,n){var r=this;void 0===n&&(n={});var i=new qs;return t.asyncQueue.enqueueAndForget((function(){return a(r,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Dh({next:function(o){e.enqueueAndForget((function(){return Ml(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new zr(Gr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new zr(Gr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new ql(go(n.path),o,{includeMetadataChanges:!0,so:!0});return Ll(t,a)},[4,zh(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function $h(t,e,n){var r=this;void 0===n&&(n={});var i=new qs;return t.asyncQueue.enqueueAndForget((function(){return a(r,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Dh({next:function(n){e.enqueueAndForget((function(){return Ml(t,a)})),n.fromCache&&"server"===r.source?i.reject(new zr(Gr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new ql(n,o,{includeMetadataChanges:!0,so:!0});return Ll(t,a)},[4,zh(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Yh=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Xh=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Jh=new Map,Zh=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},tf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Rc.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ef=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),nf=function(){function t(t){var e=this;this.currentUser=Rc.UNAUTHENTICATED,this.oc=new qs,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Yr("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Yr("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Yr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ei("string"==typeof n.accessToken),new Zh(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return a(n,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ei(null===t||"string"==typeof t),new Rc(t)},t}(),rf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Rc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),of=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new rf(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Rc.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t,e,n){if(!n)throw new zr(Gr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function sf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new zr(Gr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function uf(t,e,n,r){if(!0===e&&!0===r)throw new zr(Gr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function cf(t){if(!Ni.isDocumentKey(t))throw new zr(Gr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function lf(t){if(Ni.isDocumentKey(t))throw new zr(Gr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function hf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ti()}function ff(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new zr(Gr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=hf(t);throw new zr(Gr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function pf(t,e){if(e<=0)throw new zr(Gr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var df=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new zr(Gr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new zr(Gr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,uf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),vf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new df({}),this._settingsFrozen=!1,t instanceof Xh?(this._databaseId=t,this._credentials=new tf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new zr(Gr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xh(t.options.projectId)}(t),this._credentials=new nf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new zr(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new zr(Gr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new df(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new tf;switch(t.type){case"gapi":var e=t.client;return ei(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new of(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new zr(Gr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return t=this,(e=Jh.get(t))&&(Yr("ComponentProvider","Removing Datastore"),Jh.delete(t),e.terminate()),Promise.resolve();var t,e},t}(),gf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new mf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),yf=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),mf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,go(r))||this)._path=r,i.type="collection",i}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new gf(this.firestore,null,new Ni(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(yf);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,c.getModularInstance)(t),af("collection","path",e),t instanceof vf)return lf(n=di.fromString.apply(di,u([e],r))),new mf(t,null,n);if(!(t instanceof gf||t instanceof mf))throw new zr(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return lf(n=di.fromString.apply(di,u([t.path],r)).child(di.fromString(e))),new mf(t.firestore,null,n)}function _f(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,c.getModularInstance)(t),1===arguments.length&&(e=ii.u()),af("doc","path",e),t instanceof vf)return cf(n=di.fromString.apply(di,u([e],r))),new gf(t,null,new Ni(n));if(!(t instanceof gf||t instanceof mf))throw new zr(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cf(n=t._path.child(di.fromString.apply(di,u([e],r)))),new gf(t.firestore,t instanceof mf?t.converter:null,new Ni(n))}function wf(t,e){return t=(0,c.getModularInstance)(t),e=(0,c.getModularInstance)(e),(t instanceof gf||t instanceof mf)&&(e instanceof gf||e instanceof mf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function If(t,e){return t=(0,c.getModularInstance)(t),e=(0,c.getModularInstance)(e),t instanceof yf&&e instanceof yf&&t.firestore===e.firestore&&So(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Tf=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Yc(this,"async_queue_retry"),this.Ic=function(){var e=Qc();e&&Yr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Qc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Qc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new qs;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return a(this,void 0,void 0,(function(){var t,e=this;return s(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Gs(t=n.sent()))throw t;return Yr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Xr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Al.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&ti()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Ef(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Sf=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new qs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Cf=-1,kf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Tf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return o(e,t),e.prototype._terminate=function(){return this._firestoreClient||Nf(this),this._firestoreClient.terminate()},e}(vf);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){return t._firestoreClient||Nf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Nf(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Yh(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new jh(t._credentials,t._queue,r)}function Pf(t,e,n){var r=this,i=new qs;return t.asyncQueue.enqueue((function(){return a(r,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Uh(t,n)];case 1:return o.sent(),[4,qh(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Gr.FAILED_PRECONDITION||t.code===Gr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Rf(t){if(t._initialized||t._terminated)throw new zr(Gr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new zr(Gr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gi(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Of=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(mi.fromBase64String(e))}catch(e){throw new zr(Gr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(mi.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Df=function(t){this._methodName=t},Lf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new zr(Gr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new zr(Gr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return oi(this._lat,t._lat)||oi(this._long,t._long)},t}(),Mf=/^__.*__$/,Ff=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ra(t,this.data,this.fieldMask,e,this.fieldTransforms):new na(t,this.data,e,this.fieldTransforms)},t}(),jf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ra(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ti()}}var qf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return ap(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Uf(this.Nc)&&Mf.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Vf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||$c(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new qf({Nc:t,methodName:e,qc:n,path:gi.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Bf(t){var e=t._freezeSettings(),n=$c(t._databaseId);return new Vf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Kf(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);np("Data must be an object, but it was:",a,r);var s,u,c=tp(r,a);if(o.merge)s=new yi(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=rp(e,f[h],n);if(!a.contains(p))throw new zr(Gr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");sp(l,p)||l.push(p)}s=new yi(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new Ff(new Wi(c),s,u)}var Wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Df);function Hf(t,e,n){return new qf({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Gf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._toFieldTransform=function(t){return new Go(t.path,new jo)},e.prototype.isEqual=function(t){return t instanceof e},e}(Df),zf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return o(e,t),e.prototype._toFieldTransform=function(t){var e=Hf(this,t,!0),n=this.Kc.map((function(t){return Zf(t,e)})),r=new Uo(n);return new Go(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Df),Qf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return o(e,t),e.prototype._toFieldTransform=function(t){var e=Hf(this,t,!0),n=this.Kc.map((function(t){return Zf(t,e)})),r=new Vo(n);return new Go(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Df),$f=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return o(e,t),e.prototype._toFieldTransform=function(t){var e=new Ko(t.R,Oo(t.R,this.Qc));return new Go(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Df);function Yf(t,e,n,r){var i=t.Uc(1,e,n);np("Data must be an object, but it was:",i,r);var o=[],a=Wi.empty();hi(r,(function(t,r){var s=op(e,t,n);r=(0,c.getModularInstance)(r);var u=i.Oc(s);if(r instanceof Wf)o.push(s);else{var l=Zf(r,u);null!=l&&(o.push(s),a.set(s,l))}}));var s=new yi(o);return new jf(a,s,i.fieldTransforms)}function Xf(t,e,n,r,i,o){var a=t.Uc(1,e,n),s=[rp(e,r,n)],u=[i];if(o.length%2!=0)throw new zr(Gr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<o.length;l+=2)s.push(rp(e,o[l])),u.push(o[l+1]);for(var h=[],f=Wi.empty(),p=s.length-1;p>=0;--p)if(!sp(h,s[p])){var d=s[p],v=u[p];v=(0,c.getModularInstance)(v);var g=a.Oc(d);if(v instanceof Wf)h.push(d);else{var y=Zf(v,g);null!=y&&(h.push(d),f.set(d,y))}}var m=new yi(h);return new jf(f,m,a.fieldTransforms)}function Jf(t,e,n,r){return void 0===r&&(r=!1),Zf(n,t.Uc(r?4:3,e))}function Zf(t,e){if(ep(t=(0,c.getModularInstance)(t)))return np("Unsupported field value:",e,t),tp(t,e);if(t instanceof Df)return function(t,e){if(!Uf(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Zf(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,c.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Oo(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ui.fromDate(t);return{timestampValue:Va(e.R,n)}}if(t instanceof ui)return n=new ui(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Va(e.R,n)};if(t instanceof Lf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Of)return{bytesValue:Ba(e.R,t._byteString)};if(t instanceof gf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ha(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+hf(t))}(t,e)}function tp(t,e){var n={};return fi(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(t,(function(t,r){var i=Zf(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function ep(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ui||t instanceof Lf||t instanceof Of||t instanceof gf||t instanceof Df)}function np(t,e,n){if(!ep(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=hf(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function rp(t,e,n){if((e=(0,c.getModularInstance)(e))instanceof xf)return e._internalPath;if("string"==typeof e)return op(t,e);throw ap("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var ip=new RegExp("[~\\*/\\[\\]]");function op(t,e,n){if(e.search(ip)>=0)throw ap("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(xf.bind.apply(xf,u([void 0],e.split(".")))))._internalPath}catch(r){throw ap("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function ap(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new zr(Gr.INVALID_ARGUMENT,(s+=". ")+t+u)}function sp(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var up=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new gf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new cp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(lp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),cp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(up);function lp(t,e){return"string"==typeof e?op(t,e):e instanceof xf?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),fp=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return o(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new pp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(lp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(up),pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(fp),dp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new hp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new pp(n._firestore,n._userDataWriter,r.key,r,new hp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zr(Gr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new pp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new hp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new pp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new hp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:vp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function vp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ti()}}function gp(t,e){return t instanceof fp&&e instanceof fp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof dp&&e instanceof dp&&t._firestore===e._firestore&&If(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t){if(mo(t)&&0===t.explicitOrderBy.length)throw new zr(Gr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mp=function(){};function bp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var _p=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return o(e,t),e.prototype._apply=function(t){var e=Bf(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new zr(Gr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){kp(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(Cp(r,t,h))}s={arrayValue:{values:u}}}else s=Cp(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||kp(a,o),s=Jf(n,"where",a,"in"===o||"not-in"===o);var f=Ji.create(i,o,s);return function(t,e){if(e.g()){var n=_o(t);if(null!==n&&!n.isEqual(e.field))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=bo(t);null!==r&&Ap(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new zr(Gr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new zr(Gr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new yf(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(mp),wp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return o(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new co(e,n);return function(t,e){if(null===bo(t)){var n=_o(t);null!==n&&Ap(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new yf(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new po(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(mp),Ip=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return o(e,t),e.prototype._apply=function(t){return new yf(t.firestore,t.converter,Eo(t._query,this.Hc,this.Jc))},e}(mp),Tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return o(e,t),e.prototype._apply=function(t){var e=Sp(t,this.type,this.Yc,this.Xc);return new yf(t.firestore,t.converter,function(t,e){return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(mp),Ep=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return o(e,t),e.prototype._apply=function(t){var e=Sp(t,this.type,this.Yc,this.Xc);return new yf(t.firestore,t.converter,function(t,e){return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(mp);function Sp(t,e,n,r){if(n[0]=(0,c.getModularInstance)(n[0]),n[0]instanceof up)return function(t,e,n,r,i){if(!r)throw new zr(Gr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Io(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Fi(e,r.key));else{var c=r.data.field(u.field);if(Ti(c))throw new zr(Gr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new so(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Bf(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new zr(Gr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!wo(t)&&-1!==c.indexOf("/"))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(di.fromString(c));if(!Ni.isDocumentKey(l))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ni(l);s.push(Fi(e,h))}else{var f=Jf(n,r,c);s.push(f)}}return new so(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Cp(t,e,n){if("string"==typeof(n=(0,c.getModularInstance)(n))){if(""===n)throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!wo(e)&&-1!==n.indexOf("/"))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(di.fromString(n));if(!Ni.isDocumentKey(r))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Fi(t,new Ni(r))}if(n instanceof gf)return Fi(t,n._key);throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+hf(n)+".")}function kp(t,e){if(!Array.isArray(t)||0===t.length)throw new zr(Gr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new zr(Gr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ap(t,e,n){if(!n.isEqual(e))throw new zr(Gr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Np=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Pi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return wi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ii(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ti()}},t.prototype.convertObject=function(t,e){var n=this,r={};return hi(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Lf(wi(t.latitude),wi(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ei(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Si(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=_i(t);return new ui(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=di.fromString(t);ei(gs(n));var r=new Xh(n.get(1),n.get(3)),i=new Ni(n.popFirst(5));return r.isEqual(e)||Xr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Rp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return o(e,t),e.prototype.convertBytes=function(t){return new Of(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new gf(this.firestore,null,e)},e}(Np),xp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Bf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Op(t,this._firestore),i=Pp(r.converter,e,n),o=Kf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Qo.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=Op(t,this._firestore);return o="string"==typeof(e=(0,c.getModularInstance)(e))||e instanceof xf?Xf(this._dataReader,"WriteBatch.update",a._key,e,n,r):Yf(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,Qo.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Op(t,this._firestore);return this._mutations=this._mutations.concat(new ca(e._key,Qo.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new zr(Gr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t,e){if((t=(0,c.getModularInstance)(t)).firestore!==e)throw new zr(Gr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return o(e,t),e.prototype.convertBytes=function(t){return new Of(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new gf(this.firestore,null,e)},e}(Np);function Lp(t,e,n){t=ff(t,gf);var r=ff(t.firestore,kf),i=Pp(t.converter,e,n);return jp(r,[Kf(Bf(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Qo.none())])}function Mp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ff(t,gf);var o=ff(t.firestore,kf),a=Bf(o);return jp(o,[("string"==typeof(e=(0,c.getModularInstance)(e))||e instanceof xf?Xf(a,"updateDoc",t._key,e,n,r):Yf(a,"updateDoc",t._key,e)).toMutation(t._key,Qo.exists(!0))])}function Fp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,c.getModularInstance)(t);var u={includeMetadataChanges:!1},l=0;"object"!=typeof i[l]||Ef(i[l])||(u=i[l],l++);var h,f,p,d={includeMetadataChanges:u.includeMetadataChanges};if(Ef(i[l])){var v=i[l];i[l]=null===(e=v.next)||void 0===e?void 0:e.bind(v),i[l+1]=null===(n=v.error)||void 0===n?void 0:n.bind(v),i[l+2]=null===(r=v.complete)||void 0===r?void 0:r.bind(v)}if(t instanceof gf)f=ff(t.firestore,kf),p=go(t._key.path),h={next:function(e){i[l]&&i[l](Up(f,t,e))},error:i[l+1],complete:i[l+2]};else{var g=ff(t,yf);f=ff(g.firestore,kf),p=g._query;var y=new Dp(f);h={next:function(t){i[l]&&i[l](new dp(f,y,g,t))},error:i[l+1],complete:i[l+2]},yp(t._query)}return function(t,e,n,r){var i=this,o=new Dh(r),u=new ql(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=Ll,[4,zh(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=Ml,[4,zh(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))}))}}(Af(f),p,d,h)}function jp(t,e){return function(t,e){var n=this,r=new qs;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=th,[4,Gh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Af(t),e)}function Up(t,e,n){var r=n.docs.get(e._key),i=new Dp(t);return new fp(t,i,e._key,r,new hp(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return o(e,t),e.prototype.get=function(e){var n=this,r=Op(e,this._firestore),i=new Dp(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new fp(n._firestore,i,r._key,t._document,new hp(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Bf(t)}return t.prototype.get=function(t){var e=this,n=Op(t,this._firestore),r=new Rp(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return ti();var i=t[0];if(i.isFoundDocument())return new up(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new up(e._firestore,r,n._key,null,n.converter);throw ti()}))},t.prototype.set=function(t,e,n){var r=Op(t,this._firestore),i=Pp(r.converter,e,n),o=Kf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=Op(t,this._firestore);return o="string"==typeof(e=(0,c.getModularInstance)(e))||e instanceof xf?Xf(this._dataReader,"Transaction.update",a._key,e,n,r):Yf(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=Op(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(){if("undefined"==typeof Uint8Array)throw new zr(Gr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Bp(){if("undefined"==typeof atob)throw new zr(Gr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Kp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Bp(),new t(Of.fromBase64String(e))},t.fromUint8Array=function(e){return Vp(),new t(Of.fromUint8Array(e))},t.prototype.toBase64=function(){return Bp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Vp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Wp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Rf(t=ff(t,kf));var n=Af(t),r=t._freezeSettings(),i=new xh;return Pf(n,i,new Ph(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Rf(t=ff(t,kf));var e=Af(t),n=t._freezeSettings(),r=new xh;return Pf(e,r,new Rh(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new zr(Gr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new qs;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return a(e,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return Ks.yt()?(e=t+"main",[4,Ks.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(tc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Hp=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Xh||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Jr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=ff(t,vf))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Jr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var a,s;if("string"==typeof r.mockUserToken)a=r.mockUserToken,s=Rc.MOCK_USER;else{a=(0,c.createMockUserToken)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new zr(Gr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Rc(u)}t._credentials=new ef(new Zh(a,s))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return a(e,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,Kh(t)];case 1:return e=r.sent(),[4,Hh(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ni(t);return e.Or.delete(0),rl(e)}(n))]}}))}))}))}(Af(ff(this._delegate,kf)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return a(e,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,Kh(t)];case 1:return e=r.sent(),[4,Hh(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return(e=ni(t)).Or.add(0),[4,il(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Af(ff(this._delegate,kf)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&uf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new qs;return t.asyncQueue.enqueueAndForget((function(){return a(e,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return e=ah,[4,Gh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Af(ff(this._delegate,kf)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Dh(e);return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=function(t,e){ni(t).Gr.add(e),e.next()},[4,zh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=function(t,e){ni(t).Gr.delete(e)},[4,zh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Af(t=ff(t,kf)),Ef(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new zr(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new ad(this,bf(this._delegate,t))}catch(t){throw Jp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Xp(this,_f(this._delegate,t))}catch(t){throw Jp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new rd(this,function(t,e){if(t=ff(t,vf),af("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new zr(Gr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new yf(t,null,function(t){return new po(di.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Jp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new qs;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,function(t){return Bh(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Fh(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Af(t),(function(n){return e(new qp(t,n))}))}(this._delegate,(function(n){return t(new Qp(e,n))}))},t.prototype.batch=function(){var t=this;return Af(this._delegate),new $p(new xp(this._delegate,(function(e){return jp(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new zr(Gr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new zr(Gr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Gp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return o(e,t),e.prototype.convertBytes=function(t){return new Kp(new Of(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Xp.eu(e,this.firestore,null)},e}(Np);function zp(t){var e;e=t,Qr.setLogLevel(e)}var Qp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Gp(t)}return t.prototype.get=function(t){var e=this,n=sd(t);return this._delegate.get(n).then((function(t){return new ed(e._firestore,new fp(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=sd(t);return n?(sf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=sd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,u([a,e,n],i)),this},t.prototype.delete=function(t){var e=sd(t);return this._delegate.delete(e),this},t}(),$p=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=sd(t);return n?(sf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=sd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,u([a,e,n],i)),this},t.prototype.delete=function(t){var e=sd(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Yp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new pp(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new nd(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Gp(e),n),i.set(n,o)),o},t}();Yp.su=new WeakMap;var Xp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Gp(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new zr(Gr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new gf(n._delegate,r,new Ni(e)))},t.eu=function(e,n,r){return new t(n,new gf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ad(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new ad(this.firestore,bf(this._delegate,t))}catch(t){throw Jp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,c.getModularInstance)(t))instanceof gf&&wf(this._delegate,t)},t.prototype.set=function(t,e){e=sf("DocumentReference.set",e);try{return e?Lp(this._delegate,t,e):Lp(this._delegate,t)}catch(t){throw Jp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Mp(this._delegate,t):Mp.apply(void 0,u([this._delegate,t,e],n))}catch(t){throw Jp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return jp(ff((t=this._delegate).firestore,kf),[new ca(t._key,Qo.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Zp(e),i=td(e,(function(e){return new ed(t.firestore,new fp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Fp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ff(t,gf);var e=ff(t.firestore,kf),n=Af(e),r=new Dp(e);return function(t,e){var n=this,r=new qs;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ni(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new zr(Gr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Nl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Wh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new fp(e,r,t._key,n,new hp(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ff(t,gf);var e=ff(t.firestore,kf);return Qh(Af(e),t._key,{source:"server"}).then((function(n){return Up(e,t,n)}))}(this._delegate):function(t){t=ff(t,gf);var e=ff(t.firestore,kf);return Qh(Af(e),t._key).then((function(n){return Up(e,t,n)}))}(this._delegate)).then((function(t){return new ed(e.firestore,new fp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Yp.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Jp(t,e,n){return t.message=t.message.replace(e,n),t}function Zp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ef(r))return r}return{}}function td(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ef(t[0])?t[0]:Ef(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ed=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Xp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return gp(this._delegate,t._delegate)},t}(),nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(ed),rd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Gp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,bp(this._delegate,function(t,e,n){var r=e,i=lp("where",t);return new _p(i,r,n)}(e,n,r)))}catch(e){throw Jp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,bp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=lp("orderBy",t);return new wp(r,n)}(e,n)))}catch(e){throw Jp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,bp(this._delegate,function(t){return pf("limit",t),new Ip("limit",t,"F")}(e)))}catch(e){throw Jp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,bp(this._delegate,function(t){return pf("limitToLast",t),new Ip("limitToLast",t,"L")}(e)))}catch(e){throw Jp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tp("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Jp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tp("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Jp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ep("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Jp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ep("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Jp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return If(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ff(t,yf);var e=ff(t.firestore,kf),n=Af(e),r=new Dp(e);return function(t,e){var n=this,r=new qs;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,vc(t,e,!0)];case 1:return u=s.sent(),r=new zl(e,u.Bn),i=r._o(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=s.sent(),u=Nl(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,Wh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new dp(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ff(t,yf);var e=ff(t.firestore,kf),n=Af(e),r=new Dp(e);return $h(n,t._query,{source:"server"}).then((function(n){return new dp(e,r,t,n)}))}(this._delegate):function(t){t=ff(t,yf);var e=ff(t.firestore,kf),n=Af(e),r=new Dp(e);return yp(t._query),$h(n,t._query).then((function(n){return new dp(e,r,t,n)}))}(this._delegate)).then((function(t){return new od(e.firestore,new dp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Zp(e),i=td(e,(function(e){return new od(t.firestore,new dp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Fp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Yp.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),id=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new nd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),od=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new rd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new nd(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new id(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new nd(n._firestore,r))}))},t.prototype.isEqual=function(t){return gp(this._delegate,t._delegate)},t}(),ad=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Xp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Xp(this.firestore,void 0===t?_f(this._delegate):_f(this._delegate,t))}catch(t){throw Jp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ff(t.firestore,kf),r=_f(t),i=Pp(t.converter,e);return jp(n,[Kf(Bf(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Qo.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Xp(e.firestore,t)}))},e.prototype.isEqual=function(t){return wf(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Yp.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(rd);function sd(t){return ff(t,gf)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ud=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(xf.bind.apply(xf,u([void 0],t)))}return t.documentId=function(){return new t(gi.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,c.getModularInstance)(t))instanceof xf&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),cd=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Gf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Wf("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zf("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qf("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new $f("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t){return function(t,e){var n=Af(t=ff(t,kf)),r=new Sf;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new Lh(t,e)}(function(t,e){if(t instanceof Uint8Array)return Oh(t,e);if(t instanceof ArrayBuffer)return Oh(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,$c(e));t.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=Ah,[4,Gh(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,t._databaseId,e,r),r}(this._delegate,t)}function hd(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=ni(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,Wh(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Af(e=ff(e,kf)),n).then((function(t){return t?new yf(e,null,t.query):null}))).then((function(t){return t?new rd(r,t):null}))}var fd=n(202),pd={Firestore:Hp,GeoPoint:Lf,Timestamp:ui,Blob:Kp,Transaction:Qp,WriteBatch:$p,DocumentReference:Xp,DocumentSnapshot:ed,Query:rd,QueryDocumentSnapshot:nd,QuerySnapshot:od,CollectionReference:ad,FieldPath:ud,FieldValue:cd,setLogLevel:zp,CACHE_SIZE_UNLIMITED:Cf};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function dd(t){!function(t,e){t.INTERNAL.registerComponent(new fd.Component("firestore",(function(t){var n=t.getProvider("app").getImmediate();return e(n,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},pd)))}(t,(function(t,e){return new Hp(t,new kf(t,e),new Wp)})),t.registerVersion("@firebase/firestore","2.4.1")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vd(t){t.prototype.loadBundle=ld,t.prototype.namedQuery=hd}dd(r["default"]),vd(Hp);var gd=function(t,e){return gd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},gd(t,e)};function yd(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}gd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function md(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function bd(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;Object.create;var _d={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},wd=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return yd(e,t),e}(Error);function Id(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Td(t,e,n){var r=Id(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"===typeof s){if(!_d[s])return new wd("internal","internal");r=_d[s],i=s}var u=a.message;"string"===typeof u&&(i=u),o=a.details,void 0!==o&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new wd(r,i,o)}var Ed=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return md(this,void 0,void 0,(function(){var t;return bd(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=e.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return md(this,void 0,void 0,(function(){return bd(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return md(this,void 0,void 0,(function(){var t,e;return bd(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}(),Sd="type.googleapis.com/google.protobuf.Int64Value",Cd="type.googleapis.com/google.protobuf.UInt64Value";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Ad=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===typeof t)return kd(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case Sd:case Cd:var n=Number(t["value"]);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===typeof t?kd(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new wd("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}var Pd=function(){function t(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new Ad,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new Ed(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(u){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return n+"/"+e+"/"+this.region+"/"+t}return null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return md(this,void 0,void 0,(function(){var r,i,o;return bd(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:r=a.sent(),null!==r&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return md(this,void 0,void 0,(function(){var t,e;return bd(this,(function(n){switch(n.label){case 0:return t=this.appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return e=n.sent(),[2,e.token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return md(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,p,d;return bd(this,(function(v){switch(v.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return a=v.sent(),a.authToken&&(o["Authorization"]="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=Nd(s),c=u.timer,l=u.promise,[4,Promise.race([Rd(c,this.postJSON(r,i,o)),l,Rd(c,this.cancelAllRequests)])];case 2:if(h=v.sent(),!h)throw new wd("cancelled","Firebase Functions instance was deleted.");if(f=Td(h.status,h.json,this.serializer),f)throw f;if(!h.json)throw new wd("internal","Response is not valid JSON object.");if(p=h.json.data,"undefined"===typeof p&&(p=h.json.result),"undefined"===typeof p)throw new wd("internal","Response is missing data field.");return d=this.serializer.decode(p),[2,{data:d}]}}))}))},t}();function Rd(t,e){return md(this,void 0,void 0,(function(){var n;return bd(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xd="functions";function Od(t,e){var n={Functions:Pd};function r(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new Pd(i,o,s,a,r,e)}t.INTERNAL.registerComponent(new fd.Component(xd,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var Dd="@firebase/functions",Ld="0.6.16";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Od(r["default"],fetch.bind(self)),r["default"].registerVersion(Dd,Ld);var Md=function(){return Md=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Md.apply(this,arguments)};function Fd(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function jd(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;function Ud(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qd(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function Vd(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var Bd,Kd=n(676),Wd="@firebase/installations",Hd="0.4.32",Gd=1e4,zd="w:"+Hd,Qd="FIS_v2",$d="https://firebaseinstallations.googleapis.com/v1",Yd=36e5,Xd="installations",Jd="Installations",Zd=(Bd={},Bd["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Bd["not-registered"]="Firebase Installation is not registered.",Bd["installation-not-found"]="Firebase Installation not found.",Bd["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Bd["app-offline"]="Could not process request. Application offline.",Bd["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Bd),tv=new c.ErrorFactory(Xd,Jd,Zd);function ev(t){return t instanceof c.FirebaseError&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){var e=t.projectId;return $d+"/projects/"+e+"/installations"}function rv(t){return{token:t.token,requestStatus:2,expiresIn:uv(t.expiresIn),creationTime:Date.now()}}function iv(t,e){return Fd(this,void 0,void 0,(function(){var n,r;return jd(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,tv.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function ov(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function av(t,e){var n=e.refreshToken,r=ov(t);return r.append("Authorization",cv(n)),r}function sv(t){return Fd(this,void 0,void 0,(function(){var e;return jd(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),e.status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function uv(t){return Number(t.replace("s","000"))}function cv(t){return Qd+" "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t,e){var n=e.fid;return Fd(this,void 0,void 0,(function(){var e,r,i,o,a,s,u;return jd(this,(function(c){switch(c.label){case 0:return e=nv(t),r=ov(t),i={fid:n,authVersion:Qd,appId:t.appId,sdkVersion:zd},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,sv((function(){return fetch(e,o)}))];case 1:return a=c.sent(),a.ok?[4,a.json()]:[3,3];case 2:return s=c.sent(),u={fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:rv(s.authToken)},[2,u];case 3:return[4,iv("Create Installation",a)];case 4:throw c.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t){var e=btoa(String.fromCharCode.apply(String,Vd([],qd(t))));return e.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pv=/^[cdef][\w-]{21}$/,dv="";function vv(){try{var t=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(t),t[0]=112+t[0]%16;var n=gv(t);return pv.test(n)?n:dv}catch(Kf){return dv}}function gv(t){var e=fv(t);return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mv=new Map;function bv(t,e){var n=yv(t);Iv(n,e),Tv(n,e)}function _v(t,e){Sv();var n=yv(t),r=mv.get(n);r||(r=new Set,mv.set(n,r)),r.add(e)}function wv(t,e){var n=yv(t),r=mv.get(n);r&&(r.delete(e),0===r.size&&mv.delete(n),Cv())}function Iv(t,e){var n,r,i=mv.get(t);if(i)try{for(var o=Ud(i),a=o.next();!a.done;a=o.next()){var s=a.value;s(e)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function Tv(t,e){var n=Sv();n&&n.postMessage({key:t,fid:e}),Cv()}var Ev=null;function Sv(){return!Ev&&"BroadcastChannel"in self&&(Ev=new BroadcastChannel("[Firebase] FID Change"),Ev.onmessage=function(t){Iv(t.data.key,t.data.fid)}),Ev}function Cv(){0===mv.size&&Ev&&(Ev.close(),Ev=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kv="firebase-installations-database",Av=1,Nv="firebase-installations-store",Pv=null;function Rv(){return Pv||(Pv=(0,Kd.openDb)(kv,Av,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Nv)}}))),Pv}function xv(t,e){return Fd(this,void 0,void 0,(function(){var n,r,i,o,a;return jd(this,(function(s){switch(s.label){case 0:return n=yv(t),[4,Rv()];case 1:return r=s.sent(),i=r.transaction(Nv,"readwrite"),o=i.objectStore(Nv),[4,o.get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||bv(t,e.fid),[2,e]}}))}))}function Ov(t){return Fd(this,void 0,void 0,(function(){var e,n,r;return jd(this,(function(i){switch(i.label){case 0:return e=yv(t),[4,Rv()];case 1:return n=i.sent(),r=n.transaction(Nv,"readwrite"),[4,r.objectStore(Nv).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Dv(t,e){return Fd(this,void 0,void 0,(function(){var n,r,i,o,a,s;return jd(this,(function(u){switch(u.label){case 0:return n=yv(t),[4,Rv()];case 1:return r=u.sent(),i=r.transaction(Nv,"readwrite"),o=i.objectStore(Nv),[4,o.get(n)];case 2:return a=u.sent(),s=e(a),void 0!==s?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||bv(t,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){return Fd(this,void 0,void 0,(function(){var e,n,r;return jd(this,(function(i){switch(i.label){case 0:return[4,Dv(t,(function(n){var r=Mv(n),i=Fv(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return n=i.sent(),n.fid!==dv?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function Mv(t){var e=t||{fid:vv(),registrationStatus:0};return Vv(e)}function Fv(t,e){if(0===e.registrationStatus){if(!navigator.onLine){var n=Promise.reject(tv.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=jv(t,r);return{installationEntry:r,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Uv(t)}:{installationEntry:e}}function jv(t,e){return Fd(this,void 0,void 0,(function(){var n,r;return jd(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,lv(t,e)];case 1:return n=i.sent(),[2,xv(t,n)];case 2:return r=i.sent(),ev(r)&&409===r.customData.serverCode?[4,Ov(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,xv(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}function Uv(t){return Fd(this,void 0,void 0,(function(){var e,n,r,i;return jd(this,(function(o){switch(o.label){case 0:return[4,qv(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,hv(100)];case 3:return o.sent(),[4,qv(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Lv(t)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,e]}}))}))}function qv(t){return Dv(t,(function(t){if(!t)throw tv.create("installation-not-found");return Vv(t)}))}function Vv(t){return Bv(t)?{fid:t.fid,registrationStatus:0}:t}function Bv(t){return 1===t.registrationStatus&&t.registrationTime+Gd<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Fd(this,void 0,void 0,(function(){var t,i,o,a,s,u,c,l;return jd(this,(function(h){switch(h.label){case 0:return t=Wv(n,e),i=av(n,e),o=r.getImmediate({optional:!0}),o&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:zd}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,sv((function(){return fetch(t,s)}))];case 1:return u=h.sent(),u.ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),l=rv(c),[2,l];case 3:return[4,iv("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function Wv(t,e){var n=e.fid;return nv(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e){return void 0===e&&(e=!1),Fd(this,void 0,void 0,(function(){var n,r,i,o;return jd(this,(function(a){switch(a.label){case 0:return[4,Dv(t.appConfig,(function(r){if(!$v(r))throw tv.create("not-registered");var i=r.authToken;if(!e&&Yv(i))return r;if(1===i.requestStatus)return n=Gv(t,e),r;if(!navigator.onLine)throw tv.create("app-offline");var o=Jv(r);return n=Qv(t,o),o}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return i=o,[2,i]}}))}))}function Gv(t,e){return Fd(this,void 0,void 0,(function(){var n,r;return jd(this,(function(i){switch(i.label){case 0:return[4,zv(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,hv(100)];case 3:return i.sent(),[4,zv(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,0===r.requestStatus?[2,Hv(t,e)]:[2,r]}}))}))}function zv(t){return Dv(t,(function(t){if(!$v(t))throw tv.create("not-registered");var e=t.authToken;return Zv(e)?Md(Md({},t),{authToken:{requestStatus:0}}):t}))}function Qv(t,e){return Fd(this,void 0,void 0,(function(){var n,r,i;return jd(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Kv(t,e)];case 1:return n=o.sent(),i=Md(Md({},e),{authToken:n}),[4,xv(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),!ev(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Ov(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Md(Md({},e),{authToken:{requestStatus:0}}),[4,xv(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}function $v(t){return void 0!==t&&2===t.registrationStatus}function Yv(t){return 2===t.requestStatus&&!Xv(t)}function Xv(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Yd}function Jv(t){var e={requestStatus:1,requestTime:Date.now()};return Md(Md({},t),{authToken:e})}function Zv(t){return 1===t.requestStatus&&t.requestTime+Gd<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t){return Fd(this,void 0,void 0,(function(){var e,n,r;return jd(this,(function(i){switch(i.label){case 0:return[4,Lv(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,r=e.registrationPromise,r?r.catch(console.error):Hv(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t,e){return void 0===e&&(e=!1),Fd(this,void 0,void 0,(function(){var n;return jd(this,(function(r){switch(r.label){case 0:return[4,ng(t.appConfig)];case 1:return r.sent(),[4,Hv(t,e)];case 2:return n=r.sent(),[2,n.token]}}))}))}function ng(t){return Fd(this,void 0,void 0,(function(){var e;return jd(this,(function(n){switch(n.label){case 0:return[4,Lv(t)];case 1:return e=n.sent().registrationPromise,e?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){return Fd(this,void 0,void 0,(function(){var n,r,i,o;return jd(this,(function(a){switch(a.label){case 0:return n=ig(t,e),r=av(t,e),i={method:"DELETE",headers:r},[4,sv((function(){return fetch(n,i)}))];case 1:return o=a.sent(),o.ok?[3,3]:[4,iv("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function ig(t,e){var n=e.fid;return nv(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t){return Fd(this,void 0,void 0,(function(){var e,n;return jd(this,(function(r){switch(r.label){case 0:return e=t.appConfig,[4,Dv(e,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw tv.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw tv.create("app-offline");case 3:return[4,rg(e,n)];case 4:return r.sent(),[4,Ov(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t,e){var n=t.appConfig;return _v(n,e),function(){wv(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t){var e,n;if(!t||!t.options)throw ug("App Configuration");if(!t.name)throw ug("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Ud(r),o=i.next();!o.done;o=i.next()){var a=o.value;if(!t.options[a])throw ug(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ug(t){return tv.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t){var e="installations";t.INTERNAL.registerComponent(new fd.Component(e,(function(t){var e=t.getProvider("app").getImmediate(),n=sg(e),r=t.getProvider("platform-logger"),i={appConfig:n,platformLoggerProvider:r},o={app:e,getId:function(){return tg(i)},getToken:function(t){return eg(i,t)},delete:function(){return og(i)},onIdChange:function(t){return ag(i,t)}};return o}),"PUBLIC")),t.registerVersion(Wd,Hd)}cg(r["default"]);var lg=function(){return lg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lg.apply(this,arguments)};function hg(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function fg(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;function pg(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dg(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function vg(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var gg,yg,mg=(gg={},gg["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',gg["only-available-in-window"]="This method is available in a Window context.",gg["only-available-in-sw"]="This method is available in a service worker context.",gg["permission-default"]="The notification permission was not granted and dismissed instead.",gg["permission-blocked"]="The notification permission was not granted and blocked instead.",gg["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",gg["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",gg["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",gg["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",gg["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",gg["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",gg["token-update-no-token"]="FCM returned no token when updating the user to push.",gg["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",gg["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",gg["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",gg["invalid-vapid-key"]="The public VAPID key must be a string.",gg["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",gg),bg=new c.ErrorFactory("messaging","Messaging",mg),_g="/firebase-messaging-sw.js",wg="/firebase-cloud-messaging-push-scope",Ig="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Tg="https://fcmregistrations.googleapis.com/v1",Eg="FCM_MSG",Sg="FirebaseMessaging: ",Cg="google.c.a.e",kg="google.c.a.c_id",Ag="google.c.a.ts",Ng="google.c.a.c_l",Pg=1e3,Rg=3e3;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xg(t){var e=new Uint8Array(t),n=btoa(String.fromCharCode.apply(String,vg([],dg(e))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Og(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["PUSH_RECEIVED"]="push-received",t["NOTIFICATION_CLICKED"]="notification-clicked"})(yg||(yg={}));var Dg="fcm_token_details_db",Lg=5,Mg="fcm_token_object_Store";function Fg(t){return hg(this,void 0,void 0,(function(){var e,n,r,i,o=this;return fg(this,(function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=a.sent(),n=e.map((function(t){return t.name})),!n.includes(Dg))return[2,null];a.label=2;case 2:return r=null,[4,(0,Kd.openDb)(Dg,Lg,(function(e){return hg(o,void 0,void 0,(function(){var n,i,o,a;return fg(this,(function(s){switch(s.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(Mg)?(n=e.transaction.objectStore(Mg),[4,n.index("fcmSenderId").get(t)]):[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===e.oldVersion){if(o=i,!o.auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:xg(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(o=i,r={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:xg(o.auth),p256dh:xg(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:xg(o.vapidKey)}});return[2]}}))}))}))];case 3:return i=a.sent(),i.close(),[4,(0,Kd.deleteDb)(Dg)];case 4:return a.sent(),[4,(0,Kd.deleteDb)("fcm_vapid_details_db")];case 5:return a.sent(),[4,(0,Kd.deleteDb)("undefined")];case 6:return a.sent(),[2,jg(r)?r:null]}}))}))}function jg(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ug="firebase-messaging-database",qg=1,Vg="firebase-messaging-store",Bg=null;function Kg(){return Bg||(Bg=(0,Kd.openDb)(Ug,qg,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Vg)}}))),Bg}function Wg(t){return hg(this,void 0,void 0,(function(){var e,n,r,i;return fg(this,(function(o){switch(o.label){case 0:return e=zg(t),[4,Kg()];case 1:return n=o.sent(),[4,n.transaction(Vg).objectStore(Vg).get(e)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,Fg(t.appConfig.senderId)];case 4:return i=o.sent(),i?[4,Hg(t,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}}))}))}function Hg(t,e){return hg(this,void 0,void 0,(function(){var n,r,i;return fg(this,(function(o){switch(o.label){case 0:return n=zg(t),[4,Kg()];case 1:return r=o.sent(),i=r.transaction(Vg,"readwrite"),[4,i.objectStore(Vg).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function Gg(t){return hg(this,void 0,void 0,(function(){var e,n,r;return fg(this,(function(i){switch(i.label){case 0:return e=zg(t),[4,Kg()];case 1:return n=i.sent(),r=n.transaction(Vg,"readwrite"),[4,r.objectStore(Vg).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function zg(t){var e=t.appConfig;return e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t,e){return hg(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return fg(this,(function(c){switch(c.label){case 0:return[4,Jg(t)];case 1:n=c.sent(),r=Zg(e),i={method:"POST",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(Xg(t.appConfig),i)];case 3:return a=c.sent(),[4,a.json()];case 4:return o=c.sent(),[3,6];case 5:throw s=c.sent(),bg.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,bg.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw bg.create("token-subscribe-no-token");return[2,o.token]}}))}))}function $g(t,e){return hg(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return fg(this,(function(c){switch(c.label){case 0:return[4,Jg(t)];case 1:n=c.sent(),r=Zg(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(Xg(t.appConfig)+"/"+e.token,i)];case 3:return a=c.sent(),[4,a.json()];case 4:return o=c.sent(),[3,6];case 5:throw s=c.sent(),bg.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,bg.create("token-update-failed",{errorInfo:u});if(!o.token)throw bg.create("token-update-no-token");return[2,o.token]}}))}))}function Yg(t,e){return hg(this,void 0,void 0,(function(){var n,r,i,o,a,s;return fg(this,(function(u){switch(u.label){case 0:return[4,Jg(t)];case 1:n=u.sent(),r={method:"DELETE",headers:n},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Xg(t.appConfig)+"/"+e,r)];case 3:return i=u.sent(),[4,i.json()];case 4:if(o=u.sent(),o.error)throw a=o.error.message,bg.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw s=u.sent(),bg.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function Xg(t){var e=t.projectId;return Tg+"/projects/"+e+"/registrations"}function Jg(t){var e=t.appConfig,n=t.installations;return hg(this,void 0,void 0,(function(){var t;return fg(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function Zg(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==Ig&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ty=6048e5;function ey(t,e,n){return hg(this,void 0,void 0,(function(){var r,i,o,a;return fg(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw bg.create("permission-blocked");return[4,oy(e,n)];case 1:return r=s.sent(),[4,Wg(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:xg(r.getKey("auth")),p256dh:xg(r.getKey("p256dh"))},i?[3,3]:[2,iy(t,o)];case 3:if(ay(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,Yg(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,iy(t,o)];case 8:return Date.now()>=i.createTime+ty?[2,ry({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}}))}))}function ny(t,e){return hg(this,void 0,void 0,(function(){var n,r;return fg(this,(function(i){switch(i.label){case 0:return[4,Wg(t)];case 1:return n=i.sent(),n?[4,Yg(t,n.token)]:[3,4];case 2:return i.sent(),[4,Gg(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}}))}))}function ry(t,e,n){return hg(this,void 0,void 0,(function(){var r,i,o;return fg(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,$g(e,t)];case 1:return r=a.sent(),i=lg(lg({},t),{token:r,createTime:Date.now()}),[4,Hg(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,ny(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function iy(t,e){return hg(this,void 0,void 0,(function(){var n,r;return fg(this,(function(i){switch(i.label){case 0:return[4,Qg(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Hg(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function oy(t,e){return hg(this,void 0,void 0,(function(){var n;return fg(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Og(e)})]}}))}))}function ay(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t){var e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return uy(e,t),cy(e,t),ly(e,t),e}function uy(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}function cy(t,e){e.data&&(t.data=e.data)}function ly(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t){return"object"===typeof t&&!!t&&kg in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var py=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!==typeof t)throw bg.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return hg(this,void 0,void 0,(function(){var n;return fg(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Wg(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Ig,r.label=2;case 2:return[2,ey(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return ny(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw bg.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw bg.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw bg.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw bg.create("only-available-in-window")},t.prototype.onMessage=function(){throw bg.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw bg.create("only-available-in-window")},t.prototype.onPush=function(t){return hg(this,void 0,void 0,(function(){var e,n,r,i;return fg(this,(function(o){switch(o.label){case 0:return e=vy(t),e?[4,by()]:(console.debug(Sg+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return n=o.sent(),yy(n)?[2,my(n,e)]:(r=!1,e.notification?[4,_y(dy(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=sy(e),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,fy(Pg)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return hg(this,void 0,void 0,(function(){var r,i;return fg(this,(function(o){switch(o.label){case 0:return r=t.newSubscription,r?[3,2]:[4,ny(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,Wg(this.firebaseDependencies)];case 3:return i=o.sent(),[4,ny(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,ey(this.firebaseDependencies,self.registration,null!==(n=null===(e=null===i||void 0===i?void 0:i.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Ig)];case 5:return o.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return hg(this,void 0,void 0,(function(){var r,i,o,a,s;return fg(this,(function(u){switch(u.label){case 0:return r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[Eg],r?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=wy(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,gy(o)]):[2]):[2];case 1:return s=u.sent(),s?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,fy(Rg)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=yg.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},t}();function dy(t){var e,n=lg({},t.notification);return n.data=(e={},e[Eg]=t,e),n}function vy(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}function gy(t){return hg(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return fg(this,(function(u){switch(u.label){case 0:return[4,by()];case 1:e=u.sent();try{for(n=pg(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){a={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function yy(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}function my(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=yg.PUSH_RECEIVED;try{for(var i=pg(t),o=i.next();!o.done;o=i.next()){var a=o.value;a.postMessage(e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function by(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function _y(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}function wy(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(hy(t.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Iy=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return hg(this,void 0,void 0,(function(){var e,n;return fg(this,(function(r){switch(r.label){case 0:return e=t.data,e.isFirebaseMessaging?(this.onMessageCallback&&e.messageType===yg.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(Ey(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),n=e.data,hy(n)&&"1"===n[Cg]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return hg(this,void 0,void 0,(function(){return fg(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw bg.create("permission-blocked");return[4,this.updateVapidKey(null===t||void 0===t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null===t||void 0===t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,ey(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return hg(this,void 0,void 0,(function(){return fg(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Ig),[2]}))}))},t.prototype.updateSwReg=function(t){return hg(this,void 0,void 0,(function(){return fg(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw bg.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return hg(this,void 0,void 0,(function(){var t,e;return fg(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(_g,{scope:wg})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),bg.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return hg(this,void 0,void 0,(function(){return fg(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,ny(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return hg(this,void 0,void 0,(function(){var t;return fg(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(t=e.sent(),"granted"===t)return[2];throw"denied"===t?bg.create("permission-blocked"):bg.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw bg.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw bg.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw bg.create("invalid-sw-registration");if(this.swRegistration)throw bg.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw bg.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw bg.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return hg(this,void 0,void 0,(function(){var n,r;return fg(this,(function(i){switch(i.label){case 0:return n=Ty(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r=i.sent(),r.logEvent(n,{message_id:e[kg],message_name:e[Ng],message_time:e[Ag],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function Ty(t){switch(t){case yg.NOTIFICATION_CLICKED:return"notification_open";case yg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ey(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){var e,n;if(!t||!t.options)throw Cy("App Configuration Object");if(!t.name)throw Cy("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=t.options;try{for(var o=pg(r),a=o.next();!a.done;a=o.next()){var s=a.value;if(!i[s])throw Cy(s)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function Cy(t){return bg.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ky="messaging";function Ay(t){var e=t.getProvider("app").getImmediate(),n=Sy(e),r=t.getProvider("installations").getImmediate(),i=t.getProvider("analytics-internal"),o={app:e,appConfig:n,installations:r,analyticsProvider:i};if(!Py())throw bg.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new py(o):new Iy(o)}var Ny={isSupported:Py};function Py(){return self&&"ServiceWorkerGlobalScope"in self?xy():Ry()}function Ry(){return"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function xy(){return"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}r["default"].INTERNAL.registerComponent(new fd.Component(ky,Ay,"PUBLIC").setServiceProps(Ny));var Oy=function(t,e){return Oy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Oy(t,e)};function Dy(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Oy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ly=function(){return Ly=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ly.apply(this,arguments)};function My(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Fy(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;function jy(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var Uy="firebasestorage.googleapis.com",qy="storageBucket",Vy=12e4,By=6e5,Ky=function(t){function e(n,r){var i=t.call(this,Wy(n),"Firebase Storage: "+r+" ("+Wy(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Dy(e,t),e.prototype._codeEquals=function(t){return Wy(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(c.FirebaseError);function Wy(t){return"storage/"+t}function Hy(){var t="An unknown error occurred, please check the error payload for server response.";return new Ky("unknown",t)}function Gy(t){return new Ky("object-not-found","Object '"+t+"' does not exist.")}function zy(t){return new Ky("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Qy(){var t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ky("unauthenticated",t)}function $y(){return new Ky("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Yy(t){return new Ky("unauthorized","User does not have permission to access '"+t+"'.")}function Xy(){return new Ky("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Jy(){return new Ky("canceled","User canceled the upload/download.")}function Zy(t){return new Ky("invalid-url","Invalid URL '"+t+"'.")}function tm(t){return new Ky("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function em(){return new Ky("no-default-bucket","No default bucket found. Did you set the '"+qy+"' property when initializing the app?")}function nm(){return new Ky("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function rm(){return new Ky("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function im(){return new Ky("no-download-url","The given file does not have any download URLs.")}function om(t){return new Ky("invalid-argument",t)}function am(){return new Ky("app-deleted","The Firebase app was deleted.")}function sm(t){return new Ky("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function um(t,e){return new Ky("invalid-format","String does not match format '"+t+"': "+e)}function cm(t){throw new Ky("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t){return atob(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},fm=function(){function t(t,e){this.data=t,this.contentType=e||null}return t}();function pm(t,e){switch(t){case hm.RAW:return new fm(dm(e));case hm.BASE64:case hm.BASE64URL:return new fm(gm(t,e));case hm.DATA_URL:return new fm(mm(e),bm(e))}throw Hy()}function dm(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<t.length-1&&56320===(64512&t.charCodeAt(n+1));if(i){var o=r,a=t.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189)}else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function vm(t){var e;try{e=decodeURIComponent(t)}catch(n){throw um(hm.DATA_URL,"Malformed data URL.")}return dm(e)}function gm(t,e){switch(t){case hm.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r){var i=n?"-":"_";throw um(t,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case hm.BASE64URL:var o=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(o||a){i=o?"+":"/";throw um(t,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}var s;try{s=lm(e)}catch(l){throw um(t,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}var ym=function(){function t(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw um(hm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=_m(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}return t}();function mm(t){var e=new ym(t);return e.base64?gm(hm.BASE64,e.rest):vm(e.rest)}function bm(t){var e=new ym(t);return e.contentType}function _m(t,e){var n=t.length>=e.length;return!!n&&t.substring(t.length-e.length)===e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wm,Im={STATE_CHANGED:"state_changed"},Tm={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Em(t){switch(t){case"running":case"pausing":case"canceling":return Tm.RUNNING;case"paused":return Tm.PAUSED;case"success":return Tm.SUCCESS;case"canceled":return Tm.CANCELED;case"error":return Tm.ERROR;default:return Tm.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["NO_ERROR"]=0]="NO_ERROR",t[t["NETWORK_ERROR"]=1]="NETWORK_ERROR",t[t["ABORT"]=2]="ABORT"})(wm||(wm={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sm=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=wm.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=wm.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=wm.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw cm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw cm("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw cm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw cm("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();function Cm(){return new Sm}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var km=function(){function t(){}return t.prototype.createConnection=function(){return Cm()},t}(),Am=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(i){return new t(e,"")}if(""===r.path)return r;throw tm(e)},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function o(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}var a="(/(.*))?$",s=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function c(t){t.path_=decodeURIComponent(t.path)}for(var l="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp("^https?://"+h+"/"+l+"/b/"+i+"/o"+f,"i"),d={bucket:1,path:3},v=n===Uy?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp("^https?://"+v+"/"+i+"/"+g,"i"),m={bucket:1,path:2},b=[{regex:s,indices:u,postModify:o},{regex:p,indices:d,postModify:c},{regex:y,indices:m,postModify:c}],_=0;_<b.length;_++){var w=b[_],I=w.regex.exec(e);if(I){var T=I[w.indices.bucket],E=I[w.indices.path];E||(E=""),r=new t(T,E),w.postModify(r);break}}if(null==r)throw Zy(e);return r},t}(),Nm=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pm(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,s())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,jy([null,t],e));else{var i,h=s()||o;if(h)c.call.apply(c,jy([null,t],e));else r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i)}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout((function(){o=!0,p(!0)}),n),p}function Rm(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t){return void 0!==t}function Om(t){return"function"===typeof t}function Dm(t){return"object"===typeof t&&!Array.isArray(t)}function Lm(t){return"string"===typeof t||t instanceof String}function Mm(t){return Fm()&&t instanceof Blob}function Fm(){return"undefined"!==typeof Blob}function jm(t,e,n,r){if(r<e)throw om("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw om("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e){var n=e.match(/^(\w+):\/\/.+/),r=null===n||void 0===n?void 0:n[1],i=e;return null==r&&(i="https://"+e),i+"/v0"+t}function qm(t){var e=encodeURIComponent,n="?";for(var r in t)if(t.hasOwnProperty(r)){var i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vm=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){if(n)e(!1,new Bm(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===wm.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Bm(a,r))}else{var s=r.getErrorCode()===wm.ABORT;e(!1,new Bm(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}function n(e,n){var r=t.resolve_,i=t.reject_,o=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(o,o.getResponseText());xm(a)?r(a):r()}catch(u){i(u)}else if(null!==o){var s=Hy();s.serverResponse=o.getResponseText(),t.errorCallback_?i(t.errorCallback_(o,s)):i(s)}else if(n.canceled){s=t.appDelete_?am():Jy();i(s)}else{s=Xy();i(s)}}this.canceled_?n(!1,new Bm(!1,null,!0)):this.backoffId_=Pm(e,n,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&Rm(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=[408,429],r=-1!==n.indexOf(t),i=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||i},t}(),Bm=function(){function t(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}return t}();function Km(t,e){null!==e&&e.length>0&&(t["Authorization"]="Firebase "+e)}function Wm(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}function Hm(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Gm(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}function zm(t,e,n,r,i,o){var a=qm(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return Hm(u,e),Km(u,n),Wm(u,o),Gm(u,r),new Vm(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function $m(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Qm();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Fm())return new Blob(t);throw new Ky("unsupported-environment","This browser doesn't seem to support creating Blobs")}function Ym(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xm=function(){function t(t,e){var n=0,r="";Mm(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Mm(this.data_)){var r=this.data_,i=Ym(r,e,n);return null===i?null:new t(i)}var o=new Uint8Array(this.data_.buffer,e,n-e);return new t(o,!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Fm()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t($m.apply(null,r))}var i=e.map((function(t){return Lm(t)?pm(hm.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t){var e;try{e=JSON.parse(t)}catch(n){return null}return Dm(e)?e:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t){if(0===t.length)return null;var e=t.lastIndexOf("/");if(-1===e)return"";var n=t.slice(0,e);return n}function tb(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function eb(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t,e){return e}var rb=function(){function t(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||nb}return t}(),ib=null;function ob(t){return!Lm(t)||t.length<2?t:eb(t)}function ab(){if(ib)return ib;var t=[];function e(t,e){return ob(e)}t.push(new rb("bucket")),t.push(new rb("generation")),t.push(new rb("metageneration")),t.push(new rb("name","fullPath",!0));var n=new rb("name");function r(t,e){return void 0!==e?Number(e):e}n.xform=e,t.push(n);var i=new rb("size");return i.xform=r,t.push(i),t.push(new rb("timeCreated")),t.push(new rb("updated")),t.push(new rb("md5Hash",null,!0)),t.push(new rb("cacheControl",null,!0)),t.push(new rb("contentDisposition",null,!0)),t.push(new rb("contentEncoding",null,!0)),t.push(new rb("contentLanguage",null,!0)),t.push(new rb("contentType",null,!0)),t.push(new rb("metadata","customMetadata",!0)),ib=t,ib}function sb(t,e){function n(){var n=t["bucket"],r=t["fullPath"],i=new Am(n,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function ub(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return sb(r,t),r}function cb(t,e,n){var r=Jm(e);if(null===r)return null;var i=r;return ub(t,i,n)}function lb(t,e,n){var r=Jm(e);if(null===r)return null;if(!Lm(r["downloadTokens"]))return null;var i=r["downloadTokens"];if(0===i.length)return null;var o=encodeURIComponent,a=i.split(","),s=a.map((function(e){var r=t["bucket"],i=t["fullPath"],a="/b/"+o(r)+"/o/"+o(i),s=Um(a,n),u=qm({alt:"media",token:e});return s+u}));return s[0]}function hb(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fb="prefixes",pb="items";function db(t,e,n){var r={prefixes:[],items:[],nextPageToken:n["nextPageToken"]};if(n[fb])for(var i=0,o=n[fb];i<o.length;i++){var a=o[i],s=a.replace(/\/$/,""),u=t._makeStorageReference(new Am(e,s));r.prefixes.push(u)}if(n[pb])for(var c=0,l=n[pb];c<l.length;c++){var h=l[c];u=t._makeStorageReference(new Am(e,h["name"]));r.items.push(u)}return r}function vb(t,e,n){var r=Jm(n);if(null===r)return null;var i=r;return db(t,e,i)}var gb=function(){function t(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t){if(!t)throw Hy()}function mb(t,e){function n(n,r){var i=cb(t,r,e);return yb(null!==i),i}return n}function bb(t,e){function n(n,r){var i=vb(t,e,r);return yb(null!==i),i}return n}function _b(t,e){function n(n,r){var i=cb(t,r,e);return yb(null!==i),lb(i,r,t.host)}return n}function wb(t){function e(e,n){var r;return r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?$y():Qy():402===e.getStatus()?zy(t.bucket):403===e.getStatus()?Yy(t.path):n,r.serverResponse=n.serverResponse,r}return e}function Ib(t){var e=wb(t);function n(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=Gy(t.path)),i.serverResponse=r.serverResponse,i}return n}function Tb(t,e,n){var r=e.fullServerUrl(),i=Um(r,t.host),o="GET",a=t.maxOperationRetryTime,s=new gb(i,o,mb(t,n),a);return s.errorHandler=Ib(e),s}function Eb(t,e,n,r,i){var o={};e.isRoot?o["prefix"]="":o["prefix"]=e.path+"/",n&&n.length>0&&(o["delimiter"]=n),r&&(o["pageToken"]=r),i&&(o["maxResults"]=i);var a=e.bucketOnlyServerUrl(),s=Um(a,t.host),u="GET",c=t.maxOperationRetryTime,l=new gb(s,u,bb(t,e.bucket),c);return l.urlParams=o,l.errorHandler=wb(e),l}function Sb(t,e,n){var r=e.fullServerUrl(),i=Um(r,t.host),o="GET",a=t.maxOperationRetryTime,s=new gb(i,o,_b(t,n),a);return s.errorHandler=Ib(e),s}function Cb(t,e,n,r){var i=e.fullServerUrl(),o=Um(i,t.host),a="PATCH",s=hb(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,l=new gb(o,a,mb(t,r),c);return l.headers=u,l.body=s,l.errorHandler=Ib(e),l}function kb(t,e){var n=e.fullServerUrl(),r=Um(n,t.host),i="DELETE",o=t.maxOperationRetryTime;function a(t,e){}var s=new gb(r,i,a,o);return s.successCodes=[200,204],s.errorHandler=Ib(e),s}function Ab(t,e){return t&&t["contentType"]||e&&e.type()||"application/octet-stream"}function Nb(t,e,n){var r=Object.assign({},n);return r["fullPath"]=t.path,r["size"]=e.size(),r["contentType"]||(r["contentType"]=Ab(null,e)),r}function Pb(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function s(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}var u=s();a["Content-Type"]="multipart/related; boundary="+u;var c=Nb(e,r,i),l=hb(c,n),h="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+u+"\r\nContent-Type: "+c["contentType"]+"\r\n\r\n",f="\r\n--"+u+"--",p=Xm.getBlob(h,r,f);if(null===p)throw nm();var d={name:c["fullPath"]},v=Um(o,t.host),g="POST",y=t.maxUploadRetryTime,m=new gb(v,g,mb(t,n),y);return m.urlParams=d,m.headers=a,m.body=p.uploadData(),m.errorHandler=wb(e),m}var Rb=function(){function t(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}return t}();function xb(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(i){yb(!1)}var r=e||["active"];return yb(!!n&&-1!==r.indexOf(n)),n}function Ob(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Nb(e,r,i),s={name:a["fullPath"]},u=Um(o,t.host),c="POST",l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a["contentType"],"Content-Type":"application/json; charset=utf-8"},h=hb(a,n),f=t.maxUploadRetryTime;function p(t){var e;xb(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){yb(!1)}return yb(Lm(e)),e}var d=new gb(u,c,p,f);return d.urlParams=s,d.headers=l,d.body=h,d.errorHandler=wb(e),d}function Db(t,e,n,r){var i={"X-Goog-Upload-Command":"query"};function o(t){var e=xb(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){yb(!1)}n||yb(!1);var i=Number(n);return yb(!isNaN(i)),new Rb(i,r.size(),"final"===e)}var a="POST",s=t.maxUploadRetryTime,u=new gb(n,a,o,s);return u.headers=i,u.errorHandler=wb(e),u}var Lb=262144;function Mb(t,e,n,r,i,o,a,s){var u=new Rb(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw rm();var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p=l===c?"upload, finalize":"upload",d={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":""+u.current},v=r.slice(h,f);if(null===v)throw nm();function g(t,n){var i,a=xb(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?mb(e,o)(t,n):null,new Rb(s,c,"final"===a,i)}var y="POST",m=e.maxUploadRetryTime,b=new gb(n,y,g,m);return b.headers=d,b.body=v.uploadData(),b.progressCallback=s||null,b.errorHandler=wb(t),b}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fb=function(){function t(t,e,n){var r=Om(t)||null!=e||null!=n;if(r)this.next=t,this.error=e,this.complete=n;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ub=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=ab(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused");break}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=Ob(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=Db(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Lb*this._chunkMultiplier,n=new Rb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=Mb(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(u){return t._error=u,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){var t=Lb*this._chunkMultiplier;t<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=Tb(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=Pb(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":this._state=t,void 0!==this._request&&this._request.cancel();break;case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Jy(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Em(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Fb(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise();var e=this._observers.slice();e.forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Em(this._state)){case Tm.SUCCESS:jb(this._resolve.bind(null,this.snapshot))();break;case Tm.CANCELED:case Tm.ERROR:var e=this._reject;jb(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){var e=Em(this._state);switch(e){case Tm.RUNNING:case Tm.PAUSED:t.next&&jb(t.next.bind(t,this.snapshot))();break;case Tm.SUCCESS:t.complete&&jb(t.complete.bind(t))();break;case Tm.CANCELED:case Tm.ERROR:t.error&&jb(t.error.bind(t,this._error))();break;default:t.error&&jb(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),qb=function(){function t(t,e){this._service=t,this._location=e instanceof Am?e:Am.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Am(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return eb(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=Zm(this._location.path);if(null===e)return null;var n=new Am(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw sm(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Ub(t,new Xm(e),n)}function Bb(t){var e={prefixes:[],items:[]};return Kb(t,e).then((function(){return e}))}function Kb(t,e,n){return My(this,void 0,void 0,(function(){var r,i,o,a;return Fy(this,(function(s){switch(s.label){case 0:return r={pageToken:n},[4,Wb(t,r)];case 1:return i=s.sent(),(o=e.prefixes).push.apply(o,i.prefixes),(a=e.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,Kb(t,e,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Wb(t,e){return My(this,void 0,void 0,(function(){var n,r;return Fy(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&jm("options.maxResults",1,1e3,e.maxResults),n=e||{},r=Eb(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function Hb(t){return My(this,void 0,void 0,(function(){var e;return Fy(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Tb(t.storage,t._location,ab()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Gb(t,e){return My(this,void 0,void 0,(function(){var n;return Fy(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=Cb(t.storage,t._location,e,ab()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function zb(t){return My(this,void 0,void 0,(function(){var e;return Fy(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=Sb(t.storage,t._location,ab()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw im();return t}))]}}))}))}function Qb(t){return My(this,void 0,void 0,(function(){var e;return Fy(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=kb(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function $b(t,e){var n=tb(t._location.path,e),r=new Am(t._location.bucket,n);return new qb(t.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t){return/^[A-Za-z]+:\/\//.test(t)}function Xb(t,e){return new qb(t,e)}function Jb(t,e){if(t instanceof n_){var n=t;if(null==n._bucket)throw em();var r=new qb(n,n._bucket);return null!=e?Jb(r,e):r}return void 0!==e?$b(t,e):t}function Zb(t,e){if(e&&Yb(e)){if(t instanceof n_)return Xb(t,e);throw om("To use ref(service, url), the first argument must be a Storage instance.")}return Jb(t,e)}function t_(t,e){var n=null===e||void 0===e?void 0:e[qy];return null==n?null:Am.makeFromBucketSpec(n,t)}function e_(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"===typeof i?i:(0,c.createMockUserToken)(i,t.app.options.projectId))}var n_=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Uy,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Vy,this._maxUploadRetryTime=By,this._requests=new Set,this._bucket=null!=i?Am.makeFromBucketSpec(i,this._host):t_(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=Am.makeFromBucketSpec(this._url,t):this._bucket=t_(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){jm("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){jm("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return My(this,void 0,void 0,(function(){var t,e;return Fy(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2]);case 1:if(e=n.sent(),null!==e)return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return My(this,void 0,void 0,(function(){var t,e;return Fy(this,(function(n){switch(n.label){case 0:return t=this._appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return e=n.sent(),[2,e.token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new qb(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Nm(am());var i=zm(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return My(this,void 0,void 0,(function(){var e,n,r;return Fy(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t,e,n){return t=(0,c.getModularInstance)(t),Vb(t,e,n)}function i_(t){return t=(0,c.getModularInstance)(t),Hb(t)}function o_(t,e){return t=(0,c.getModularInstance)(t),Gb(t,e)}function a_(t,e){return t=(0,c.getModularInstance)(t),Wb(t,e)}function s_(t){return t=(0,c.getModularInstance)(t),Bb(t)}function u_(t){return t=(0,c.getModularInstance)(t),zb(t)}function c_(t){return t=(0,c.getModularInstance)(t),Qb(t)}function l_(t,e){return t=(0,c.getModularInstance)(t),Zb(t,e)}function h_(t,e){return $b(t,e)}function f_(t,e,n,r){void 0===r&&(r={}),e_(t,e,n,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p_=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),d_=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new p_(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new p_(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new p_(t,i,i._ref))}:{next:e.next?function(t){return e.next(new p_(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),v_=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new g_(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new g_(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),g_=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=h_(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new d_(r_(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=hm.RAW),this._throwIfRoot("putString");var r=pm(e,t),i=Ly({},n);return null==i["contentType"]&&null!=r.contentType&&(i["contentType"]=r.contentType),new d_(new Ub(this._delegate,new Xm(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return s_(this._delegate).then((function(e){return new v_(e,t.storage)}))},t.prototype.list=function(t){var e=this;return a_(this._delegate,t||void 0).then((function(t){return new v_(t,e.storage)}))},t.prototype.getMetadata=function(){return i_(this._delegate)},t.prototype.updateMetadata=function(t){return o_(this._delegate,t)},t.prototype.getDownloadURL=function(){return u_(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),c_(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw sm(t)},t}(),y_=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Yb(t))throw om("ref() expected a child path but got a URL, use refFromURL instead.");return new g_(l_(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Yb(t))throw om("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Am.makeFromUrl(t,this._delegate.host)}catch(e){throw om("refFromUrl() expected a valid full URL but got an invalid one.")}return new g_(l_(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),f_(this._delegate,t,e,n)},t}(),m_="@firebase/storage",b_="0.7.1",__="storage";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){var n=e.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal"),s=new y_(i,new n_(i,o,a,new km,n,r["default"].SDK_VERSION));return s}function I_(t){var e={TaskState:Tm,TaskEvent:Im,StringFormat:hm,Storage:n_,Reference:g_};t.INTERNAL.registerComponent(new fd.Component(__,w_,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(m_,b_)}I_(r["default"]);var T_=function(){return T_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},T_.apply(this,arguments)};Object.create;function E_(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var S_,C_,k_,A_="@firebase/performance",N_="0.4.18",P_=N_,R_="FB-PERF-TRACE-START",x_="FB-PERF-TRACE-STOP",O_="FB-PERF-TRACE-MEASURE",D_="_wt_",L_="_fp",M_="_fcp",F_="_fid",j_="@firebase/performance/config",U_="@firebase/performance/configexpire",q_="performance",V_="Performance",B_=(S_={},S_["trace started"]="Trace {$traceName} was started before.",S_["trace stopped"]="Trace {$traceName} is not running.",S_["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",S_["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",S_["no window"]="Window is not available.",S_["no app id"]="App id is not available.",S_["no project id"]="Project id is not available.",S_["no api key"]="Api key is not available.",S_["invalid cc log"]="Attempted to queue invalid cc event",S_["FB not default"]="Performance can only start when Firebase app instance is the default one.",S_["RC response not ok"]="RC response is not ok",S_["invalid attribute name"]="Attribute name {$attributeName} is invalid.",S_["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",S_["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",S_["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",S_),K_=new c.ErrorFactory(q_,V_,B_),W_=new l.Logger(V_);W_.logLevel=l.LogLevel.INFO;var H_,G_=function(){function t(t){if(this.window=t,!t)throw K_.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,c.isIndexedDBAvailable)()||(W_.info("IndexedDB is not supported by current browswer"),!1):(W_.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}}));n.observe({entryTypes:[t]})}},t.getInstance=function(){return void 0===C_&&(C_=new t(k_)),C_},t}();function z_(t){k_=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t,e){var n=t.length-e.length;if(n<0||n>1)throw K_.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $_,Y_,X_=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Q_("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Q_("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw K_.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw K_.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw K_.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===H_&&(H_=new t),H_},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(){var t=X_.getInstance().installationsService.getId();return t.then((function(t){$_=t})),t}function Z_(){return $_}function tw(){var t=X_.getInstance().installationsService.getToken();return t.then((function(t){})),t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["VISIBLE"]=1]="VISIBLE",t[t["HIDDEN"]=2]="HIDDEN"})(Y_||(Y_={}));var ew=["firebase_","google_","ga_"],nw=new RegExp("^[a-zA-Z]\\w*$"),rw=40,iw=100;function ow(){var t=G_.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function aw(){var t=G_.getInstance().document,e=t.visibilityState;switch(e){case"visible":return Y_.VISIBLE;case"hidden":return Y_.HIDDEN;default:return Y_.UNKNOWN}}function sw(){var t=G_.getInstance().navigator,e=t.connection,n=e&&e.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function uw(t){if(0===t.length||t.length>rw)return!1;var e=ew.some((function(e){return t.startsWith(e)}));return!e&&!!t.match(nw)}function cw(t){return 0!==t.length&&t.length<=iw}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lw="0.0.1",hw={loggingEnabled:!0},fw="FIREBASE_INSTALLATIONS_AUTH";function pw(t){var e=dw();return e?(mw(e),Promise.resolve()):yw(t).then(mw).then((function(t){return vw(t)}),(function(){}))}function dw(){var t=G_.getInstance().localStorage;if(t){var e=t.getItem(U_);if(e&&bw(e)){var n=t.getItem(j_);if(n)try{var r=JSON.parse(n);return r}catch(Kf){return}}}}function vw(t){var e=G_.getInstance().localStorage;t&&e&&(e.setItem(j_,JSON.stringify(t)),e.setItem(U_,String(Date.now()+60*X_.getInstance().configTimeToLive*60*1e3)))}var gw="Could not fetch config, will use default configs";function yw(t){return tw().then((function(e){var n=X_.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+X_.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:fw+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:X_.getInstance().getAppId(),app_version:P_,sdk_version:lw})});return fetch(i).then((function(t){if(t.ok)return t.json();throw K_.create("RC response not ok")}))})).catch((function(){W_.info(gw)}))}function mw(t){if(!t)return t;var e=X_.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=hw.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=_w(e.tracesSamplingRate),e.logNetworkAfterSampling=_w(e.networkRequestsSamplingRate),t}function bw(t){return Number(t)>Date.now()}function _w(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ww,Iw=1;function Tw(){return Iw=2,ww=ww||Sw(),ww}function Ew(){return 3===Iw}function Sw(){return Cw().then((function(){return J_()})).then((function(t){return pw(t)})).then((function(){return kw()}),(function(){return kw()}))}function Cw(){var t=G_.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}function kw(){Iw=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Aw,Nw=1e4,Pw=5500,Rw=3,xw=1e3,Ow=Rw,Dw=[],Lw=!1;function Mw(){Lw||(Fw(Pw),Lw=!0)}function Fw(t){setTimeout((function(){if(0!==Ow)return Dw.length?void jw():Fw(Nw)}),t)}function jw(){var t=Dw.splice(0,xw),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:X_.getInstance().logSource,log_event:e};Uw(n,t).catch((function(){Dw=E_(E_([],t),Dw),Ow--,W_.info("Tries left: "+Ow+"."),Fw(Nw)}))}function Uw(t,e){return qw(t).then((function(t){return t.ok||W_.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=Nw;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(Dw=E_(E_([],e),Dw),W_.info("Retry transport request later.")),Ow=Rw,Fw(r)}))}function qw(t){var e=X_.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function Vw(t){if(!t.eventTime||!t.message)throw K_.create("invalid cc log");Dw=E_(E_([],Dw),[t])}function Bw(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);Vw({message:r,eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t,e){Aw||(Aw=Bw(zw)),Aw(t,e)}function Ww(t){var e=X_.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&G_.getInstance().requiredApisAvailable()&&(t.isAuto&&aw()!==Y_.VISIBLE||(Ew()?Hw(t):Tw().then((function(){return Hw(t)}),(function(){return Hw(t)}))))}function Hw(t){if(Z_()){var e=X_.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return Kw(t,1)}),0)}}function Gw(t){var e=X_.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return Kw(t,0)}),0)}}function zw(t,e){return 0===e?Qw(t):$w(t)}function Qw(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Yw(),network_request_metric:e};return JSON.stringify(n)}function $w(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Yw(),trace_metric:e};return JSON.stringify(r)}function Yw(){return{google_app_id:X_.getInstance().getAppId(),app_instance_id:Z_(),web_app_info:{sdk_version:P_,page_url:G_.getInstance().getUrl(),service_worker_status:ow(),visibility_state:aw(),effective_connection_type:sw()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xw=100,Jw="_",Zw=[L_,M_,F_];function tI(t,e){return!(0===t.length||t.length>Xw)&&(e&&e.startsWith(D_)&&Zw.indexOf(t)>-1||!t.startsWith(Jw))}function eI(t){var e=Math.floor(t);return e<t&&W_.info("Metric value should be an Integer, setting the value as : "+e+"."),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nI=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=G_.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=R_+"-"+this.randomId+"-"+this.name,this.traceStopMark=x_+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||O_+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw K_.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw K_.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Ww(this)},t.prototype.record=function(t,e,n){if(t<=0)throw K_.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw K_.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=T_({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Ww(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!tI(t,this.name))throw K_.create("invalid custom metric name",{customMetricName:t});this.counters[t]=eI(e)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=uw(t),r=cw(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw K_.create("invalid attribute name",{attributeName:t});if(!r)throw K_.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return T_({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=G_.getInstance().getUrl();if(i){var o=new t(D_+i,!0),a=Math.floor(1e3*G_.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));var s="first-paint",u="first-contentful-paint";if(n){var c=n.find((function(t){return t.name===s}));c&&c.startTime&&o.putMetric(L_,Math.floor(1e3*c.startTime));var l=n.find((function(t){return t.name===u}));l&&l.startTime&&o.putMetric(M_,Math.floor(1e3*l.startTime)),r&&o.putMetric(F_,Math.floor(1e3*r))}Ww(o)}},t.createUserTimingTrace=function(e){var n=new t(e,!1,e);Ww(n)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t){var e=t;if(e&&void 0!==e.responseStart){var n=G_.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime)),a=e.name&&e.name.split("?")[0],s={url:a,responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};Gw(s)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iI=5e3;function oI(){Z_()&&(setTimeout((function(){return sI()}),0),setTimeout((function(){return aI()}),0),setTimeout((function(){return uI()}),0))}function aI(){for(var t=G_.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){var i=r[n];rI(i)}t.setupObserver("resource",rI)}function sI(){var t=G_.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){nI.createOobTrace(e,n),r=void 0}),iI);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),nI.createOobTrace(e,n,t))}))}else nI.createOobTrace(e,n)}function uI(){for(var t=G_.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){var i=r[n];cI(i)}t.setupObserver("measure",cI)}function cI(t){var e=t.name;e.substring(0,O_.length)!==O_&&nI.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lI=function(){function t(t){this.app=t,G_.getInstance().requiredApisAvailable()&&(0,c.validateIndexedDBOpenable)().then((function(t){t&&(Mw(),Tw().then(oI,oI))})).catch((function(t){W_.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new nI(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return X_.getInstance().instrumentationEnabled},set:function(t){X_.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return X_.getInstance().dataCollectionEnabled},set:function(t){X_.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}(),hI="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t){var e=function(t,e){if(t.name!==hI)throw K_.create("FB not default");if("undefined"===typeof window)throw K_.create("no window");return z_(window),X_.getInstance().firebaseAppInstance=t,X_.getInstance().installationsService=e,new lI(t)};t.INTERNAL.registerComponent(new fd.Component("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion(A_,N_)}fI(r["default"]);var pI=function(){return pI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pI.apply(this,arguments)};function dI(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function vI(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;Object.create;var gI,yI,mI="firebase_id",bI="origin",_I=6e4,wI="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",II="https://www.googletagmanager.com/gtag/js";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function TI(t,e,n,r,i){return dI(this,void 0,void 0,(function(){var o,a;return vI(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(gI.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=pI(pI({},r),{send_to:o}),t(gI.EVENT,n,a),s.label=3;case 3:return[2]}}))}))}function EI(t,e,n,r){return dI(this,void 0,void 0,(function(){var i;return vI(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(gI.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(gI.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))}function SI(t,e,n,r){return dI(this,void 0,void 0,(function(){var i;return vI(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(gI.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(gI.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))}function CI(t,e,n,r){return dI(this,void 0,void 0,(function(){var i,o,a,s,u;return vI(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(gI.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(gI.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))}function kI(t,e){return dI(this,void 0,void 0,(function(){var n;return vI(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["EVENT"]="event",t["SET"]="set",t["CONFIG"]="config"})(gI||(gI={})),function(t){t["ADD_SHIPPING_INFO"]="add_shipping_info",t["ADD_PAYMENT_INFO"]="add_payment_info",t["ADD_TO_CART"]="add_to_cart",t["ADD_TO_WISHLIST"]="add_to_wishlist",t["BEGIN_CHECKOUT"]="begin_checkout",t["CHECKOUT_PROGRESS"]="checkout_progress",t["EXCEPTION"]="exception",t["GENERATE_LEAD"]="generate_lead",t["LOGIN"]="login",t["PAGE_VIEW"]="page_view",t["PURCHASE"]="purchase",t["REFUND"]="refund",t["REMOVE_FROM_CART"]="remove_from_cart",t["SCREEN_VIEW"]="screen_view",t["SEARCH"]="search",t["SELECT_CONTENT"]="select_content",t["SELECT_ITEM"]="select_item",t["SELECT_PROMOTION"]="select_promotion",t["SET_CHECKOUT_OPTION"]="set_checkout_option",t["SHARE"]="share",t["SIGN_UP"]="sign_up",t["TIMING_COMPLETE"]="timing_complete",t["VIEW_CART"]="view_cart",t["VIEW_ITEM"]="view_item",t["VIEW_ITEM_LIST"]="view_item_list",t["VIEW_PROMOTION"]="view_promotion",t["VIEW_SEARCH_RESULTS"]="view_search_results"}(yI||(yI={}));var AI,NI=new l.Logger("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e){var n=document.createElement("script");n.src=II+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}function RI(t){var e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function xI(t,e,n,r,i,o){return dI(this,void 0,void 0,(function(){var a,s,u,c;return vI(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),u=s.find((function(t){return t.measurementId===i})),u?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),NI.error(c),[3,8];case 8:return t(gI.CONFIG,i,o),[2]}}))}))}function OI(t,e,n,r,i){return dI(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f,p;return vI(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i["send_to"]?(a=i["send_to"],Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=d.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length;c++)if(h=l[c],f=u(h),"break"===f)break;d.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return d.sent(),t(gI.EVENT,r,i||{}),[3,5];case 4:return p=d.sent(),NI.error(p),[3,5];case 5:return[2]}}))}))}function DI(t,e,n,r){function i(i,o,a){return dI(this,void 0,void 0,(function(){var s;return vI(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==gI.EVENT?[3,2]:[4,OI(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==gI.CONFIG?[3,4]:[4,xI(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(gI.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),NI.error(s),[3,7];case 7:return[2]}}))}))}return i}function LI(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=DI(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function MI(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(II))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FI=(AI={},AI["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",AI["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",AI["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",AI["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",AI["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",AI["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",AI["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",AI["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',AI["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',AI),jI=new c.ErrorFactory("analytics","Analytics",FI),UI=30,qI=1e3,VI=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=qI),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}(),BI=new VI;function KI(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function WI(t){var e;return dI(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return vI(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:KI(r)},o=wI.replace("{app-id}",n),[4,fetch(o,i)];case 1:if(a=c.sent(),200===a.status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw jI.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function HI(t,e,n){return void 0===e&&(e=BI),dI(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return vI(this,(function(l){if(r=t.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw jI.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw jI.create("no-api-key")}return s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new $I,setTimeout((function(){return dI(c,void 0,void 0,(function(){return vI(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:_I),[2,GI({appId:i,apiKey:o,measurementId:a},s,u,e)]}))}))}function GI(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=BI),dI(this,void 0,void 0,(function(){var e,a,s,u,l,h,f;return vI(this,(function(p){switch(p.label){case 0:e=t.appId,a=t.measurementId,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,zI(n,i)];case 2:return p.sent(),[3,4];case 3:if(s=p.sent(),a)return NI.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:a}];throw s;case 4:return p.trys.push([4,6,,7]),[4,WI(t)];case 5:return u=p.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(l=p.sent(),!QI(l)){if(r.deleteThrottleMetadata(e),a)return NI.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:e,measurementId:a}];throw l}return h=503===Number(l.customData.httpStatus)?(0,c.calculateBackoffMillis)(o,r.intervalMillis,UI):(0,c.calculateBackoffMillis)(o,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},r.setThrottleMetadata(e,f),NI.debug("Calling attemptFetch again in "+h+" millis"),[2,GI(t,f,n,r)];case 7:return[2]}}))}))}function zI(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(jI.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function QI(t){if(!(t instanceof c.FirebaseError)||!t.customData)return!1;var e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}var $I=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(){return dI(this,void 0,void 0,(function(){var t;return vI(this,(function(e){switch(e.label){case 0:return(0,c.isIndexedDBAvailable)()?[3,1]:(NI.warn(jI.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,c.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),NI.warn(jI.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}function XI(t,e,n,r,i,o){return dI(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return vI(this,(function(p){switch(p.label){case 0:return a=HI(t),a.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&NI.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return NI.error(t)})),e.push(a),s=YI().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=p.sent(),c=u[0],l=u[1],MI()||PI(o,c.measurementId),i("js",new Date),f={},f[bI]="firebase",f.update=!0,h=f,null!=l&&(h[mI]=l),i(gI.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JI,ZI,tT={},eT=[],nT={},rT="dataLayer",iT="gtag",oT=!1;function aT(t){if(oT)throw jI.create("already-initialized");t.dataLayerName&&(rT=t.dataLayerName),t.gtagName&&(iT=t.gtagName)}function sT(){var t=[];if((0,c.isBrowserExtension)()&&t.push("This is a browser extension environment."),(0,c.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=jI.create("invalid-analytics-context",{errorInfo:e});NI.warn(n.message)}}function uT(t,e){sT();var n=t.options.appId;if(!n)throw jI.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw jI.create("no-api-key");NI.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=tT[n])throw jI.create("already-exists",{id:n});if(!oT){RI(rT);var r=LI(tT,eT,nT,rT,iT),i=r.wrappedGtag,o=r.gtagCore;ZI=i,JI=o,oT=!0}tT[n]=XI(t,eT,nT,e,JI,rT);var a={app:t,logEvent:function(t,e,r){TI(ZI,tT[n],t,e,r).catch((function(t){return NI.error(t)}))},setCurrentScreen:function(t,e){EI(ZI,tT[n],t,e).catch((function(t){return NI.error(t)}))},setUserId:function(t,e){SI(ZI,tT[n],t,e).catch((function(t){return NI.error(t)}))},setUserProperties:function(t,e){CI(ZI,tT[n],t,e).catch((function(t){return NI.error(t)}))},setAnalyticsCollectionEnabled:function(t){kI(tT[n],t).catch((function(t){return NI.error(t)}))},INTERNAL:{delete:function(){return delete tT[n],Promise.resolve()}}};return a}var cT="@firebase/analytics",lT="0.6.18",hT="analytics";function fT(t){function e(t){try{var e=t.getProvider(hT).getImmediate();return{logEvent:e.logEvent}}catch(n){throw jI.create("interop-component-reg-failed",{reason:n})}}t.INTERNAL.registerComponent(new fd.Component(hT,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return uT(e,n)}),"PUBLIC").setServiceProps({settings:aT,EventName:yI,isSupported:pT})),t.INTERNAL.registerComponent(new fd.Component("analytics-internal",e,"PRIVATE")),t.registerVersion(cT,lT)}function pT(){return dI(this,void 0,void 0,(function(){var t;return vI(this,(function(e){switch(e.label){case 0:if((0,c.isBrowserExtension)())return[2,!1];if(!(0,c.areCookiesEnabled)())return[2,!1];if(!(0,c.isIndexedDBAvailable)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,c.validateIndexedDBOpenable)()];case 2:return t=e.sent(),[2,t];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}fT(r["default"]);var dT=function(){return dT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dT.apply(this,arguments)};function vT(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function gT(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;Object.create;var yT,mT=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return vT(this,void 0,void 0,(function(){var e,n,r,i,o;return gT(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],r=e[1],r&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),bT=(yT={},yT["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",yT["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",yT["registration-api-key"]="Undefined API key. Check Firebase app initialization.",yT["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",yT["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",yT["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",yT["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",yT["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",yT["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",yT["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',yT["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',yT["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",yT["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",yT),_T=new c.ErrorFactory("remoteconfig","Remote Config",bT);function wT(t,e){return t instanceof c.FirebaseError&&-1!==t.code.indexOf(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t){return void 0===t&&(t=navigator),t.languages&&t.languages[0]||t.language}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TT=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return vT(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,p,d,v,g,y,m,b;return gT(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:IT()},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return _.sent(),[4,c];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),_T.create(p,{originalErrorMessage:f.message});case 6:if(d=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];m=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return m=_.sent(),[3,10];case 9:throw b=_.sent(),_T.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=m["entries"],y=m["state"],_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?d=500:"NO_CHANGE"===y?d=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(g={}),304!==d&&200!==d)throw _T.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}}))}))},t}(),ET=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),ST=!1,CT="",kT=0,AT=["1","true","t","yes","y","on"],NT=function(){function t(t,e){void 0===e&&(e=CT),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"===this._source?ST:AT.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return kT;var t=Number(this._value);return isNaN(t)&&(t=kT),t},t.prototype.getSource=function(){return this._source},t}(),PT=6e4,RT=432e5,xT=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:PT,minimumFetchIntervalMillis:RT},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=l.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=l.LogLevel.SILENT;break;default:this._logger.logLevel=l.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return vT(this,void 0,void 0,(function(){var t,e,n;return gT(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return vT(this,void 0,void 0,(function(){var t,e,n,r=this;return gT(this,(function(i){switch(i.label){case 0:t=new ET,setTimeout((function(){return vT(r,void 0,void 0,(function(){return gT(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=wT(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return vT(this,void 0,void 0,(function(){return gT(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return OT(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new NT("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new NT("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new NT("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(dT(dT({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e){var n=t.target.error||void 0;return _T.create(e,{originalErrorMessage:n&&n.message})}var LT="app_namespace_store",MT="firebase_remote_config",FT=1;function jT(){return new Promise((function(t,e){var n=indexedDB.open(MT,FT);n.onerror=function(t){e(DT(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(LT,{keyPath:"compositeKey"})}}}))}var UT=function(){function t(t,e,n,r){void 0===r&&(r=jT()),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return vT(this,void 0,void 0,(function(){var e,n=this;return gT(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([LT],"readonly"),a=o.objectStore(LT),s=n.createCompositeKey(t);try{var u=a.get(s);u.onerror=function(t){i(DT(t,"storage-get"))},u.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(c){i(_T.create("storage-get",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.set=function(t,e){return vT(this,void 0,void 0,(function(){var n,r=this;return gT(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([LT],"readwrite"),s=a.objectStore(LT),u=r.createCompositeKey(t);try{var c=s.put({compositeKey:u,value:e});c.onerror=function(t){o(DT(t,"storage-set"))},c.onsuccess=function(){i()}}catch(l){o(_T.create("storage-set",{originalErrorMessage:l&&l.message}))}}))]}}))}))},t.prototype.delete=function(t){return vT(this,void 0,void 0,(function(){var e,n=this;return gT(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([LT],"readwrite"),a=o.objectStore(LT),s=n.createCompositeKey(t);try{var u=a.delete(s);u.onerror=function(t){i(DT(t,"storage-delete"))},u.onsuccess=function(){r()}}catch(c){i(_T.create("storage-delete",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),qT=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return vT(this,void 0,void 0,(function(){var t,e,n,r,i,o;return gT(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return r=a.sent(),r&&(this.lastFetchStatus=r),[4,e];case 2:return i=a.sent(),i&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return o=a.sent(),o&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function VT(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(_T.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function BT(t){if(!(t instanceof c.FirebaseError)||!t.customData)return!1;var e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}var KT=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return vT(this,void 0,void 0,(function(){var e;return gT(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return vT(this,void 0,void 0,(function(){var e,i,o;return gT(this,(function(a){switch(a.label){case 0:return[4,VT(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(i=a.sent(),!BT(i))throw i;return o={throttleEndTimeMillis:Date.now()+(0,c.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),WT="@firebase/remote-config",HT="0.1.43";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function GT(t){function e(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw _T.create("registration-window");var a=i.options,s=a.projectId,u=a.apiKey,c=a.appId;if(!s)throw _T.create("registration-project-id");if(!u)throw _T.create("registration-api-key");if(!c)throw _T.create("registration-app-id");r=r||"firebase";var h=new UT(c,i.name,r),f=new qT(h),p=new l.Logger(WT);p.logLevel=l.LogLevel.ERROR;var d=new TT(o,t.SDK_VERSION,r,s,u,c),v=new KT(d,h),g=new mT(v,h,f,p),y=new xT(i,g,f,h,p);return y.ensureInitialized(),y}t.INTERNAL.registerComponent(new fd.Component("remoteConfig",e,"PUBLIC").setMultipleInstances(!0)),t.registerVersion(WT,HT)}GT(r["default"]);n(224);var zT="firebase",QT="8.10.1";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r["default"].registerVersion(zT,QT,"app"),r["default"].SDK_VERSION=QT;var $T="firebase",YT="8.10.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),r["default"].registerVersion($T,YT)},676:function(t,e){(function(t,n){n(e)})(0,(function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){i=t[e].apply(t,r),n(i).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function g(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=g,Object.defineProperty(t,"__esModule",{value:!0})}))},744:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n}},119:function(t,e,n){"use strict";n.d(e,{PO:function(){return H},p7:function(){return ee}});var r=n(252),i=n(931);
/*!
  * vue-router v4.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const o="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,a=t=>o?Symbol(t):"_vr_"+t,s=a("rvlm"),u=a("rvd"),c=a("r"),l=a("rl"),h=a("rvl"),f="undefined"!==typeof window;function p(t){return t.__esModule||o&&"Module"===t[Symbol.toStringTag]}const d=Object.assign;function v(t,e){const n={};for(const r in e){const i=e[r];n[r]=Array.isArray(i)?i.map(t):t(i)}return n}const g=()=>{};const y=/\/$/,m=t=>t.replace(y,"");function b(t,e,n="/"){let r,i={},o="",a="";const s=e.indexOf("?"),u=e.indexOf("#",s>-1?s:0);return s>-1&&(r=e.slice(0,s),o=e.slice(s+1,u>-1?u:e.length),i=t(o)),u>-1&&(r=r||e.slice(0,u),a=e.slice(u,e.length)),r=k(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function _(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function w(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function I(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&T(e.matched[r],n.matched[i])&&E(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function T(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function E(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!S(t[n],e[n]))return!1;return!0}function S(t,e){return Array.isArray(t)?C(t,e):Array.isArray(e)?C(e,t):t===e}function C(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function k(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,o,a=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==a&&"."!==o){if(".."!==o)break;a--}return n.slice(0,a).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var A,N;(function(t){t["pop"]="pop",t["push"]="push"})(A||(A={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(N||(N={}));function P(t){if(!t)if(f){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),m(t)}const R=/^[^#]+#/;function x(t,e){return t.replace(R,"#")+e}function O(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const D=()=>({left:window.pageXOffset,top:window.pageYOffset});function L(t){let e;if("el"in t){const n=t.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=O(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function M(t,e){const n=history.state?history.state.position-e:-1;return n+t}const F=new Map;function j(t,e){F.set(t,e)}function U(t){const e=F.get(t);return F.delete(t),e}let q=()=>location.protocol+"//"+location.host;function V(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),w(n,"")}const a=w(n,t);return a+r+i}function B(t,e,n,r){let i=[],o=[],a=null;const s=({state:o})=>{const s=V(t,location),u=n.value,c=e.value;let l=0;if(o){if(n.value=s,e.value=o,a&&a===u)return void(a=null);l=c?o.position-c.position:0}else r(s);i.forEach((t=>{t(n.value,u,{delta:l,type:A.pop,direction:l?l>0?N.forward:N.back:N.unknown})}))};function u(){a=n.value}function c(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e}function l(){const{history:t}=window;t.state&&t.replaceState(d({},t.state,{scroll:D()}),"")}function h(){for(const t of o)t();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",l),{pauseListeners:u,listen:c,destroy:h}}function K(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?D():null}}function W(t){const{history:e,location:n}=window,r={value:V(t,n)},i={value:e.state};function o(r,o,a){const s=t.indexOf("#"),u=s>-1?(n.host&&document.querySelector("base")?t:t.slice(s))+r:q()+t+r;try{e[a?"replaceState":"pushState"](o,"",u),i.value=o}catch(c){console.error(c),n[a?"replace":"assign"](u)}}function a(t,n){const a=d({},e.state,K(i.value.back,t,i.value.forward,!0),n,{position:i.value.position});o(t,a,!0),r.value=t}function s(t,n){const a=d({},i.value,e.state,{forward:t,scroll:D()});o(a.current,a,!0);const s=d({},K(r.value,t,null),{position:a.position+1},n);o(t,s,!1),r.value=t}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:s,replace:a}}function H(t){t=P(t);const e=W(t),n=B(t,e.state,e.location,e.replace);function r(t,e=!0){e||n.pauseListeners(),history.go(t)}const i=d({location:"",base:t,go:r,createHref:x.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function G(t){return"string"===typeof t||t&&"object"===typeof t}function z(t){return"string"===typeof t||"symbol"===typeof t}const Q={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},$=a("nf");var Y;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(Y||(Y={}));function X(t,e){return d(new Error,{type:t,[$]:!0},e)}function J(t,e){return t instanceof Error&&$ in t&&(null==e||!!(t.type&e))}const Z="[^/]+?",tt={sensitive:!1,strict:!1,start:!0,end:!0},et=/[.+*?^${}()[\]/\\]/g;function nt(t,e){const n=d({},tt,e),r=[];let i=n.start?"^":"";const o=[];for(const l of t){const t=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let e=0;e<l.length;e++){const r=l[e];let a=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(et,"\\$&"),a+=40;else if(1===r.type){const{value:t,repeatable:n,optional:s,regexp:u}=r;o.push({name:t,repeatable:n,optional:s});const h=u||Z;if(h!==Z){a+=10;try{new RegExp(`(${h})`)}catch(c){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+c.message)}}let f=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(f=s&&l.length<2?`(?:/${f})`:"/"+f),s&&(f+="?"),i+=f,a+=20,s&&(a+=-8),n&&(a+=-20),".*"===h&&(a+=-50)}t.push(a)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function s(t){const e=t.match(a),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n}function u(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:a,optional:s}=t,u=o in e?e[o]:"";if(Array.isArray(u)&&!a)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=Array.isArray(u)?u.join("/"):u;if(!c){if(!s)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n}return{re:a,score:r,keys:o,parse:s,stringify:u}}function rt(t,e){let n=0;while(n<t.length&&n<e.length){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function it(t,e){let n=0;const r=t.score,i=e.score;while(n<r.length&&n<i.length){const t=rt(r[n],i[n]);if(t)return t;n++}return i.length-r.length}const ot={type:0,value:""},at=/[a-zA-Z0-9_]/;function st(t){if(!t)return[[]];if("/"===t)return[[ot]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s,u=0,c="",l="";function h(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===s||"+"===s)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):e("Invalid state to consume buffer"),c="")}function f(){c+=s}while(u<t.length)if(s=t[u++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(c&&h(),a()):":"===s?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===s?n=2:at.test(s)?f():(h(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&u--);break;case 2:")"===s?"\\"==l[l.length-1]?l=l.slice(0,-1)+s:n=3:l+=s;break;case 3:h(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&u--,l="";break;default:e("Unknown state");break}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),h(),a(),i}function ut(t,e,n){const r=nt(st(t.path),n);const i=d(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf===!e.record.aliasOf&&e.children.push(i),i}function ct(t,e){const n=[],r=new Map;function i(t){return r.get(t)}function o(t,n,r){const i=!r,s=ht(t);s.aliasOf=r&&r.record;const c=vt(e,t),l=[s];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)l.push(d({},s,{components:r?r.record.components:s.components,path:t,aliasOf:r?r.record:s}))}let h,f;for(const e of l){const{path:l}=e;if(n&&"/"!==l[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(l&&r+l)}if(h=ut(e,n,c),r?r.alias.push(h):(f=f||h,f!==h&&f.alias.push(h),i&&t.name&&!pt(h)&&a(t.name)),"children"in s){const t=s.children;for(let e=0;e<t.length;e++)o(t[e],h,r&&r.children[e])}r=r||h,u(h)}return f?()=>{a(f)}:g}function a(t){if(z(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(a),e.alias.forEach(a))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(a),t.alias.forEach(a))}}function s(){return n}function u(t){let e=0;while(e<n.length&&it(t,n[e])>=0&&(t.record.path!==n[e].record.path||!gt(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!pt(t)&&r.set(t.record.name,t)}function c(t,e){let i,o,a,s={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw X(1,{location:t});a=i.record.name,s=d(lt(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=i.stringify(s)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(s=i.parse(o),a=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw X(1,{location:t,currentLocation:e});a=i.record.name,s=d({},e.params,t.params),o=i.stringify(s)}const u=[];let c=i;while(c)u.unshift(c.record),c=c.parent;return{name:a,path:o,params:s,matched:u,meta:dt(u)}}return e=vt({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>o(t))),{addRoute:o,resolve:c,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function lt(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function ht(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:ft(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function ft(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="boolean"===typeof n?n:n[r];return e}function pt(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function dt(t){return t.reduce(((t,e)=>d(t,e.meta)),{})}function vt(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function gt(t,e){return e.children.some((e=>e===t||gt(t,e)))}const yt=/#/g,mt=/&/g,bt=/\//g,_t=/=/g,wt=/\?/g,It=/\+/g,Tt=/%5B/g,Et=/%5D/g,St=/%5E/g,Ct=/%60/g,kt=/%7B/g,At=/%7C/g,Nt=/%7D/g,Pt=/%20/g;function Rt(t){return encodeURI(""+t).replace(At,"|").replace(Tt,"[").replace(Et,"]")}function xt(t){return Rt(t).replace(kt,"{").replace(Nt,"}").replace(St,"^")}function Ot(t){return Rt(t).replace(It,"%2B").replace(Pt,"+").replace(yt,"%23").replace(mt,"%26").replace(Ct,"`").replace(kt,"{").replace(Nt,"}").replace(St,"^")}function Dt(t){return Ot(t).replace(_t,"%3D")}function Lt(t){return Rt(t).replace(yt,"%23").replace(wt,"%3F")}function Mt(t){return null==t?"":Lt(t).replace(bt,"%2F")}function Ft(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function jt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],r=(n?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const t=r[i].replace(It," "),n=t.indexOf("="),o=Ft(n<0?t:t.slice(0,n)),a=n<0?null:Ft(t.slice(n+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(a)}else e[o]=a}return e}function Ut(t){let e="";for(let n in t){const r=t[n];if(n=Dt(n),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}const i=Array.isArray(r)?r.map((t=>t&&Ot(t))):[r&&Ot(r)];i.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function qt(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}function Vt(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function Bt(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((a,s)=>{const u=t=>{!1===t?s(X(4,{from:n,to:e})):t instanceof Error?s(t):G(t)?s(X(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"===typeof t&&o.push(t),a())},c=t.call(r&&r.instances[i],e,n,u);let l=Promise.resolve(c);t.length<3&&(l=l.then(u)),l.catch((t=>s(t)))}))}function Kt(t,e,n,r){const i=[];for(const o of t)for(const t in o.components){let a=o.components[t];if("beforeRouteEnter"===e||o.instances[t])if(Wt(a)){const s=a.__vccOpts||a,u=s[e];u&&i.push(Bt(u,n,r,o,t))}else{let s=a();0,i.push((()=>s.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${o.path}"`));const a=p(i)?i.default:i;o.components[t]=a;const s=a.__vccOpts||a,u=s[e];return u&&Bt(u,n,r,o,t)()}))))}}return i}function Wt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Ht(t){const e=(0,r.f3)(c),n=(0,r.f3)(l),o=(0,r.Fl)((()=>e.resolve((0,i.SU)(t.to)))),a=(0,r.Fl)((()=>{const{matched:t}=o.value,{length:e}=t,r=t[e-1],i=n.matched;if(!r||!i.length)return-1;const a=i.findIndex(T.bind(null,r));if(a>-1)return a;const s=Yt(t[e-2]);return e>1&&Yt(r)===s&&i[i.length-1].path!==s?i.findIndex(T.bind(null,t[e-2])):a})),s=(0,r.Fl)((()=>a.value>-1&&$t(n.params,o.value.params))),u=(0,r.Fl)((()=>a.value>-1&&a.value===n.matched.length-1&&E(n.params,o.value.params)));function h(n={}){return Qt(n)?e[(0,i.SU)(t.replace)?"replace":"push"]((0,i.SU)(t.to)).catch(g):Promise.resolve()}return{route:o,href:(0,r.Fl)((()=>o.value.href)),isActive:s,isExactActive:u,navigate:h}}const Gt=(0,r.aZ)({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ht,setup(t,{slots:e}){const n=(0,i.qj)(Ht(t)),{options:o}=(0,r.f3)(c),a=(0,r.Fl)((()=>({[Xt(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Xt(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=e.default&&e.default(n);return t.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},i)}}}),zt=Gt;function Qt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function $t(t,e){for(const n in e){const r=e[n],i=t[n];if("string"===typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}function Yt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Xt=(t,e,n)=>null!=t?t:null!=e?e:n,Jt=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const o=(0,r.f3)(h),a=(0,r.Fl)((()=>t.route||o.value)),c=(0,r.f3)(u,0),l=(0,r.Fl)((()=>a.value.matched[c]));(0,r.JJ)(u,c+1),(0,r.JJ)(s,l),(0,r.JJ)(h,a);const f=(0,i.iH)();return(0,r.YP)((()=>[f.value,l.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&T(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const i=a.value,o=l.value,s=o&&o.components[t.name],u=t.name;if(!s)return Zt(n.default,{Component:s,route:i});const c=o.props[t.name],h=c?!0===c?i.params:"function"===typeof c?c(i):c:null,p=t=>{t.component.isUnmounted&&(o.instances[u]=null)},v=(0,r.h)(s,d({},h,e,{onVnodeUnmounted:p,ref:f}));return Zt(n.default,{Component:v,route:i})||v}}});function Zt(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const te=Jt;function ee(t){const e=ct(t.routes,t),n=t.parseQuery||jt,o=t.stringifyQuery||Ut,a=t.history;const s=Vt(),u=Vt(),p=Vt(),y=(0,i.XI)(Q);let m=Q;f&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=v.bind(null,(t=>""+t)),T=v.bind(null,Mt),E=v.bind(null,Ft);function S(t,n){let r,i;return z(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)}function C(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function k(){return e.getRoutes().map((t=>t.record))}function N(t){return!!e.getRecordMatcher(t)}function P(t,r){if(r=d({},r||y.value),"string"===typeof t){const i=b(n,t,r.path),o=e.resolve({path:i.path},r),s=a.createHref(i.fullPath);return d(i,o,{params:E(o.params),hash:Ft(i.hash),redirectedFrom:void 0,href:s})}let i;if("path"in t)i=d({},t,{path:b(n,t.path,r.path).path});else{const e=d({},t.params);for(const t in e)null==e[t]&&delete e[t];i=d({},t,{params:T(t.params)}),r.params=T(r.params)}const s=e.resolve(i,r),u=t.hash||"";s.params=w(E(s.params));const c=_(o,d({},t,{hash:xt(u),path:s.path})),l=a.createHref(c);return d({fullPath:c,hash:u,query:o===Ut?qt(t.query):t.query||{}},s,{redirectedFrom:void 0,href:l})}function R(t){return"string"===typeof t?b(n,t,y.value.path):d({},t)}function x(t,e){if(m!==t)return X(8,{from:e,to:t})}function O(t){return V(t)}function F(t){return O(d(R(t),{replace:!0}))}function q(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"===typeof n?n(t):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=R(r):{path:r},r.params={}),d({query:t.query,hash:t.hash,params:t.params},r)}}function V(t,e){const n=m=P(t),r=y.value,i=t.state,a=t.force,s=!0===t.replace,u=q(n);if(u)return V(d(R(u),{state:i,force:a,replace:s}),e||n);const c=n;let l;return c.redirectedFrom=e,!a&&I(o,r,n)&&(l=X(16,{to:c,from:r}),it(r,r,!0,!1)),(l?Promise.resolve(l):K(c,r)).catch((t=>J(t)?J(t,2)?t:rt(t):et(t,c,r))).then((t=>{if(t){if(J(t,2))return V(d(R(t.to),{state:i,force:a,replace:s}),e||c)}else t=H(c,r,!0,s,i);return W(c,r,t),t}))}function B(t,e){const n=x(t,e);return n?Promise.reject(n):Promise.resolve()}function K(t,e){let n;const[r,i,o]=re(t,e);n=Kt(r.reverse(),"beforeRouteLeave",t,e);for(const s of r)s.leaveGuards.forEach((r=>{n.push(Bt(r,t,e))}));const a=B.bind(null,t,e);return n.push(a),ne(n).then((()=>{n=[];for(const r of s.list())n.push(Bt(r,t,e));return n.push(a),ne(n)})).then((()=>{n=Kt(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(Bt(r,t,e))}));return n.push(a),ne(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(Bt(i,t,e));else n.push(Bt(r.beforeEnter,t,e));return n.push(a),ne(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=Kt(o,"beforeRouteEnter",t,e),n.push(a),ne(n)))).then((()=>{n=[];for(const r of u.list())n.push(Bt(r,t,e));return n.push(a),ne(n)})).catch((t=>J(t,8)?t:Promise.reject(t)))}function W(t,e,n){for(const r of p.list())r(t,e,n)}function H(t,e,n,r,i){const o=x(t,e);if(o)return o;const s=e===Q,u=f?history.state:{};n&&(r||s?a.replace(t.fullPath,d({scroll:s&&u&&u.scroll},i)):a.push(t.fullPath,i)),y.value=t,it(t,e,n,s),rt()}let G;function $(){G=a.listen(((t,e,n)=>{const r=P(t),i=q(r);if(i)return void V(d(i,{replace:!0}),r).catch(g);m=r;const o=y.value;f&&j(M(o.fullPath,n.delta),D()),K(r,o).catch((t=>J(t,12)?t:J(t,2)?(V(t.to,r).then((t=>{J(t,20)&&!n.delta&&n.type===A.pop&&a.go(-1,!1)})).catch(g),Promise.reject()):(n.delta&&a.go(-n.delta,!1),et(t,r,o)))).then((t=>{t=t||H(r,o,!1),t&&(n.delta?a.go(-n.delta,!1):n.type===A.pop&&J(t,20)&&a.go(-1,!1)),W(r,o,t)})).catch(g)}))}let Y,Z=Vt(),tt=Vt();function et(t,e,n){rt(t);const r=tt.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function nt(){return Y&&y.value!==Q?Promise.resolve():new Promise(((t,e)=>{Z.add([t,e])}))}function rt(t){return Y||(Y=!t,$(),Z.list().forEach((([e,n])=>t?n(t):e())),Z.reset()),t}function it(e,n,i,o){const{scrollBehavior:a}=t;if(!f||!a)return Promise.resolve();const s=!i&&U(M(e.fullPath,0))||(o||!i)&&history.state&&history.state.scroll||null;return(0,r.Y3)().then((()=>a(e,n,s))).then((t=>t&&L(t))).catch((t=>et(t,e,n)))}const ot=t=>a.go(t);let at;const st=new Set,ut={currentRoute:y,addRoute:S,removeRoute:C,hasRoute:N,getRoutes:k,resolve:P,options:t,push:O,replace:F,go:ot,back:()=>ot(-1),forward:()=>ot(1),beforeEach:s.add,beforeResolve:u.add,afterEach:p.add,onError:tt.add,isReady:nt,install(t){const e=this;t.component("RouterLink",zt),t.component("RouterView",te),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.SU)(y)}),f&&!at&&y.value===Q&&(at=!0,O(a.location).catch((t=>{0})));const n={};for(const i in Q)n[i]=(0,r.Fl)((()=>y.value[i]));t.provide(c,e),t.provide(l,(0,i.qj)(n)),t.provide(h,y);const o=t.unmount;st.add(t),t.unmount=function(){st.delete(t),st.size<1&&(m=Q,G&&G(),y.value=Q,at=!1,Y=!1),o()}}};return ut}function ne(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}function re(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let a=0;a<o;a++){const o=e.matched[a];o&&(t.matched.find((t=>T(t,o)))?r.push(o):n.push(o));const s=t.matched[a];s&&(e.matched.find((t=>T(t,s)))||i.push(s))}return[n,r,i]}}}]);
//# sourceMappingURL=chunk-vendors.c59c6721.js.map